Framework - Do Zero ao App
1 - Vis√£o Estrat√©gica
üëâ Porque essa etapa √© importante?

Aqui definimos a funda√ß√£o estrat√©gica do projeto, alinhando prop√≥sito, problema real e p√∫blico-alvo antes de qualquer linha de cria√ß√£o.
√â nesse momento que voc√™ deixa de apenas ‚Äúter uma ideia‚Äù e come√ßa a transform√°-la em uma solu√ß√£o com dire√ß√£o clara.
Ao identificar a dor que ser√° resolvida, os tipos de usu√°rios e as funcionalidades essenciais, essa etapa evita retrabalho, direciona escolhas t√©cnicas e facilita o uso inteligente da IA ao longo do processo.
üí° Obs: Ser√£o usados dados de um Case de exemplo para facilitar o preenchimento, pode alterar o documento como preferir.
‚òëÔ∏è Checklist

<aside> <img src="/icons/report_orange.svg" alt="/icons/report_orange.svg" width="40px" />
Ferramentas para ajudar nessa etapa: Utilize ChatGPT ou plataformas similares apoio nesse processo.
</aside>
<aside> <img src="/icons/report_gray.svg" alt="/icons/report_gray.svg" width="40px" />
Problema identificado
As empresas que utilizam a Intelig√™ncia Artificial enfrentam dois problemas cr√≠ticos ao tentar escalar o uso internamente:
Seguran√ßa e Vazamento de Dados: Ao usar ferramentas p√∫blicas (como ChatGPT/Claude), o contexto corporativo e a propriedade intelectual podem ser usados no treinamento desses modelos. H√° um risco real de vazamento de dados confidenciais.
Custo Descontrolado e Descentralizado: A compra dispersa de assinaturas ou chaves de API por colaborador ou departamento gera um custo de IA imprevis√≠vel e sem auditoria, dificultando a aloca√ß√£o de or√ßamento e a justificativa do ROI (Retorno sobre o Investimento). </aside>
<aside> <img src="/icons/emoji-winking_gray.svg" alt="/icons/emoji-winking_gray.svg" width="40px" />
Solu√ß√£o
Criar o ControlAI, uma Plataforma de IA Privada e Segura (SaaS Multi-tenant) que transforma a IA de um custo descentralizado em um ativo corporativo gerenci√°vel. A solu√ß√£o ser√° constru√≠da sob a stack Cursor/Vite/Supabase e incluir√°:
Controle de Acesso Segregado (RLS): Garantir que o ambiente de cada empresa (Tenant) seja isolado dos demais.
Modelo H√≠brido (BYOK - Bring Your Own Key): Permitir que a empresa use sua pr√≥pria chave API de LLM (OpenAI/Claude), pagando √† plataforma apenas pela seguran√ßa e gest√£o.
Gest√£o de Contexto: Um Dashboard para o Admin da Empresa configurar as regras (system prompts) da IA para toda a sua equipe.
</aside>
<aside> <img src="/icons/123_gray.svg" alt="/icons/123_gray.svg" width="40px" />
Funcionalidades Principais
Seguran√ßa e Isolamento (RLS)
Configura√ß√£o do RLS no Supabase para garantir a segrega√ß√£o de dados entre Tenants (Empresas).
M√≥dulo de Assinaturas
Integra√ß√£o com Stripe para gerenciar planos de assinatura, checkout e Webhooks. Implementa√ß√£o do Gating de Recursos (libera√ß√£o do Chat IA mediante pagamento).
Painel de Chat (LLM)
Interface de conversa que injeta o contexto da empresa (System Prompt) antes de enviar a requisi√ß√£o √† LLM. Rastreamento de uso de tokens e mensagens.
Admin Dashboard (Tenant)
Interface para a Inser√ß√£o da Chave API (BYOK) e configura√ß√£o do System Prompt. Gerenciamento de perfis e roles (admin, user) de colaboradores.
Dashboard Master (Plataforma)
Painel gerencial restrito ao role: master. Vis√£o de MRR (Receita Recorrente), empresas ativas e logs de auditoria.
Gerenciamento de Agentes IA
CRUD completo para o Admin Tenant criar e configurar agentes IA nichados para diferentes departamentos. </aside>
<aside> <img src="/icons/friends_gray.svg" alt="/icons/friends_gray.svg" width="40px" />
Persona e Tipos de Usu√°rios
O projeto exige a defini√ß√£o clara dos pap√©is e permiss√µes para a implementa√ß√£o de seguran√ßa.
Admin Master (Dono da Plataforma)

 Foco em monitoramento do neg√≥cio SaaS e auditoria.

 role: master. Acesso a dados agregados de todas as empresas.


Admin Tenant (Gestor da Empresa)

 Respons√°vel pela gest√£o interna da empresa cliente. Foco em gest√£o de custos (BYOK) e contexto da IA.

 role: admin. Acesso total aos dados da sua pr√≥pria empresa.


Colaborador

 Usu√°rio final que utiliza o Chat IA para produtividade.

 role: user. Acesso apenas √†s suas pr√≥prias conversas e aos agentes da sua empresa.


</aside>
<aside> <img src="/icons/hammer_gray.svg" alt="/icons/hammer_gray.svg" width="40px" />
Ferramentas e Custos Geral
A proposta de valor √© construir um SaaS vend√°vel com a m√°xima efici√™ncia de custos e ferramentas de ponta. Desenho Geral do Projeto e Ferramentas

 A proposta √© fazer um desenho como esse para termos uma vis√£o geral



Ferramentas
Lovable para Prototipagem - Plano Free
Cursor para Desenvolvimento e Refatora√ß√£o - Plano Pro U$ 20,00
Frontend/Hospedagem - Netlify Pro (U$0-U$20/m√™s) Plano Gratuito (Inicial)
Backend/DB/Auth - Plano Pro (U$0-U$20/m√™s) Plano Gratuito (Inicial)
Monetiza√ß√£o - Stripe (Pagamentos e Webhooks)
Comunica√ß√£o - Brevo (E-mails Transacionais) - Plano Gratuito (Inicial)
IA/LLM - OpenAI/Claude (BYOK) - Custo Zero para a Plataforma (o cliente paga)
Custo Estimado de Manuten√ß√£o Mensal (MVP): U$25 a U$50, dependendo do crescimento do uso do Supabase e das ferramentas.
Total Aproximado
Investimento Inicial R$200
Manuten√ß√£o Mensal R$320/m√™s
</aside>
üìçOutras Observa√ß√µes importantes

Decis√£o Arquitetural: O projeto ser√° constru√≠do em Vite/React. A seguran√ßa ser√° garantida primariamente via Supabase RLS.
Escopo de Seguran√ßa: O foco da seguran√ßa est√° na segrega√ß√£o de dados (RLS) e no controle de acesso (Roles), n√£o em testes de penetra√ß√£o complexos.
Prazos Estipulados (SaaS): A velocidade do Vibe Coding √© cr√≠tica. A migra√ß√£o do prot√≥tipo (M√≥dulo 3.3) deve ser conclu√≠da em uma √∫nica sess√£o para demonstrar a efici√™ncia da IA.

2 - Insights do Mercado
üëâ Porque essa etapa √© importante?

Esta etapa √© importante porque impede que o voc√™ desenvolva sua solu√ß√£o no escuro. √â aqui que ser√° investigado o que j√° existe, aprende com projetos semelhantes, identifica boas pr√°ticas, gaps do mercado e diferenciais competitivos.
Ao analisar refer√™ncias, levantar benchmarks e estudar o comportamento de solu√ß√µes j√° validadas, voc√™ ganha repert√≥rio para tomar decis√µes mais inteligentes e inovadoras.
üí° Obs: Ser√£o usados dados de um Case de exemplo para facilitar o preenchimento, pode alterar o documento como preferir.
‚òëÔ∏è Checklist

<aside> <img src="/icons/activity_gray.svg" alt="/icons/activity_gray.svg" width="40px" />
Benchmark do Mercado
Pesquisa de Plataformas do mercado que ofere√ßam solu√ß√µes semelhantes.
<aside> <img src="/icons/report_orange.svg" alt="/icons/report_orange.svg" width="40px" />
Ferramentas para ajudar nessa etapa: Utilize ChatGPT ou plataformas similares para suporte na Pesquisa
</aside>
LiteLLM

 https://www.litellm.ai/

 Oferece a governan√ßa de custos mais granular e estrutural. Permite definir e impor or√ßamentos financeiros (USD) em m√∫ltiplos n√≠veis: Global, por Equipe (team_id), e por Colaborador Individual (user_id). Requer infraestrutura pr√≥pria (PostgreSQL para rastreamento de gastos) .


Portkey

 https://portkey.ai/docs/integrations/libraries/langflow

 Agilidade e Observabilidade. Permite o gerenciamento seguro de chaves mestras e a emiss√£o de Chaves Virtuais. Possibilita o rateio de custos ao capturar o ID do usu√°rio final (par√¢metro user) ou metadados personalizados (e.g., department: "engineering") anexados √† requisi√ß√£o. Oferece dashboards prontos para monitoramento em tempo real.


LLMetrics

 https://www.llmetric.ai/

 Foco Espec√≠fico em User-Level FinOps. √â um LLM-specific API gateway projetado para que empresas monitorem e controlem o uso e custo em n√≠vel de usu√°rio/grupo. O sistema gera chaves de API derivadas para cada usu√°rio, facilitando a atribui√ß√£o de custos e a imposi√ß√£o de limites de acesso e or√ßamento por grupo.

<aside> <img src="/icons/report_orange.svg" alt="/icons/report_orange.svg" width="40px" />
</aside>
Refer√™ncias de Desgner




 https://dribbble.com/shots/20943992-Redesign-ChatGPT


</aside>
üìçOutras Observa√ß√µes importantes

Ponto Chave: O ControlAI n√£o √© uma LLM (como OpenAI ou Claude). Ele √© a camada inteligente de SEGURAN√áA e CONTROLE entre essas LLMs e a sua empresa.
Nosso Lema: "A plataforma que permite usar a pot√™ncia da OpenAI/Claude com a SEGURAN√áA e CONTEXTO da sua corpora√ß√£o."
Canais de Entrega: Nosso produto √© uma aplica√ß√£o web moderna (Vite/React), acess√≠vel em qualquer navegador. Comunica√ß√µes importantes (bem-vindo, pagamentos) s√£o feitas por e-mail para garantir que voc√™ receba tudo de forma confi√°vel.
Concorr√™ncia: N√£o disputamos com a IA, mas com outras plataformas que tentam integrar IA de forma menos segura ou adapt√°vel. Nosso diferencial √© a seguran√ßa multi-tenant e o controle personalizado.

3 - Arquitetura T√©cnica
üëâ Porque essa etapa √© importante?

Esta etapa √© essencial porque transforma a ideia em um plano t√©cnico concreto, conectando vis√£o estrat√©gica com execu√ß√£o pr√°tica. Voc√™ ir√° definir a stack de ferramentas NoCode e IA que usar√°, mapeia os processos e fluxos da solu√ß√£o, organiza visualmente as telas com wireframes e estrutura o banco de dados necess√°rio.
Al√©m disso, tudo √© documentado em um PRD (Product Requirements Document), garantindo clareza para si mesmo e para qualquer pessoa que participe do projeto. Essa etapa d√° forma, l√≥gica e coes√£o √† solu√ß√£o, evitando improvisos e permitindo uma constru√ß√£o muito mais fluida, escal√°vel e profissional.
üí° Obs: Ser√£o usados dados de um Case de exemplo para facilitar o preenchimento, pode alterar o documento como preferir.
‚òëÔ∏è Checklist

<aside> <img src="/icons/stairs_gray.svg" alt="/icons/stairs_gray.svg" width="40px" />
Mapeamento de Processos
Mapear os processos √© uma etapa obrigat√≥ria antes antes de automatizar ou criar Agente de IA.
<aside> <img src="/icons/report_orange.svg" alt="/icons/report_orange.svg" width="40px" />
Ferramentas para ajudar nessa etapa: Utilize Miro, FigJam, ou Whimsical para mapear processos visuais
</aside>
Onboarding e Cria√ß√£o de Tenant

 Garantir que cada empresa tenha seu ambiente isolado e a Role correta.


Novo usu√°rio acessa /register
Sistema: Cria a entrada na tabela auth.users e na tabela perfis
Sistema: Cria a nova entrada na tabela empresas (Tenant).
Sistema: Vincula o perfil.empresa_id e atribui role: admin ao primeiro usu√°rio.
Sistema: Aciona o fluxo de e-mail de boas-vindas (Brevo).
Gating do Chat (BYOK + Assinatura)

 O Chat IA deve verificar se 1) a empresa paga e 2) inseriu a Chave API.


Usu√°rio clica em 'P√°gina de Chat' (/chat)
Sistema (Frontend): Verifica se empresa.is_active √© true.
Sistema (Frontend): Verifica se empresa.chave_api_llm est√° preenchida.
Sistema (Back-end): Se faltar qualquer requisito, redireciona o admin para o Admin Dashboard (Tenant) com o alerta "Finalize sua configura√ß√£o (Assinatura/BYOK)".
Gest√£o de Agentes IA (Admin Tenant)

 Permitir que a Empresa crie suas pr√≥prias IAs de contexto espec√≠fico.


Admin Tenant acessa Gerenciamento de Agentes
Sistema: RLS garante que ele veja apenas agentes com seu empresa_id
Admin Tenant cria novo agente: nome instrucoes (System Prompt).
Sistema: Salva na tabela agentes_ia com o empresa_id correspondente.
Rastreamento de Uso (Limitando Custos)

 Auditar e controlar os recursos consumidos por empresa.


Usu√°rio envia mensagem no Chat IA.
Sistema (Edge Function/API): Antes de chamar a LLM, consulta uso_recursos para verificar o limite_mensagens_mes.
Sistema (Edge Function/API): Se o limite for excedido, nega a chamada e envia erro ao frontend.
Sistema (Edge Function/API): Ap√≥s a resposta da LLM, atualiza os campos conversas.tokens_usados e uso_recursos.tokens_consumidos.
</aside>
<aside> <img src="/icons/database_gray.svg" alt="/icons/database_gray.svg" width="40px" />
Modelagem de Dados
A modelagem de dados j√° est√° avan√ßada no PRD, mas o foco √© refor√ßar a l√≥gica de Relacionamentos e RLS.
<aside> <img src="/icons/report_orange.svg" alt="/icons/report_orange.svg" width="40px" />
Ferramentas para ajudar nessa etapa: Utilize o ChatGPT ou plataformas similares.
</aside>
1 - Tabelas


agentes_ia

 Armazena os dados de Agentes IA customizados por empresa


auditoria

 Guarda os Logs de a√ß√µes administrativas


conversas

 Controla o Hist√≥rico de conversas de chat


empresas

 Armazena os dados das Empresas (tenants) da plataforma


perfis

 Armazena os dados de Perfis de usu√°rios


planos

 Armazena os Planos de assinatura que a plataforma oferece


uso_recursos

 Controle de limites de uso por empresa e m√™s


2 - Relacionamentos

 Relacionamentos do Tenant (Empresas)


Empresa ‚Üí Perfis: O relacionamento √© Um para Muitos (1:N). Uma √∫nica empresa pode ter M√∫ltiplos Colaboradores (perfis) associados atrav√©s do campo perfis.empresa_id.
Empresa ‚Üí Agentes IA: O relacionamento √© Um para Muitos (1:N). Uma empresa pode criar e possuir M√∫ltiplos Agentes IA customizados.
Empresa ‚Üí Conversas: O relacionamento √© Um para Muitos (1:N). Uma empresa gera M√∫ltiplas Conversas de chat, todas rastreadas pelo campo conversas.empresa_id.
Empresa ‚Üí Uso de Recursos: O relacionamento √© Um para Muitos (1:N). Uma empresa possui M√∫ltiplos Registros de Uso de Recursos (rastreamento mensal de tokens e mensagens).
Empresa ‚Üí Auditoria: O relacionamento √© Um para Muitos (1:N). Uma empresa gera M√∫ltiplos Logs de Auditoria de suas a√ß√µes administrativas.
Empresa ‚Üí Planos: O relacionamento √© Muitos para Um (N:1). M√∫ltiplas empresas podem contratar o Mesmo Plano; a chave estrangeira (plano_id) reside na tabela empresas.
Relacionamentos do Usu√°rio (Perfis)


Perfil ‚Üí Conversas: O relacionamento √© Um para Muitos (1:N). Um Perfil (Colaborador) pode gerar M√∫ltiplas Conversas.
Perfil ‚Üí Agentes IA: O relacionamento √© Um para Muitos (1:N). Um Perfil √© registrado como o criador (created_by) de M√∫ltiplos Agentes IA.
Perfil ‚Üí Auditoria: O relacionamento √© Um para Muitos (1:N). Um Perfil √© o autor (user_id) de M√∫ltiplos Logs de Auditoria.
Auth.users ‚Üí Perfis: O relacionamento √© Um para Um (1:1). O usu√°rio do Supabase Auth (auth.users) tem Exatamente Um Perfil estendido na tabela perfis, onde a perfis.id √© uma chave prim√°ria e estrangeira.
Relacionamentos de Funcionalidade e Rastreamento


Agente IA ‚Üí Conversas: O relacionamento √© Um para Muitos (1:N). Um Agente IA pode ser usado em M√∫ltiplas Conversas.
Planos ‚Üí Empresas: O relacionamento √© Um para Muitos (1:N). Um Plano pode ser contratado por M√∫ltiplas Empresas.
3 - Diagrama

 https://claude.ai/public/artifacts/c3821a45-4e37-4ce3-8a00-361598463b5b


4 - Schema de Da

 Tabela: planos


id: int8 (PK)
nome: String ('Free', 'B√°sico', 'Empresa', 'Master')
preco_mensal: Decimal(10,2)
max_usuarios: Integer
max_agentes: Integer
limite_mensagens_mes: Integer
stripe_price_id: String (UNIQUE)
Demais campos: features, is_active, cor, created_at, updated_at.
Tabela: empresas (Tenants)


id: int8 (PK)
nome: String (NOT NULL)
plano_id: int8 (FK ‚Üí planos)
chave_api_llm: String (ENCRYPTED)
contexto_ia: JSONB
stripe_customer_id: String (UNIQUE)
Demais campos: email, telefone, endereco, status, data_adesao, proxima_cobranca, is_active, created_at, updated_at.
Tabela: perfis (Colaboradores/Usu√°rios)


id: int8 (PK, FK ‚Üí auth.users)
empresa_id: int8 (FK ‚Üí empresas - ESSENCIAL para RLS)
role: Enum (master, admin, user)
Demais campos: email, nome_completo, telefone, cargo, status, ultimo_acesso, avatar_url, created_at, updated_at.
Tabela: agentes_ia


id: int8 (PK)
empresa_id: int8 (FK ‚Üí empresas - RLS)
nome: String (NOT NULL)
instrucoes: Text (System prompt)
icone_url: String
Demais campos: descricao, is_active, is_popular, cor, created_by, created_at, updated_at.
Tabela: conversas (Hist√≥rico de Chats)


id: int8 (PK)
conversation_uuid: UUID (UNIQUE - Rastreamento)
empresa_id: int8 (FK ‚Üí empresas - RLS)
user_id: int8 (FK ‚Üí perfis)
agente_id: int8 (FK ‚Üí agentes_ia)
mensagens: JSONB
Demais campos: titulo, tokens_usados, status, contexto_atual, created_at, updated_at.
Tabela: uso_recursos (Controle de Limites)


id: int8 (PK)
empresa_id: int8 (FK ‚Üí empresas - RLS)
mes_referencia: DATE (YYYY-MM-01)
mensagens_enviadas: Integer DEFAULT 0
tokens_consumidos: Integer DEFAULT 0
Demais campos: agentes_ativos, usuarios_ativos, created_at, updated_at.
Tabela: auditoria (Logs de A√ß√µes Administrativas)


id: int8 (PK)
user_id: int8 (Quem executou a a√ß√£o)
acao: String
entidade_tipo: String
entidade_id: int8
Demais campos:

 empresa_id, detalhes, ip_address, user_agent, created_at.


</aside>
<aside> <img src="/icons/document_gray.svg" alt="/icons/document_gray.svg" width="40px" />
Integra√ß√µes API - Comunica√ß√£o com outros sistemas
Coloque aqui pontos importantes da documenta√ß√£o API dos projetos
https://stripe.com/br
https://app.brevo.com/
https://supabase.com/
https://chatgpt.com/
</aside>
<aside> <img src="/icons/cursor-click_gray.svg" alt="/icons/cursor-click_gray.svg" width="40px" />
Wireframe e Fluxo de Telas
Caso o seu projeto possua uma Interface, √© importante desenhar quais telas e o que ter√° em cada tela. Voc√™ pode come√ßar no papel e depois ir para alguma plataforma.
<aside> <img src="/icons/report_orange.svg" alt="/icons/report_orange.svg" width="40px" />
Ferramentas para ajudar nessa etapa: Utilize o UX Pilot, UI Wizard ou plataformas similares.
</aside>
Tela Dashboard Master:
Objetivo: Auditoria do Neg√≥cio SaaS.
Elementos: Cards com: MRR (Receita Mensal Recorrente), Empresas Ativas, Total de Tokens Consumidos (geral). Gr√°ficos de barra: Conversas/Dia (por empresa).
Tela Admin Dashboard (Tenant):
Objetivo: Gest√£o interna da Chave BYOK e Contexto.
Elementos: Formul√°rio para inser√ß√£o da Chave API. Editor de texto para System Prompt. Tabela CRUD para perfis de colaboradores. </aside>
üìÅ Documento PRD (Product Requirements Document)

https://docs.google.com/document/d/1WS7SgkVadQzjzq3Zjmyhr8f2hXm98RPB33wOTShHyl4/edit?usp=sharing
Documento de Requisitos do Produto (PRD) ‚Äì Vers√£o Final
Nome do Projeto: ControlAI
1. Vis√£o Geral (Overview)
O projeto √© a constru√ß√£o de uma Plataforma de Intelig√™ncia Artificial Privada (SaaS Multi-tenant), denominada ControlAI, para ser o MVP (Produto M√≠nimo Vi√°vel) do curso "Do 0 ao App".
Esta plataforma permitir√° que empresas (Tenants) se inscrevam, gerenciem seus colaboradores e utilizem modelos de LLM (como OpenAI/Claude) sob um contexto seguro e privado.
Pilares do Produto:
Seguran√ßa Multi-tenant (RLS): Garantia de segrega√ß√£o estrita de dados entre empresas.
Modelo de Assinatura H√≠brido (BYOK - Bring Your Own Key): A plataforma cobra uma taxa de servi√ßo (Plataforma + Seguran√ßa), enquanto a empresa cliente fornece e gerencia seus pr√≥prios custos de token de LLM.
Gest√£o Completa: Incluindo pain√©is de controle separados para o Admin Master da Plataforma (o Dono) e para os Administradores de cada Empresa (Admin Tenant).
2. Metas
Implementar Multi-tenancy Segura: Garantir a segrega√ß√£o estrita de dados entre tenants usando Row-Level Security (RLS) do Supabase.
Monetiza√ß√£o BYOK: Implementar o Stripe para a Taxa de Plataforma SaaS, exigindo que o cliente insira sua pr√≥pria Chave API de LLM para liberar o recurso.
Gest√£o de Plataforma Master: Criar um Dashboard dedicado para o Admin Master (Dono) para auditoria e monitoramento do neg√≥cio SaaS.
Foco na Convers√£o: Criar uma Landing Page e uma P√°gina de Vendas/Pricing robustas para otimizar a aquisi√ß√£o de clientes.
Seguran√ßa de Dados: Garantir criptografia de dados sens√≠veis (chaves API) e conformidade com boas pr√°ticas de seguran√ßa.
Comunica√ß√£o Automatizada: Implementar e-mails transacionais para eventos importantes (boas-vindas, alertas, etc).
3. Stack Tecnol√≥gica e Integra√ß√µes
Framework: React & Vite (Base do Prot√≥tipo Lovable).
Roteamento: React Router DOM (Roteamento Client-Side).
Desenvolvimento: Cursor e VSCode.
Banco de Dados: Supabase (PostgreSQL, Auth, RLS, Storage).
Pagamentos: Stripe (Assinaturas SaaS, Webhooks).
E-mails: Brevo (E-mails Transacionais).
IA/LLM: OpenAI/Claude (Via Chave BYOK) e AI SDK.
Hosting/CI/CD: Netlify(Configurado para Build Vite).
UI/Design: Shadcn UI.
4. P√°ginas e Funcionalidades Essenciais
Landing Page / P√°gina de Vendas: Apresenta√ß√£o do SaaS e Pricing. CTA de convers√£o (link para Stripe Checkout).
Auth (Login/Cadastro): Permite cadastro de novas empresas (cria√ß√£o de Tenant) e login seguro.
Dashboard do Colaborador: P√°gina de usu√°rio. Acesso liberado por Assinatura Ativa + Chave BYOK V√°lida.
P√°gina de Chat (Protegida/LLM): Interface principal de intera√ß√£o com a LLM. Injeta o contexto_ia configurado pela empresa.
Admin Dashboard (Tenant/Empresa): Acesso restrito ao role: admin. Fun√ß√µes: 1) Inserir Chave API (BYOK), 2) Configurar Contexto da IA (System Prompt), 3) Gerenciar Colaboradores (CRUD).
Dashboard Master (Plataforma): Acesso restrito ao role: master. Fun√ß√µes: Monitoramento de Assinaturas (Stripe), Vis√£o Geral de Todas as Empresas (Tenants), Auditoria de Logs e Uso.
M√≥dulo de Faturamento: Link para o Portal do Cliente do Stripe para gerenciamento de planos e dados de pagamento.
Gerenciamento de Agentes IA (Admin Tenant): CRUD completo de Agentes IA customizados. Configura√ß√£o de system prompts espec√≠ficos.
Sele√ß√£o de Agentes (Colaborador): Interface para escolha do agente antes de iniciar conversa.
Controle de Limites de Uso: Sistema de tracking autom√°tico de uso (mensagens, tokens, agentes) por tenant. Valida√ß√£o contra limites do plano.
Sistema de Auditoria: Log detalhado de todas as a√ß√µes administrativas (master e admin).

5. Modelo de Dados (Data Model)
Conven√ß√µes: Todas as chaves prim√°rias (id) s√£o do tipo int8 (Bigint - Autonumera√ß√£o). Timestamps: TIMESTAMPTZ.
Tabela: planos
id: int8 (PK)
nome: String ('Free', 'B√°sico', 'Empresa', 'Master')
preco_mensal: Decimal(10,2)
max_usuarios: Integer
max_agentes: Integer
limite_mensagens_mes: Integer
stripe_price_id: String (UNIQUE)
Demais campos: features, is_active, cor, created_at, updated_at.
Tabela: empresas (Tenants)
id: int8 (PK)
nome: String (NOT NULL)
plano_id: int8 (FK ‚Üí planos)
chave_api_llm: String (ENCRYPTED)
contexto_ia: JSONB
stripe_customer_id: String (UNIQUE)
Demais campos: email, telefone, endereco, status, data_adesao, proxima_cobranca, is_active, created_at, updated_at.
Tabela: perfis (Colaboradores/Usu√°rios)
id: int8 (PK, FK ‚Üí auth.users)
empresa_id: int8 (FK ‚Üí empresas - ESSENCIAL para RLS)
role: Enum (master, admin, user)
Demais campos: email, nome_completo, telefone, cargo, status, ultimo_acesso, avatar_url, created_at, updated_at.
Tabela: agentes_ia
id: int8 (PK)
empresa_id: int8 (FK ‚Üí empresas - RLS)
nome: String (NOT NULL)
instrucoes: Text (System prompt)
icone_url: String
Demais campos: descricao, is_active, is_popular, cor, created_by, created_at, updated_at.
Tabela: conversas (Hist√≥rico de Chats)
id: int8 (PK)
conversation_uuid: UUID (UNIQUE - Rastreamento)
empresa_id: int8 (FK ‚Üí empresas - RLS)
user_id: int8 (FK ‚Üí perfis)
agente_id: int8 (FK ‚Üí agentes_ia)
mensagens: JSONB
Demais campos: titulo, tokens_usados, status, contexto_atual, created_at, updated_at.
Tabela: uso_recursos (Controle de Limites)
id: int8 (PK)
empresa_id: int8 (FK ‚Üí empresas - RLS)
mes_referencia: DATE (YYYY-MM-01)
mensagens_enviadas: Integer DEFAULT 0
tokens_consumidos: Integer DEFAULT 0
Demais campos: agentes_ativos, usuarios_ativos, created_at, updated_at.
Tabela: auditoria (Logs de A√ß√µes Administrativas)
id: int8 (PK)
user_id: int8 (Quem executou a a√ß√£o)
acao: String
entidade_tipo: String
entidade_id: int8
Demais campos: empresa_id, detalhes, ip_address, user_agent, created_at.
6. Seguran√ßa e Compliance
Requisitos de Seguran√ßa
Criptografia de Dados Sens√≠veis: Chaves API devem ser criptografadas (pgcrypto/Supabase Vault).
Row-Level Security (RLS): Sempre habilitado em todas as tabelas com empresa_id.
Auditoria e Logs: Todas as a√ß√µes administrativas devem ser logadas.
Rate Limiting: Implementar limita√ß√£o de taxa (100 requests/minuto por empresa).
Valida√ß√£o de Entrada: Sanitiza√ß√£o e valida√ß√£o de todos os inputs.
Compliance
LGPD (Lei Geral de Prote√ß√£o de Dados).
PCI DSS (via Stripe).
SOC 2 Type II (via Supabase e Netlify).
üìçOutras Observa√ß√µes importantes

Anote aqui outros pontos importantes do projeto

4 - Cria√ß√£o Interativa
üëâ Porque essa etapa √© importante?

Este √© o momento de transformar o planejamento em realidade: aqui colocamos a m√£o na massa e come√ßamos a construir a solu√ß√£o. Com base em toda a arquitetura definida, desenvolva as telas, fluxos, integra√ß√µes, banco de dados e automa√ß√µes, usando ferramentas NoCode e apoio da IA para acelerar e refinar o processo. √â onde o projeto ganha vida.
üí° Obs: Ser√£o usados dados de um Case de exemplo para facilitar o preenchimento, pode alterar o documento como preferir.
‚òëÔ∏è Checklist

<aside> <img src="/icons/checklist_gray.svg" alt="/icons/checklist_gray.svg" width="40px" />
Checklist de Cria√ß√£o + Testes
1. Funda√ß√µes e Prot√≥tipo (M√≥dulos 1, 2, 3)
[ ] Clonar e instalar o Prot√≥tipo Lovable (Vite/React) como nossa base inicial.
[ ] Configurar GitHub e Netlify para o Deploy inicial.
[ ] Refinar o Design System (Cores, Fontes, Glow Effects) no globals.css para preservar o pixel-perfect do Lovable.
[ ] Refatorar a estrutura do c√≥digo gerado pelo Lovable para um padr√£o limpo de Componentes React (Client-Side Pura).
2. Back-end e Seguran√ßa (M√≥dulos 4, 5)
[ ] Conex√£o inicial do Supabase e Setup do MCP.
[ ] Criar tabelas e relacionamentos (planos, empresas, perfis, etc.).
[ ] Criar p√°ginas de Login/Cadastro (/auth).
[ ] Configurar RLS em todas as tabelas com empresa_id (Pilar de seguran√ßa Multi-tenant).
[ ] Fluxo de Commits e Feature Branches.
3. Fun√ß√µes Core e Agentes (M√≥dulos 6, 7, 8, 9, 10)
[ ] Criar layouts de Dashboard (Colaborador, Admin, Master).
[ ] Desenvolver a interface de Inser√ß√£o da Chave API (BYOK) e Configura√ß√£o do Contexto de IA.
[ ] Criar o CRUD completo para Gerenciamento de Agentes IA customizados.
[ ] Implementar a interface de Chat e a conex√£o com AI SDK.
[ ] Implementar a l√≥gica de Gating (libera√ß√£o do Chat) para verificar Assinatura Ativa + Chave BYOK.
[ ] Desenvolver a P√°gina de Vendas/Pricing e as rotas p√∫blicas (M√≥dulo 7).
[ ] Setup do Brevo e integra√ß√£o do e-mail de Boas-Vindas no cadastro.
4. Monetiza√ß√£o e Controle Master (M√≥dulos 11, 12)
[ ] Criar Cat√°logo de Produtos e planos de assinatura no Stripe.
[ ] Criar e implantar Edge Function no Supabase para receber Webhooks do Stripe.
[ ] Criar o Painel Gerencial Master (role: master) com m√©tricas de neg√≥cio (MRR, Clientes).
[ ] Implementar as tabelas de Auditoria e Uso de Recursos (uso_recursos).
[ ] Integrar sess√µes do Customer Portal para gerenciamento de faturamento.
</aside>
<aside> <img src="/icons/lock-keyhole_gray.svg" alt="/icons/lock-keyhole_gray.svg" width="40px" />
Seguran√ßa
[ ] Configurar regras de RLS em todas as tabelas sens√≠veis (conversas, agentes_ia, uso_recursos).
[ ] Garantir que a chave_api_llm seja criptografada e nunca acessada pelo Frontend.
[ ] Restringir acesso aos Dashboards por Roles (master, admin).
[ ] N√£o deixar nenhuma credencial sens√≠vel exposta em Edge Functions (usar Supabase Secrets). </aside>

5 - Lan√ßamento e PDCA
üëâ Porque essa etapa √© importante?

A etapa de Lan√ßamento e PDCA √© essencial porque √© quando o projeto finalmente entra em uso real e come√ßa a gerar aprendizado pr√°tico. Ao lan√ßar o MVP, voc√™ coloca sua solu√ß√£o em contato com os primeiros usu√°rios reais, o que permite validar hip√≥teses, descobrir pontos de fric√ß√£o e identificar oportunidades de melhoria.
Sem esse ciclo de feedback, √© imposs√≠vel evoluir de forma estrat√©gica. O uso do m√©todo PDCA (Planejar, Executar, Checar, Agir) garante que cada melhoria seja baseada em dados concretos e que o produto avance de forma cont√≠nua, segura e inteligente.
‚òëÔ∏è Checklist

<aside> <img src="/icons/checklist_gray.svg" alt="/icons/checklist_gray.svg" width="40px" />
1. P de Planejar (Checklist Pr√©-Lan√ßamento)
[ ] Seguran√ßa: Checklist de Seguran√ßa Pr√©-Deployment (Valida√ß√£o de zod, sanitiza√ß√£o, RLS).
[ ] Performance: Implementa√ß√£o e Teste de Limita√ß√£o de Taxa (Rate-Limiting) com Upstash para proteger API e custos.
[ ] Infraestrutura Prod: Configura√ß√£o do Servidor Supabase de Produ√ß√£o e migra√ß√£o do Schema (Clonagem Dev ‚Üí Prod).
[ ] Monetiza√ß√£o Prod: Configura√ß√£o do Stripe para Produ√ß√£o (Live Keys e migra√ß√£o de produtos/planos).
2. D de Executar (O Deployment Final)
[ ] Deployment: Entender os Deployments do Vercel e o fluxo de Pull Request (Preview ‚Üí Production).
[ ] Lan√ßamento: Configura√ß√£o de um Dom√≠nio Personalizado (M√≥dulo 14.3). Push Final: Enviando para Produ√ß√£o (Atribui√ß√£o de vari√°veis de ambiente de Produ√ß√£o no Vercel e deploy final).
3. C de Checar (M√©tricas e Auditoria)
[ ] Neg√≥cios/Monetiza√ß√£o: Monitorar MRR, Churn Rate, Clientes Ativos. (Dados puxados do Stripe para o Dashboard Master).
[ ] Uso de Recursos: Monitorar Tokens Consumidos e Mensagens por Usu√°rio/M√™s (Tabela uso_recursos e Dashboard Master).
[ ] Seguran√ßa/Sa√∫de: Auditar Logs de Auditoria de A√ß√µes Master/Admin e Logs de Edge Functions (Supabase).
[ ] Engajamento: Medir Taxa de Convers√£o (Trial ‚Üí Pago) no Dashboard Master.
4. A de Agir (Itera√ß√£o e Melhoria Cont√≠nua)
[ ] Identifica√ß√£o de Fric√ß√£o (Agir): Se o Churn Rate for alto, a a√ß√£o pode ser investigar os logs do Chat IA (conversas) ou o gating do Stripe para identificar o ponto de falha.
[ ] Planejamento de Melhoria (Planejar): Usar a Estrat√©gia de Prompt Baseada em Pap√©is para for√ßar a IA a planejar o c√≥digo de um novo recurso.
[ ] Execu√ß√£o da Melhoria (Executar): O ciclo de Vibe Coding √© reativado para construir a nova feature. </aside>

