# Framework Lovable-Celite - Do Zero ao Sistema MLM/MMN

**VersÃ£o**: 1.0  
**Data**: Novembro 2025  
**Projeto**: Sistema de ComissÃµes Multi-Level Marketing para Contadores  
**Stack**: React + Vite + Supabase + Stripe + Shadcn/UI  
**Gateway Principal**: Stripe (Fallback: ASAAS)

---

## ğŸ¯ SumÃ¡rio Executivo

Este framework documenta a construÃ§Ã£o completa do **Lovable-Celite**, uma plataforma SaaS que vai **MUITO ALÃ‰M de gestÃ£o de comissÃµes MLM/MMN**. Ã‰ um **ecossistema completo de transformaÃ§Ã£o** para o **Programa Contadores de Elite** da **Top Class EscritÃ³rio Virtual** (Aracaju/SE).

### **O PROBLEMA REAL (NÃ£o Ã© tÃ©cnico, Ã© EMOCIONAL)**

**Contadores em Sergipe e Aracaju vivem um INFERNO SILENCIOSO:**

#### **Tipo 1 (Maioria): Sufocados e Desvalorizados**
- ğŸ˜° Trabalham **12h/dia** fazendo trabalho de auxiliar
- ğŸ’” **Filhos sem orgulho do pai**: "Meu pai Ã© contador" (voz sem empolgaÃ§Ã£o)
- ğŸ˜¢ FamÃ­lia os vÃª com **PENA**, nÃ£o admiraÃ§Ã£o
- ğŸ’¸ Perdem clientes para "alguÃ©m 30% mais barato"
- ğŸ˜” **Vergonha** de mostrar realidade nas redes sociais
- ğŸš« **MEDO paralisa**: Tem R$15 mil guardados mas nÃ£o investe

#### **Tipo 2 (Menor, mas crÃ­tico): Renda OK, mas Sem Autoridade**
- ğŸ’¼ Querem ser consultores, mas sÃ£o vistos como "despachantes"
- ğŸ¢ NÃ£o tÃªm escritÃ³rio premium para impressionar
- ğŸ“‰ NÃ£o tÃªm infraestrutura compatÃ­vel com sua competÃªncia
- ğŸ¯ Potencial desperdiÃ§ado: "Tenho tanto a oferecer..."

**Ambos compartilham as mesmas 7 DORES:**
1. **MEDO** (fracassar, ficar obsoleto, ser tarde demais)
2. **DESVALORIZAÃ‡ÃƒO** ("Ã‰ sÃ³ contabilidade mesmo")
3. **PRESSÃƒO SOCIAL** (sogro: "Ainda nÃ£o conseguiu crescer?")
4. **VERGONHA** (nÃ£o ser motivo de orgulho dos filhos)
5. **SOLIDÃƒO** (nÃ£o pode falar com ninguÃ©m)
6. **POTENCIAL DESPERDIÃ‡ADO** (18 anos de experiÃªncia subutilizada)
7. **ESTAGNAÃ‡ÃƒO** ("Parado no tempo", mesmo faturamento hÃ¡ 5 anos)

---

### **A SOLUÃ‡ÃƒO (Ecossistema de TransformaÃ§Ã£o)**

O **Programa Contadores de Elite** NÃƒO Ã© apenas um "sistema de comissÃµes". Ã‰ um **ECOSSISTEMA COMPLETO** que resolve TODAS as 7 dores:

#### **1. INFRAESTRUTURA DE AUTORIDADE** ğŸ¢
**Problema que resolve**: DesvalorizaÃ§Ã£o, vergonha, falta de credibilidade

- âœ… **EndereÃ§o premium** em Aracaju (STATUS instantÃ¢neo)
- âœ… **Salas de reuniÃ£o** para impressionar clientes
- âœ… **Atendimento profissional** (nÃ£o mais "contador de fundo de quintal")
- âœ… **EscritÃ³rio Virtual Top Class** = CartÃ£o de visitas que impressiona

**TÃ©cnica**: 3 planos (Pro R$100, Premium R$130, Top R$180) + Sistema de indicaÃ§Ãµes rastreÃ¡veis

---

#### **2. RENDA RECORRENTE VITALÃCIA** ğŸ’°
**Problema que resolve**: Medo financeiro, estagnaÃ§Ã£o, trabalhar 12h/dia

- âœ… Indique clientes â†’ Ganhe **15-20% PARA SEMPRE**
- âœ… Construa rede â†’ Ganhe **override 3-5%** de CADA cliente da sua rede
- âœ… **7 tipos de comissÃ£o** automÃ¡ticos (ativaÃ§Ã£o, recorrente, override, bÃ´nus progressÃ£o, volume, LTV, contador)
- âœ… **Trabalhe MENOS, ganhe MAIS** (nÃ£o mais 12h/dia operacional)

**TÃ©cnica**: Stripe + Supabase Edge Functions + CRON jobs automatizados + Sistema TIER de performance

---

#### **3. COMUNIDADE DE EMPRESÃRIOS DE SUCESSO** ğŸ¤
**Problema que resolve**: SolidÃ£o, falta de networking, sem mentoria

- âœ… Networking com **contadores de elite** (nÃ£o mais solidÃ£o)
- âœ… Treinamentos, mentorias, eventos presenciais
- âœ… Suporte emocional e tÃ©cnico
- âœ… GamificaÃ§Ã£o: XP, conquistas, ranking (motivaÃ§Ã£o constante)
- âœ… **Alertas proativos**: Ano 1 (ligaÃ§Ã£o, consultoria), Ano 2+ (check-ins)

**TÃ©cnica**: Firebase Push Notifications + Sistema de alertas configurÃ¡veis + Eventos com QR code check-in + Simulador de crescimento

---

#### **4. TRANSFORMAÃ‡ÃƒO DE IDENTIDADE** âœ¨
**Problema que resolve**: Vergonha, falta de reconhecimento, potencial desperdiÃ§ado

**Jornada Emocional:**
```
ANTES: "Coitadinho" â†’ DECISÃƒO: EsperanÃ§a â†’ BRONZE: Primeira vitÃ³ria
â†’ PRATA: Reconhecimento â†’ OURO: TransformaÃ§Ã£o â†’ DIAMANTE: Autoridade
â†’ LEGADO: Orgulho dos filhos
```

- âœ… De "fazedor de guias" â†’ **CONSULTOR ESTRATÃ‰GICO**
- âœ… De "coitadinho da famÃ­lia" â†’ **MOTIVO DE ORGULHO**
- âœ… De "estagnado" â†’ **REFERÃŠNCIA REGIONAL**
- âœ… **Lead Diamante**: Top Class trabalha PARA VOCÃŠ (reconhecimento supremo)

**TÃ©cnica**: Sistema de nÃ­veis (Bronze/Prata/Ouro/Diamante) + BÃ´nus progressivos + Lead qualificado mensal + Porto Seguro Elite

---

### **RESULTADO FINAL (A Verdadeira Promessa)**

#### **TransformaÃ§Ã£o TÃ©cnica:**
- âœ… Sistema 100% automatizado (webhook â†’ comissÃ£o em < 2s)
- âœ… 7 tipos de comissÃ£o calculados automaticamente
- âœ… Pagamentos via PIX dia 25 (CRON)
- âœ… Dashboard em tempo real
- âœ… Rede MLM 5 nÃ­veis
- âœ… GamificaÃ§Ã£o completa

#### **TransformaÃ§Ã£o Emocional:**
- ğŸ’ **Filhos terÃ£o orgulho do pai**
- ğŸ† **FamÃ­lia vibrarÃ¡ com suas conquistas**
- âœ¨ **SerÃ¡ respeitado como especialista**
- ğŸ¯ **DeixarÃ¡ um legado positivo**
- ğŸ’ª **Autoestima restaurada**
- ğŸš€ **Liberdade financeira e temporal**

---

### **Diferencial Competitivo (Por que vencemos)**

#### **1. Nicho Ultra-EspecÃ­fico**
- ğŸ¯ Contadores brasileiros (Sergipe/Aracaju como piloto)
- ğŸ¯ NÃ£o compete com MLMs genÃ©ricos (Herbalife, Amway)
- ğŸ¯ Entende PROFUNDAMENTE as dores emocionais do cliente

#### **2. AutomaÃ§Ã£o 100% Zero-Touch**
- âš¡ Webhook Stripe â†’ ComissÃ£o calculada em < 2s
- âš¡ 7 tipos de comissÃ£o simultÃ¢neos
- âš¡ Pagamentos automÃ¡ticos via PIX
- âš¡ NÃ­vel do contador atualizado automaticamente

#### **3. Custo Disruptivo**
- ğŸ’° **Lovable-Celite**: $45-70/mÃªs (plataforma)
- ğŸ’° **Top Class**: R$100-180/mÃªs (escritÃ³rio virtual)
- ğŸ’° **Total**: ~R$450/mÃªs para TUDO
- ğŸ’° **Concorrentes enterprise**: R$2.000-15.000/mÃªs

#### **4. Compliance Brasileiro**
- ğŸ‡§ğŸ‡· PIX integrado
- ğŸ‡§ğŸ‡· ASAAS (fallback gateway brasileiro)
- ğŸ‡§ğŸ‡· RLS (LGPD compliant)
- ğŸ‡§ğŸ‡· Preparado para NFe

#### **5. Ecossistema Completo**
- ğŸŒŸ Infraestrutura fÃ­sica (escritÃ³rio) + digital (app)
- ğŸŒŸ Renda passiva + ativa
- ğŸŒŸ TÃ©cnico + emocional
- ğŸŒŸ Individual + comunidade

---

### **Arquitetura TÃ©cnica (Como Entregamos a TransformaÃ§Ã£o)**

#### **Frontend (ExperiÃªncia do UsuÃ¡rio)**
- **Stack**: Vite/React 18, Shadcn/UI, TailwindCSS, Framer Motion
- **Estado**: React Query (TanStack v5) + Context API
- **Design**: Mobile-first, dark mode, animaÃ§Ãµes suaves
- **Objetivo**: Interface que transmite PROFISSIONALISMO e STATUS

#### **Backend (Motor da TransformaÃ§Ã£o)**
- **Stack**: Supabase (PostgreSQL + Edge Functions + Auth + RLS)
- **SeguranÃ§a**: Row Level Security em todas as tabelas
- **Performance**: < 500ms de resposta (p95)
- **Objetivo**: Confiabilidade 99,9% para nÃ£o quebrar a confianÃ§a

#### **Pagamentos (Liberdade Financeira)**
- **Principal**: Stripe (checkout + webhooks + payouts)
- **Fallback**: ASAAS (mercado brasileiro)
- **AutomaÃ§Ã£o**: CRON dia 25 processa pagamentos
- **Objetivo**: Dinheiro na conta SEM ESFORÃ‡O (prova de transformaÃ§Ã£o)

#### **GamificaÃ§Ã£o (MotivaÃ§Ã£o Constante)**
- **Sistema XP**: +10 cliente, +20 contador, +50 bÃ´nus
- **Conquistas**: 7 badges (Primeira Venda â†’ RetenÃ§Ã£o Perfeita)
- **Ranking**: Top 10 mensal
- **Objetivo**: Manter ENGAJAMENTO e celebrar VITÃ“RIAS

#### **Alertas Proativos (Nunca Mais SolidÃ£o)**
- **Firebase**: Push notifications
- **CRON**: Alertas automÃ¡ticos (mÃªs 4, 6, 9 do Ano 1)
- **Suporte**: LigaÃ§Ãµes, consultorias, check-ins
- **Objetivo**: Contador NUNCA estÃ¡ sozinho na jornada

#### **Deploy (Estabilidade = ConfianÃ§a)**
- **Frontend**: Netlify (CDN global)
- **Backend**: Supabase Cloud (99,9% uptime)
- **Monitoramento**: Sentry + Supabase Logs
- **Objetivo**: ZERO preocupaÃ§Ã£o com infraestrutura

---

### **MÃ©tricas de Sucesso**

#### **TÃ©cnicas (MÃªs 6):**
- MRR: R$ 50K | Contadores Ativos: 80 | Clientes Ativos: 400
- Churn: < 2% | Webhook Success Rate: 99% | NPS: 60+
- Tempo resposta: < 500ms | Uptime: 99,9% | ComissÃµes calculadas: < 2s

#### **Emocionais (MÃªs 6):**
- 80% dos contadores relatam **"famÃ­lia tem orgulho"**
- 70% se posicionam como **"consultor estratÃ©gico"**
- 60% reduziram jornada para **6-8h/dia**
- 50% aumentaram preÃ§os **sem perder clientes**
- 40% sÃ£o **referÃªncia** em sua cidade
- 10% atingiram **Diamante** (reconhecimento supremo)

---

### **Por Que Este Framework Ã© Diferente**

**Outros frameworks**: 95% tÃ©cnico, 5% emocional
**Este framework**: 50% tÃ©cnico + 50% emocional = 100% transformaÃ§Ã£o

**Entendemos que:**
- âœ… Contadores nÃ£o compram "sistema de comissÃµes"
- âœ… Contadores compram **TRANSFORMAÃ‡ÃƒO DE IDENTIDADE**
- âœ… Tecnologia Ã© o MEIO, nÃ£o o fim
- âœ… O fim Ã©: **"Meus filhos tÃªm orgulho do pai"**

**Por isso cada decisÃ£o tÃ©cnica serve a um objetivo emocional:**
- Webhook rÃ¡pido â†’ Prova que funciona â†’ Reduz medo
- Dashboard bonito â†’ Profissionalismo â†’ Aumenta autoestima
- GamificaÃ§Ã£o â†’ CelebraÃ§Ã£o de vitÃ³rias â†’ Combate solidÃ£o
- Alertas proativos â†’ Nunca estÃ¡ sozinho â†’ Elimina isolamento
- Lead Diamante â†’ Reconhecimento supremo â†’ Status mÃ¡ximo

---

**Este Ã© o Framework Lovable-Celite: Onde Tecnologia encontra TransformaÃ§Ã£o Humana.** ğŸš€ğŸ’

---

## ğŸ“‘ Ãndice

0. [Psicografia do Cliente-Alvo](#0---psicografia-do-cliente-alvo) â­ **NOVO**
   - Perfil DemogrÃ¡fico Sergipe
   - As 7 Dores Emocionais
   - Os 10 Anseios e Sonhos
   - HistÃ³ria Real: O DiÃ¡rio de Carlos
   - Gatilhos de Marketing

1. [VisÃ£o EstratÃ©gica](#1---visÃ£o-estratÃ©gica)
   - Problema Identificado
   - SoluÃ§Ã£o Proposta
   - Funcionalidades Principais
   - Personas e Tipos de UsuÃ¡rios
   - Ferramentas e Custos

2. [Insights do Mercado](#2---insights-do-mercado)
   - Benchmark de Sistemas MLM
   - Plataformas de ComissÃµes
   - AnÃ¡lise Competitiva
   - Diferenciais do Lovable-Celite
   - ReferÃªncias de Design

3. [Arquitetura TÃ©cnica](#3---arquitetura-tÃ©cnica)
   - Mapeamento de Processos (6 processos crÃ­ticos)
   - Modelagem de Dados (17 tabelas)
   - IntegraÃ§Ãµes API (Stripe, Supabase, Brevo)
   - Wireframes e Fluxo de Telas

4. [CriaÃ§Ã£o Interativa](#4---criaÃ§Ã£o-interativa)
   - 11 MÃ³dulos de ImplementaÃ§Ã£o
   - Checklist completo (114h de desenvolvimento)
   - Workflow de Desenvolvimento
   - Estimativa de Tempo e PriorizaÃ§Ã£o

5. [LanÃ§amento e PDCA](#5---lanÃ§amento-e-pdca)
   - Checklist PrÃ©-LanÃ§amento
   - MÃ©tricas de NegÃ³cio (MRR, Churn, LTV, CAC)
   - Ciclo PDCA com Exemplos PrÃ¡ticos
   - Ferramentas de Monitoramento
   - Roadmap de EvoluÃ§Ã£o (6 meses)

---

## ğŸš€ Como Usar Este Framework

### **Para Desenvolvedores**
1. Leia as seÃ§Ãµes 1-3 para entender o contexto completo
2. Use a SeÃ§Ã£o 4 como checklist de implementaÃ§Ã£o
3. Consulte wireframes e diagramas durante o desenvolvimento
4. Valide contra mÃ©tricas da SeÃ§Ã£o 5

### **Para Product Managers**
1. Foque na SeÃ§Ã£o 1 (estratÃ©gia) e SeÃ§Ã£o 2 (mercado)
2. Use SeÃ§Ã£o 5 para definir KPIs e ciclos PDCA
3. Consulte roadmap para planejamento de releases

### **Para Fundadores/CEOs**
1. Leia SumÃ¡rio Executivo + SeÃ§Ã£o 1
2. Valide mÃ©tricas de negÃ³cio da SeÃ§Ã£o 5
3. Use como base para pitch de investidores

---

# 0 - Psicografia do Cliente-Alvo

## ğŸ‘‰ Por que comeÃ§amos com ISSO?

**Porque tecnologia sem compreensÃ£o humana Ã© cÃ³digo morto.**

Antes de falar sobre React, Supabase ou Stripe, precisamos entender **PROFUNDAMENTE** quem Ã© nosso cliente, suas dores emocionais, seus sonhos e o que realmente move suas decisÃµes.

Este framework Ã© diferente porque **50% Ã© tÃ©cnico + 50% Ã© emocional = 100% transformaÃ§Ã£o**.

---

## ğŸ“Š Perfil DemogrÃ¡fico: Contadores de Sergipe e Aracaju

### **Dados do Mercado**

**Brasil:**
- 536.701 profissionais contÃ¡beis ativos
- 74,57% contadores | 25,43% tÃ©cnicos
- Perfil: 74,6% homens, 44,1% entre 31-49 anos, 60,9% nÃ­vel superior

**Sergipe:**
- 3.744 profissionais (0,70% do total nacional)
- 2.844 contadores (75,96%) | 900 tÃ©cnicos (24,04%)
- 61,4% homens / **38,6% mulheres** (maior participaÃ§Ã£o feminina que a mÃ©dia nacional)
- 650 organizaÃ§Ãµes contÃ¡beis

**DistribuiÃ§Ã£o das OrganizaÃ§Ãµes:**
- EmpresÃ¡rios individuais: 220 (33,85%)
- SLU: 218 (33,54%)
- Sociedades: 192 (29,54%)
- MEI: 20 (3,08%)

**Insight CrÃ­tico**: Mercado pulverizado com poucos grandes players. PredominÃ¢ncia de estruturas pequenas e individuais.

---

### **Contexto EconÃ´mico Sergipe/Aracaju**

**Indicadores Positivos:**
- PIB Sergipe 2024: R$ 66,21 bilhÃµes (crescimento 3,6%)
- PIB Aracaju: R$ 18,4 bilhÃµes (35,5% do PIB estadual)
- Taxa de desemprego: **8,4%** (menor da histÃ³ria)
- Setor de serviÃ§os: LideranÃ§a nacional em crescimento (7%)

**Estrutura EconÃ´mica:**
- ServiÃ§os: 42,2% do PIB
- AdministraÃ§Ã£o PÃºblica: 29,6% (alta dependÃªncia estatal)
- IndÃºstria: 21,9%

**ImplicaÃ§Ã£o**: Mercado em crescimento oferece oportunidades, mas dependÃªncia do setor pÃºblico limita diversificaÃ§Ã£o.

---

## ğŸ’” AS 7 DORES EMOCIONAIS PROFUNDAS

### **1. MEDO (Intensidade: MUITO ALTA | FrequÃªncia: DIÃRIA)**

**ManifestaÃ§Ãµes:**
- ğŸ˜° Medo de **FRACASSAR** (perder tudo que construiu)
- ğŸ˜° Medo de ficar **OBSOLETO** (IA, automaÃ§Ã£o, fintechs)
- ğŸ˜° Medo de **PERDER DINHEIRO** em investimentos errados
- ğŸ˜° Medo de ser **TARDE DEMAIS** para mudar (42 anos, 18 anos de carreira)
- ğŸ˜° Medo de **DECEPCIONAR A FAMÃLIA**
- ğŸ˜° Medo de descobrir que **NÃƒO Ã‰ COMPETENTE** como pensa

**Efeito Paralisante:**
- Tem R$15 mil guardados para investir, mas **NÃƒO investe** (medo paralisa)
- Sabe que precisa mudar, mas fica **parado**
- "E se escolher errado? NÃ£o posso arriscar a estabilidade da famÃ­lia"

**Como o app resolve:**
- âœ… Sistema **comprovado** (nÃ£o Ã© cobaia)
- âœ… Investimento **gradual** (comece pequeno, cresÃ§a conforme confianÃ§a)
- âœ… Comunidade de **pares** (nÃ£o estÃ¡ sozinho)
- âœ… Mentoria **ativa** (suporte nos primeiros 90 dias)

---

### **2. DESVALORIZAÃ‡ÃƒO (Intensidade: MUITO ALTA | FrequÃªncia: SEMANAL)**

**ManifestaÃ§Ãµes:**
- ğŸ’” **"Ã‰ sÃ³ contabilidade mesmo"** (frase que mata por dentro)
- ğŸ’” Tratado como **DESPACHANTE**, nÃ£o consultor
- ğŸ’” Cliente perdido por "alguÃ©m **30% mais barato**"
- ğŸ’” 18 anos de experiÃªncia **subutilizada**
- ğŸ’” "Poderia transformar vidas, mas sÃ³ 'faÃ§o guias'"

**Impacto Emocional:**
- SensaÃ§Ã£o de desvalorizaÃ§Ã£o profissional
- Autoestima baixa
- Medo de aumentar preÃ§os
- Sentimento de impotÃªncia

**Como o app resolve:**
- âœ… Posicionamento como **PARCEIRO TOP CLASS** (status instantÃ¢neo)
- âœ… EscritÃ³rio **premium** (cartÃ£o de visitas que impressiona)
- âœ… Rede de **elite** (networking que valoriza)
- âœ… ComissÃµes **vitalÃ­cias** (prova de valor a longo prazo)

---

### **3. PRESSÃƒO SOCIAL (Intensidade: ALTA | FrequÃªncia: CONTÃNUA)**

**ManifestaÃ§Ãµes Familiares:**
- ğŸ˜¢ **Sogro**: "Ainda nÃ£o conseguiu crescer?"
- ğŸ˜¢ **Cunhado**: "VocÃª estÃ¡ parado no tempo"
- ğŸ˜¢ **FamÃ­lia** olha com **PENA**, nÃ£o admiraÃ§Ã£o
- ğŸ˜¢ **ComparaÃ§Ãµes** constantes (cunhado mÃ©dico, amigo que "deu certo")
- ğŸ˜¢ **SilÃªncio constrangedor** quando fala sobre trabalho

**ManifestaÃ§Ãµes Profissionais:**
- Colegas de faculdade "decolar" enquanto ele "estagna"
- Eventos/festas = momento de vergonha
- Redes sociais = parade de sucessos alheios

**Impacto PsicolÃ³gico:**
- Stress social constante
- Evitar reuniÃµes familiares
- DepressÃ£o por comparaÃ§Ã£o
- SensaÃ§Ã£o de ser "fracassado"

**Como o app resolve:**
- âœ… **VitÃ³rias rÃ¡pidas** para mostrar (1Âº comissÃ£o = prova tangÃ­vel)
- âœ… **NÃ­veis visÃ­veis** (Bronze â†’ Prata = progresso mensurÃ¡vel)
- âœ… **Conquistas compartilhÃ¡veis** (badges, ranking)
- âœ… **TransformaÃ§Ã£o documentada** (antes x depois)

---

### **4. VERGONHA (Intensidade: MUITO ALTA | FrequÃªncia: DIÃRIA)**

**A Dor Mais Profunda: Filhos Sem Orgulho do Pai**
- ğŸ’” "Meu pai Ã© contador" (**voz sem empolgaÃ§Ã£o**)
- ğŸ’” NÃ£o hÃ¡ **brilho no olho** quando falam do pai
- ğŸ’” Filhos se acostumaram com a **mediocridade** do pai
- ğŸ’” NÃ£o pedem mais nada "caro" (sabem que pai nÃ£o pode dar)

**Outras ManifestaÃ§Ãµes:**
- Vergonha de mostrar realidade nas **redes sociais** (nÃ£o posta mais sobre trabalho)
- Vergonha de nÃ£o ter progredido em 5 anos
- Vergonha de ser **motivo de pena** da famÃ­lia
- Vergonha da prÃ³pria situaÃ§Ã£o profissional

**Impacto Devastador:**
- Isolamento social (nÃ£o quer ser visto)
- DepressÃ£o
- Sentimento de falha como pai/profissional
- Perda de identidade

**Como o app resolve:**
- âœ… **Lead Diamante** = Status supremo ("Meu pai Ã© DIAMANTE")
- âœ… **EscritÃ³rio Top Class** = Profissionalismo visÃ­vel
- âœ… **Conquistas reais** = Motivo de orgulho restaurado
- âœ… **TransformaÃ§Ã£o rÃ¡pida** = "Pai estÃ¡ mudando!"

---

### **5. SOLIDÃƒO (Intensidade: ALTA | FrequÃªncia: CONSTANTE)**

**"NÃ£o Posso Falar com NinguÃ©m":**
- ğŸš« **Esposa**: JÃ¡ tem suas preocupaÃ§Ãµes
- ğŸš« **FuncionÃ¡rios**: Preciso passar seguranÃ§a
- ğŸš« **Outros contadores**: Todos fingem que estÃ¡ tudo bem
- ğŸš« **FamÃ­lia**: NÃ£o entendem a pressÃ£o
- ğŸš« **Amigos**: Cansados de ouvir reclamaÃ§Ãµes

**Efeito do Isolamento:**
- Ansiedade crescente (sem vÃ¡lvula de escape)
- DecisÃµes tomadas sozinho (sem conselho)
- SensaÃ§Ã£o de ser o Ãºnico passando por isso
- Esgotamento emocional

**Como o app resolve:**
- âœ… **Comunidade ativa** (contadores que ENTENDEM)
- âœ… **Mentoria individual** (alguÃ©m que escuta de verdade)
- âœ… **Eventos presenciais** (conexÃµes reais)
- âœ… **Alertas proativos** (Top Class checa VOCÃŠ a cada trimestre)
- âœ… **Grupo WhatsApp/Discord** (suporte 24/7)

---

### **6. POTENCIAL DESPERDIÃ‡ADO (Intensidade: MUITO ALTA | FrequÃªncia: DIÃRIA)**

**"Tenho Tanto a Oferecer...":**
- ğŸ’ **18 anos de experiÃªncia** fazendo trabalho de auxiliar
- ğŸ’ Conhecimento que poderia **salvar empresas da falÃªncia**
- ğŸ’ Conselhos estratÃ©gicos que poderiam **gerar milhÃµes**
- ğŸ’ Mas Ã© visto apenas como "fazedor de guias"

**FrustraÃ§Ã£o Profunda:**
- Sentimento de desperdÃ­cio de vida
- "Estou morrendo um pouco a cada dia"
- "Poderia ser TANTO, mas sou TÃƒO POUCO"
- "Meus dons estÃ£o enterrados"

**Como o app resolve:**
- âœ… **Posicionamento como consultor** (nÃ£o operador)
- âœ… **Rede de clientes premium** (que valorizam expertise)
- âœ… **Palestras/eventos** (compartilhar conhecimento)
- âœ… **Mentoria de iniciantes** (deixar legado)

---

### **7. ESTAGNAÃ‡ÃƒO (Intensidade: ALTA | FrequÃªncia: CONTÃNUA)**

**"Parado no Tempo":**
- ğŸ“‰ **Mesmo faturamento hÃ¡ 5 anos** (enquanto inflaÃ§Ã£o corrÃ³i)
- ğŸ“‰ **Mesmos problemas, mesmas limitaÃ§Ãµes**
- ğŸ“‰ "Nunca conseguiu decolar"
- ğŸ“‰ Mundo evoluiu, ele ficou para trÃ¡s

**SensaÃ§Ã£o de Vida Perdida:**
- Tempo passando (42 anos, jÃ¡ nÃ£o Ã© mais "jovem")
- Oportunidades perdidas
- Arrependimento crescente
- Medo de chegar aos 60 assim

**Como o app resolve:**
- âœ… **Crescimento mensurÃ¡vel** (Bronze â†’ Prata â†’ Ouro â†’ Diamante)
- âœ… **Renda crescente** (override + bÃ´nus = escala)
- âœ… **Simulador de crescimento** (visualizar futuro diferente)
- âœ… **Conquistas celebradas** (cada vitÃ³ria Ã© marco)

---

## âœ¨ OS 10 ANSEIOS E SONHOS (O Que Realmente Querem)

### **1. FILHOS TEREM ORGULHO DO PAI** ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦
**O ANSEIO SUPREMO** (mencionado 5+ vezes nos diÃ¡rios)

**Como querem que seja:**
- "Meu pai Ã© contador **DIAMANTE** da Top Class!" (empolgaÃ§Ã£o na voz)
- Filhos mostrando foto do escritÃ³rio premium para amigos
- "Meu pai ajuda empresas a crescerem" (nÃ£o "faz guias")
- Brilho no olho quando falam do pai

**Como o app entrega:**
- Lead Diamante (status visÃ­vel)
- EscritÃ³rio Top Class (infraestrutura de orgulho)
- Conquistas compartilhÃ¡veis (badges, ranking)
- TransformaÃ§Ã£o documentada (antes x depois)

---

### **2. SER RESPEITADO COMO ESPECIALISTA** ğŸ“

**Desejo:**
- NÃ£o ser chamado de "contador", mas de **CONSULTOR ESTRATÃ‰GICO**
- Clientes pedindo conselhos (nÃ£o sÃ³ "fazendo guias")
- HonorÃ¡rios respeitados (sem "estÃ¡ caro")
- ReferÃªncias espontÃ¢neas

**Como o app entrega:**
- Posicionamento Top Class (associaÃ§Ã£o com marca premium)
- Rede de clientes educados (entendem valor)
- ConteÃºdo para autoridade (blog, palestras)
- CertificaÃ§Ãµes exclusivas

---

### **3. TRABALHAR COM PRAZER (6-8H/DIA, NÃƒO 12H)** â°

**Desejo:**
- Fins de semana LIVRES
- FÃ©rias sem culpa
- Tempo para famÃ­lia
- EquilÃ­brio work-life

**Como o app entrega:**
- Renda passiva (override = dinheiro enquanto dorme)
- AutomaÃ§Ã£o (sistema faz o trabalho)
- Equipe capacitada (delegar com confianÃ§a)
- Processos documentados

---

### **4. FAMÃLIA VIBRAR COM CONQUISTAS** ğŸ‰

**Desejo:**
- Esposa admirando (nÃ£o tendo pena)
- Sogro orgulhoso
- Cunhado respeitando
- Ser exemplo positivo

**Como o app entrega:**
- VitÃ³rias frequentes (comissÃµes mensais)
- NÃ­veis crescentes (progresso visÃ­vel)
- Ranking pÃºblico (reconhecimento externo)
- Eventos exclusivos (status)

---

### **5. DEIXAR LEGADO POSITIVO** ğŸ“œ

**Desejo:**
- Ser lembrado como profissional **Ã­ntegro e competente**
- Influenciar positivamente a classe contÃ¡bil
- Formar novos profissionais
- Transformar percepÃ§Ã£o da contabilidade

**Como o app entrega:**
- Porto Seguro Elite (reconhecimento de longevidade)
- Mentoria de Bronze/Prata (ensinar iniciantes)
- Palestras/eventos (compartilhar jornada)
- Casos de sucesso documentados

---

### **6-10. Outros Anseios:**

**6. Transformar Vidas com Conhecimento**
- Ser consultor que realmente faz diferenÃ§a
- Ver clientes prosperando por suas orientaÃ§Ãµes

**7. Ser ReferÃªncia Regional**
- "O contador mais respeitado de Aracaju"
- Ser procurado pela mÃ­dia local

**8. NÃ£o Ser Mais Motivo de Pena**
- Reverter olhares de famÃ­lia
- Ser admirado, nÃ£o lamentado

**9. Recuperar Autoestima**
- Sentir-se competente novamente
- ConfianÃ§a nas prÃ³prias decisÃµes

**10. Inspirar Outros Profissionais**
- Mostrar que Ã© possÃ­vel mudar
- Ser exemplo de transformaÃ§Ã£o

---

## ğŸ“– HISTÃ“RIA REAL: O DiÃ¡rio de Carlos

**Carlos Eduardo Santos** | 42 anos | Contador hÃ¡ 18 anos | 180 clientes | 6 funcionÃ¡rios

### **Entrada 1: "SÃ£o 23h47 e nÃ£o consigo dormir"**

> *"Mais uma vez. Minha esposa jÃ¡ estÃ¡ dormindo hÃ¡ horas, mas eu fico aqui, no escritÃ³rio de casa, olhando para a tela do computador e me perguntando: 'O que estou fazendo da minha vida?'"*
> 
> *"Hoje perdi mais um cliente. O terceiro este mÃªs. Motivo? 'Encontrei alguÃ©m 30% mais barato, Carlos. VocÃª entende, nÃ©? **Ã‰ sÃ³ contabilidade mesmo.**' Essas palavras ecoam na minha cabeÃ§a como uma punhalada."*
> 
> *"O que mais me dÃ³i Ã© saber que tenho tanto a oferecer. Poderia ajudar esse empresÃ¡rio a estruturar melhor o negÃ³cio, fazer um planejamento tributÃ¡rio que economizaria milhares por ano. Mas nÃ£o. Ele sÃ³ quer alguÃ©m para 'fazer as guias'."*
> 
> *"Ã€s vezes olho para meus filhos e penso: 'Eles tÃªm orgulho do pai?' Quando perguntam o que faÃ§o, explico que sou contador, e vejo aquele olhar... nÃ£o Ã© desprezo, mas tambÃ©m nÃ£o Ã© admiraÃ§Ã£o."*

**Dores evidenciadas:**
- DesvalorizaÃ§Ã£o ("Ã‰ sÃ³ contabilidade mesmo")
- Vergonha (filhos sem orgulho)
- Potencial desperdiÃ§ado ("Tenho tanto a oferecer")
- Medo paralisa (R$15 mil guardados, mas nÃ£o investe)

---

### **Entrada 2: "NÃ£o aguento mais esses olhares"**

> *"Acabei de chegar do aniversÃ¡rio do meu cunhado. Meu sogro veio me cumprimentar: 'E aÃ­, Carlos? Como vÃ£o os negÃ³cios? JÃ¡ comprou aquele carro novo?' Vi no olhar dele. Aquela decepÃ§Ã£o disfarÃ§ada. Aquele 'ainda nÃ£o conseguiu crescer?'."*
> 
> *"Meu cunhado, que trabalha em TI, estava contando sobre a promoÃ§Ã£o, o aumento, a viagem para Miami. Todos parabenizando, admirando. Quando chegou minha vez: 'Ah, o Carlos continua com o escritÃ³rio de contabilidade dele.' Pronto. Acabou. Como se eu fosse um caso perdido."*
> 
> *"O pior foi quando meu irmÃ£o mais novo, que Ã© mÃ©dico, me puxou de canto: 'Carlos, vocÃª nÃ£o acha que estÃ¡ na hora de pensar em algo maior? VocÃª Ã© inteligente, tem potencial. **Mas parece que estÃ¡ parado no tempo.**'"*
> 
> *"Meus filhos ainda nÃ£o falam nada diretamente, mas percebo. NÃ£o hÃ¡ orgulho na voz. NÃ£o hÃ¡ aquele brilho no olho."*

**Dores evidenciadas:**
- PressÃ£o social (famÃ­lia com pena)
- EstagnaÃ§Ã£o ("Parado no tempo")
- Vergonha (ser motivo de pena)
- SolidÃ£o (nÃ£o pode falar com ninguÃ©m)

---

### **O Que Carlos Realmente Quer?**

**Top 3 Anseios:**
1. **Filhos terem orgulho do pai** (mencionado 5+ vezes)
2. Ser respeitado como especialista (nÃ£o "fazedor de guias")
3. FamÃ­lia vibrar com suas conquistas (nÃ£o mais pena)

**Medo Principal:**
- Ser tarde demais para mudar (42 anos, 18 anos de carreira)

**ObstÃ¡culo:**
- SolidÃ£o + Medo paralisa decisÃ£o (tem R$15 mil mas nÃ£o age)

**Como Lovable-Celite Transforma Carlos:**
- ğŸ¯ **Primeira comissÃ£o** (R$130) = Prova de que funciona = Medo reduz
- ğŸ¯ **Bronze (3 clientes)** = Primeira vitÃ³ria = EsperanÃ§a
- ğŸ¯ **Prata (5 clientes)** = BÃ´nus R$100 = FamÃ­lia nota mudanÃ§a
- ğŸ¯ **Ouro (10 clientes)** = TransformaÃ§Ã£o = Autoestima restaurada
- ğŸ¯ **Diamante (15 clientes)** = Lead/mÃªs = Filhos tÃªm orgulho do pai
- ğŸ¯ **Legado** = Mentor de outros = RealizaÃ§Ã£o plena

---

## ğŸ¯ GATILHOS DE MARKETING

### **Gatilhos de Dor (Para IdentificaÃ§Ã£o)**

**Headlines que conectam:**
- "Cansado de ser visto com **PENA**?"
- "Seus filhos tÃªm **ORGULHO** de vocÃª?"
- "HÃ¡ quanto tempo estÃ¡ **ESTAGNADO**?"
- "**Medo** de ficar obsoleto?"
- "Trabalha 12h/dia fazendo trabalho de auxiliar?"
- "Perde clientes para 'alguÃ©m 30% mais barato'?"
- "**'Ã‰ sÃ³ contabilidade mesmo'** - JÃ¡ ouviu isso?"

---

### **Gatilhos de Prazer (Para AspiraÃ§Ã£o)**

**Promessas que inspiram:**
- "Imagine seus filhos falando com **ORGULHO** do pai"
- "Seja o contador mais **RESPEITADO** da regiÃ£o"
- "Transforme conhecimento em **RECONHECIMENTO**"
- "Da estagnaÃ§Ã£o ao **SUCESSO**"
- "Trabalhe 6h, ganhe 3x mais"
- "Sua famÃ­lia vibrando com suas conquistas"
- "De 'fazedor de guias' a **CONSULTOR ESTRATÃ‰GICO**"

---

### **Palavras de Poder**

**Emocionais:**
- TransformaÃ§Ã£o, Reconhecimento, LibertaÃ§Ã£o
- RealizaÃ§Ã£o, Orgulho, Sucesso
- Crescimento, DiferenciaÃ§Ã£o, Autoridade
- Legado, Elite, Diamante

**TÃ©cnicas:**
- Automatizado, VitalÃ­cio, Garantido
- Comprovado, Seguro, EscalÃ¡vel
- Premium, Exclusivo, Elite

---

### **PrincÃ­pios de Copy**

**1. Contraste Dor x Prazer:**
```
ANTES: "Ã‰ sÃ³ contabilidade mesmo" (12h/dia, pena da famÃ­lia)
DEPOIS: "Sou consultor DIAMANTE" (6h/dia, orgulho dos filhos)
```

**2. IdentificaÃ§Ã£o Profunda:**
- Use a histÃ³ria de Carlos (relatable)
- Mencione as 7 dores especÃ­ficas
- Fale a linguagem emocional (nÃ£o sÃ³ tÃ©cnica)

**3. Prova Social:**
- Cases de transformaÃ§Ã£o documentados
- Antes x Depois (emocional + financeiro)
- Depoimentos focados em "orgulho dos filhos"

**4. ReduÃ§Ã£o de Risco:**
- Comunidade de apoio (nÃ£o mais solidÃ£o)
- Mentoria ativa (nÃ£o estÃ¡ sozinho)
- Investimento gradual (comece pequeno)
- Cases comprovados (nÃ£o Ã© cobaia)

---

## ğŸ“ ImplicaÃ§Ãµes TÃ©cnicas Desta Psicografia

**Cada dor emocional tem uma soluÃ§Ã£o tÃ©cnica correspondente:**

| Dor Emocional | SoluÃ§Ã£o TÃ©cnica | MÃ³dulo/Feature |
|---------------|-----------------|----------------|
| **MEDO** (paralisa decisÃ£o) | Onboarding progressivo + Quick wins | MÃ³dulo 1 (Setup) + Dashboard vitÃ³rias |
| **DESVALORIZAÃ‡ÃƒO** | UI premium + Badge sistema | Shadcn/UI + GamificaÃ§Ã£o |
| **PRESSÃƒO SOCIAL** | Conquistas compartilhÃ¡veis | MÃ³dulo 13 (GamificaÃ§Ã£o) |
| **VERGONHA** | TransformaÃ§Ã£o visÃ­vel | Dashboard pÃºblico + Ranking |
| **SOLIDÃƒO** | Comunidade + Alertas | MÃ³dulo 14 (Push Notifications) |
| **POTENCIAL DESPERDIÃ‡ADO** | NÃ­veis crescentes | Sistema Bronzeâ†’Diamante |
| **ESTAGNAÃ‡ÃƒO** | Progresso mensurÃ¡vel | Simulador + GrÃ¡ficos |

**Por isso o app tem:**
- âœ… Dashboard **bonito** (profissionalismo = reduz vergonha)
- âœ… NotificaÃ§Ãµes **proativas** (nunca mais solidÃ£o)
- âœ… Conquistas **visÃ­veis** (combate pressÃ£o social)
- âœ… Simulador **futuro** (combate estagnaÃ§Ã£o)
- âœ… Onboarding **suave** (reduz medo)
- âœ… Comunidade **ativa** (apoio emocional)
- âœ… Lead Diamante **status** (reconhecimento supremo)

---

**PrÃ³xima SeÃ§Ã£o**: [1 - VisÃ£o EstratÃ©gica](#1---visÃ£o-estratÃ©gica)

---

# 1 - VisÃ£o EstratÃ©gica

## ğŸ‘‰ Porque essa etapa Ã© importante?

Aqui definimos a fundaÃ§Ã£o estratÃ©gica do Lovable-Celite, alinhando propÃ³sito, problema real e pÃºblico-alvo antes de qualquer linha de cÃ³digo. Ã‰ nesse momento que vocÃª deixa de apenas "ter uma ideia" e comeÃ§a a transformÃ¡-la em uma soluÃ§Ã£o com direÃ§Ã£o clara.

Ao identificar a dor que serÃ¡ resolvida (gestÃ£o manual de comissÃµes MLM), os tipos de usuÃ¡rios (contadores, clientes, admin) e as funcionalidades essenciais (cÃ¡lculo automÃ¡tico, rede de indicaÃ§Ãµes, pagamentos via Stripe), essa etapa evita retrabalho, direciona escolhas tÃ©cnicas e facilita o uso inteligente da IA ao longo do processo.

---

## â˜‘ï¸ Checklist

<details>
<summary><strong>ğŸ”§ Ferramentas para ajudar nessa etapa</strong></summary>

Utilize ChatGPT, Claude ou plataformas similares para apoio nesse processo.

</details>

---

### ğŸ“Š Problema Identificado

**Contadores e EscritÃ³rios de Contabilidade enfrentam dois problemas crÃ­ticos ao tentar escalar atravÃ©s de indicaÃ§Ãµes:**

#### 1. **GestÃ£o Manual de ComissÃµes Descentralizada**
- Planilhas Excel desatualizadas e propensas a erro humano
- CÃ¡lculo manual de comissÃµes de ativaÃ§Ã£o, recorrentes, overrides e bÃ´nus
- Perda de tempo administrativo que poderia ser usado em vendas
- Falta de transparÃªncia para os contadores da rede
- Dificuldade em rastrear histÃ³rico de pagamentos

#### 2. **AusÃªncia de Sistema MLM/MMN Automatizado**
- NÃ£o existe rastreamento automÃ¡tico da rede de indicaÃ§Ãµes
- Overrides de sponsor nÃ£o sÃ£o calculados corretamente
- BÃ´nus de progressÃ£o (5, 10, 15 clientes) sÃ£o esquecidos
- BÃ´nus LTV (13 meses) nunca sÃ£o pagos por falta de controle
- ImpossÃ­vel escalar alÃ©m de 10-20 contadores sem sistema

#### 3. **Pagamentos Manuais via TransferÃªncia BancÃ¡ria**
- Processo manual de pagamento consome 2-3 dias por mÃªs
- Alto risco de erros em valores e contas bancÃ¡rias
- Falta de comprovante automÃ¡tico de pagamento
- Contadores perdem confianÃ§a sem transparÃªncia

#### **Impacto no NegÃ³cio:**
- ğŸ“‰ Perda de oportunidade de crescimento exponencial via MLM
- â±ï¸ 40-60 horas/mÃªs gastas em cÃ¡lculos manuais
- ğŸ’¸ ComissÃµes pagas incorretamente (ou nÃ£o pagas)
- ğŸ˜¤ InsatisfaÃ§Ã£o de contadores da rede
- ğŸš« ImpossÃ­vel escalar alÃ©m de rede pequena

---

### ğŸ’¡ SoluÃ§Ã£o

**Criar o Lovable-Celite, uma Plataforma SaaS de GestÃ£o de ComissÃµes MLM/MMN automatizada que transforma a indicaÃ§Ã£o de clientes em um sistema escalÃ¡vel e transparente.**

A soluÃ§Ã£o serÃ¡ construÃ­da sob a stack **Cursor/Vite/React/Supabase/Stripe** e incluirÃ¡:

#### **Pilares da SoluÃ§Ã£o:**

1. **CÃ¡lculo AutomÃ¡tico de ComissÃµes Multi-NÃ­vel**
   - Webhook do Stripe dispara cÃ¡lculo instantÃ¢neo ao confirmar pagamento
   - 7 tipos de comissÃ£o: AtivaÃ§Ã£o (100%), Recorrente (15-20%), Override (3-5%), BÃ´nus ProgressÃ£o, Volume, LTV, Contador
   - Sistema de nÃ­veis Bronze/Prata/Ouro/Diamante baseado em clientes ativos
   - Edge Functions no Supabase garantem performance e confiabilidade

2. **Rede MLM com Rastreamento Completo**
   - Ãrvore genealÃ³gica de indicaÃ§Ãµes (sponsor â†’ downline)
   - Overrides automÃ¡ticos para atÃ© 5 nÃ­veis de profundidade
   - Dashboard visual da rede para cada contador
   - Sistema de convites com tokens Ãºnicos

3. **IntegraÃ§Ã£o Nativa com Stripe**
   - Stripe Subscriptions para mensalidades recorrentes
   - Webhooks automÃ¡ticos (payment.succeeded â†’ cÃ¡lculo de comissÃµes)
   - Stripe Payouts para pagamento de comissÃµes aprovadas
   - Customer Portal para clientes gerenciarem assinaturas
   - Produtos configurÃ¡veis (BÃ¡sico R$130, Profissional R$280, Premium R$450)

4. **AprovaÃ§Ã£o e Pagamento Automatizado**
   - ComissÃµes calculadas automaticamente (status: `calculada`)
   - Admin aprova em lote (status: `aprovada`)
   - CRON executa pagamentos dia 25 (status: `paga`)
   - SolicitaÃ§Ãµes de saque com validaÃ§Ã£o de dados bancÃ¡rios/PIX
   - HistÃ³rico completo de pagamentos

5. **SeguranÃ§a e Auditoria**
   - Row Level Security (RLS) em todas as tabelas
   - Audit logs de todas as aÃ§Ãµes crÃ­ticas
   - IdempotÃªncia em webhooks (evita duplicaÃ§Ã£o)
   - ValidaÃ§Ã£o de assinaturas webhook (MD5)

---

### ğŸ¯ Funcionalidades Principais

#### **1. Sistema de ComissÃµes Automatizado**
- CÃ¡lculo instantÃ¢neo via webhook Stripe
- 7 tipos de comissÃ£o com regras de negÃ³cio validadas
- RPC transacional `executar_calculo_comissoes` garante consistÃªncia
- Status de comissÃ£o: calculada â†’ aprovada â†’ paga
- CompetÃªncia mensal para agrupamento

#### **2. Rede MLM/MMN (Multi-Level Marketing)**
- Cadastro de contadores com cÃ³digo de indicaÃ§Ã£o
- Tabela `rede_contadores` rastreia sponsor/child atÃ© 5 nÃ­veis
- Overrides automÃ¡ticos baseados no nÃ­vel do sponsor
- BÃ´nus de indicaÃ§Ã£o de contador (R$50 no 1Âº cliente do downline)
- Dashboard visual da rede genealÃ³gica

#### **3. Painel de ComissÃµes (Contador)**
- KPI cards: Provisionadas, Aprovadas, Liberadas, Total
- Tabela filtrada por data, status, tipo
- Tabs: Diretas / Overrides / BÃ´nus
- ExportaÃ§Ã£o CSV completa
- SolicitaÃ§Ã£o de saque (mÃ­nimo R$100)
- Modal de confirmaÃ§Ã£o com dados bancÃ¡rios

#### **4. Dashboard Administrativo (Admin)**
- Auditoria de comissÃµes calculadas
- AprovaÃ§Ã£o em lote por competÃªncia
- VisualizaÃ§Ã£o de pendÃªncias por contador
- Diff entre cÃ¡lculos shadow e oficiais
- GestÃ£o de contadores (CRUD)
- ConfiguraÃ§Ã£o de planos de cliente

#### **5. IntegraÃ§Ã£o Stripe Completa**
- Produtos: BÃ¡sico, Profissional, Premium, Enterprise
- Subscriptions: CriaÃ§Ã£o via API ou Portal
- Webhooks:
  - `invoice.payment_succeeded` â†’ calcula comissÃµes
  - `customer.subscription.deleted` â†’ cancela cliente
  - `invoice.payment_failed` â†’ alerta inadimplÃªncia
- Payouts: Pagamento de comissÃµes via Stripe Connect
- Customer Portal: Link para clientes gerenciarem assinatura

#### **6. GestÃ£o de Clientes**
- CRUD completo de clientes
- VinculaÃ§Ã£o a contador responsÃ¡vel
- Rastreamento de indicaÃ§Ã£o (invite token)
- Status: lead â†’ ativo â†’ cancelado â†’ inadimplente
- IntegraÃ§Ã£o com ASAAS (alternativa ao Stripe)

#### **7. Sistema de BÃ´nus Inteligente**
- **BÃ´nus ProgressÃ£o**: R$100 aos marcos (5, 10, 15 clientes)
- **BÃ´nus Volume**: R$100 a cada 5 clientes apÃ³s 15
- **BÃ´nus LTV**: 15-50% da mensalidade ao completar 13 meses (grupo)
- **BÃ´nus Contador**: R$50 quando downline ativa 1Âº cliente
- CRON mensal verifica e paga bÃ´nus LTV automaticamente

#### **8. Perfil e Dados BancÃ¡rios**
- FormulÃ¡rio completo: dados pessoais, endereÃ§o
- InformaÃ§Ãµes bancÃ¡rias: Banco, AgÃªncia, Conta, PIX
- ValidaÃ§Ã£o: requer PIX OU conta bancÃ¡ria para saques
- Tipo de pessoa: FÃ­sica / JurÃ­dica
- Avatar e foto de perfil

#### **9. Links de IndicaÃ§Ã£o**
- GeraÃ§Ã£o de tokens Ãºnicos por contador
- Rastreamento de cliques (analytics)
- Fluxo: LP â†’ Checkout â†’ ConversÃ£o
- HistÃ³rico de indicaÃ§Ãµes com status
- Tipo: cliente ou contador

#### **10. SolicitaÃ§Ãµes de Saque**
- ValidaÃ§Ã£o: saldo â‰¥ R$100 + dados bancÃ¡rios completos
- MÃ©todo: PIX (prioritÃ¡rio) ou TransferÃªncia
- Status: pendente â†’ aprovada â†’ paga â†’ cancelada
- Modal de confirmaÃ§Ã£o com preview dos dados
- HistÃ³rico de solicitaÃ§Ãµes

#### **11. Lead Diamante: O RECONHECIMENTO SUPREMO** ğŸ’âœ¨ **NOVO**

**âš ï¸ ObservaÃ§Ã£o**: Este benefÃ­cio pode ser substituÃ­do por consultoria individual ou agente IA para prospecÃ§Ã£o no futuro, **mas o SIGNIFICADO permanece**: **RECONHECIMENTO DE AUTORIDADE**.

---

### **O QUE Ã‰ REALMENTE (NÃ£o Ã© sÃ³ "1 lead/mÃªs")**

**Lead Diamante NÃƒO Ã© apenas um benefÃ­cio tÃ©cnico. Ã‰ o SÃMBOLO de que vocÃª CHEGOU AO TOPO:**

#### **Significado Emocional:**
- ğŸ† VocÃª Ã© TÃƒO BOM que a **Top Class trabalha PARA VOCÃŠ**
- ğŸ† VocÃª Ã© TÃƒO RESPEITADO que **recebe clientes DE BANDEJA**
- ğŸ† VocÃª Ã© TÃƒO ELITE que **nÃ£o precisa mais prospectar**
- ğŸ† **STATUS SUPREMO**: "Meu pai Ã© contador DIAMANTE" (orgulho dos filhos)

#### **Impacto Familiar (A TransformaÃ§Ã£o Completa):**
- ğŸ’ **Filhos falam com EMPOLGAÃ‡ÃƒO**: "Meu pai Ã© DIAMANTE da Top Class!"
- ğŸ’ **Sogro respeita**: "Carlos realmente conseguiu!"
- ğŸ’ **Cunhado admira**: "VocÃª chegou lÃ¡, parabÃ©ns!"
- ğŸ’ **Esposa orgulhosa**: Compartilha conquista nas redes
- ğŸ’ **FamÃ­lia vibra**: NÃ£o mais pena, mas ADMIRAÃ‡ÃƒO

#### **Impacto Profissional:**
- Colegas te veem como **REFERÃŠNCIA**
- CRC-SE te convida para **palestrar**
- Outros contadores te **pedem conselhos**
- VocÃª Ã© o "contador de sucesso" da sua cidade

---

### **Como Funciona (Parte TÃ©cnica)**

##### **Elegibilidade**
- Contador deve manter nÃ­vel Diamante (15+ clientes ativos)
- Verificado mensalmente no dia 1Âº
- Sem penalidades TIER ativas

##### **DefiniÃ§Ã£o de Lead Qualificado**
- **CNPJ ativo** (consulta Receita Federal via API)
- **Fit para planos Top Class**:
  - Necessidade de escritÃ³rio virtual
  - Porte: MEI, ME, EPP (faturamento R$81K - R$4,8M/ano)
  - Setor: ComÃ©rcio, ServiÃ§os, IndÃºstria (nÃ£o rural)
  - LocalizaÃ§Ã£o: Sergipe (prioridade) ou estados prÃ³ximos
- **IntenÃ§Ã£o de contratar**: â‰¤ 30 dias (validado por pesquisa)
- **Contato verificÃ¡vel e qualificado**:
  - Nome completo do decisor (sÃ³cio/diretor)
  - Telefone WhatsApp validado (nÃºmero ativo)
  - Email corporativo (preferencial, nÃ£o pessoal)
  - LinkedIn do decisor (opcional, mas valorizado)

**Score de Qualidade (fit_score 1-100):**
```
+30 pontos: CNPJ ativo e regular
+20 pontos: Telefone WhatsApp validado
+15 pontos: Email corporativo
+20 pontos: Porte adequado (ME/EPP)
+15 pontos: IntenÃ§Ã£o declarada de contratar
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
100 pontos TOTAL
```
**MÃ­nimo para entrega**: `fit_score >= 70`

##### **SLA de Entrega (Compromisso Top Class)**
- **Prazo**: AtÃ© dia 15 de cada mÃªs (garantido)
- **NotificaÃ§Ã£o**: Push notification + Email quando lead disponÃ­vel
- **Local**: SeÃ§Ã£o "ğŸ’ Meu Lead Diamante" no app (destaque especial)
- **Formato**: Ficha completa (CNPJ, razÃ£o social, contato, fit_score, observaÃ§Ãµes)

**Se Top Class nÃ£o entregar atÃ© dia 15:**
- Contador recebe **crÃ©dito de R$50** (compensaÃ§Ã£o)
- Lead Ã© entregue atÃ© dia 20 com prioridade mÃ¡xima

##### **SLA de SubstituiÃ§Ã£o (Qualidade Garantida)**
- **Direito**: 1 substituiÃ§Ã£o por mÃªs (se lead nÃ£o atender critÃ©rios)
- **Prazo de anÃ¡lise**: 5 dias Ãºteis apÃ³s solicitaÃ§Ã£o
- **Motivos vÃ¡lidos para substituiÃ§Ã£o**:
  - CNPJ inativo/baixado/irregular
  - Contato invÃ¡lido (telefone errado, nÃ£o atende nunca)
  - Sem interesse real (nÃ£o responde, nÃ£o quer serviÃ§o)
  - Fit baixo (nÃ£o precisa de escritÃ³rio virtual)
  - Lead "frio" (sem intenÃ§Ã£o nos prÃ³ximos 30 dias)

**Processo de SubstituiÃ§Ã£o:**
1. Contador acessa app â†’ "Solicitar SubstituiÃ§Ã£o"
2. Preenche formulÃ¡rio com motivo detalhado
3. Admin analisa em atÃ© 5 dias Ãºteis
4. Se aprovado: Novo lead entregue em atÃ© 3 dias
5. Se negado: Contador recebe explicaÃ§Ã£o + dicas de abordagem

**Registro de ConversÃ£o:**
- Contador deve atualizar status do lead: "Em contato", "Proposta enviada", "Convertido", "NÃ£o converteu"
- Se converter: ComissÃ£o normal (nÃ£o conta para TIER, Ã© BÃ”NUS puro)
- Dashboard admin monitora taxa de conversÃ£o por contador

##### **ImplementaÃ§Ã£o TÃ©cnica**
```sql
CREATE TABLE leads_diamante (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  contador_id UUID REFERENCES contadores(id) NOT NULL,
  competencia DATE NOT NULL, -- MÃªs de entrega
  cnpj TEXT NOT NULL,
  razao_social TEXT,
  responsavel_nome TEXT NOT NULL,
  responsavel_telefone TEXT NOT NULL,
  responsavel_email TEXT,
  fit_score INTEGER CHECK (fit_score BETWEEN 1 AND 100),
  status VARCHAR(50) DEFAULT 'pendente', -- 'pendente', 'entregue', 'substituido', 'convertido'
  entregue_em TIMESTAMPTZ,
  prazo_entrega DATE DEFAULT (DATE_TRUNC('month', CURRENT_DATE) + INTERVAL '14 days'),
  substituicao_solicitada BOOLEAN DEFAULT false,
  substituicao_motivo TEXT,
  substituicao_analisada BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- Ãndices
CREATE INDEX idx_leads_diamante_contador ON leads_diamante(contador_id);
CREATE INDEX idx_leads_diamante_status ON leads_diamante(status);
CREATE INDEX idx_leads_diamante_competencia ON leads_diamante(competencia);

-- RLS
CREATE POLICY "Contadores view own leads_diamante" ON leads_diamante FOR SELECT
  USING (contador_id = get_contador_id(auth.uid()) OR has_role(auth.uid(), 'admin'));

CREATE POLICY "Contadores update own leads_diamante" ON leads_diamante FOR UPDATE
  USING (contador_id = get_contador_id(auth.uid()))
  WITH CHECK (contador_id = get_contador_id(auth.uid()));
```

##### **CRON: Detectar Contadores Diamante**
```sql
SELECT cron.schedule(
  'criar-leads-diamante-mes',
  '0 10 1 * *', -- Dia 1Âº de cada mÃªs Ã s 10h
  $$
  INSERT INTO leads_diamante (contador_id, competencia, status)
  SELECT 
    id, 
    DATE_TRUNC('month', CURRENT_DATE),
    'pendente'
  FROM contadores
  WHERE nivel = 'diamante' 
    AND clientes_ativos >= 15
    AND status = 'ativo';
  $$
);
```

---

### ğŸ‘¥ Personas e Tipos de UsuÃ¡rios

O projeto exige a definiÃ§Ã£o clara dos papÃ©is e permissÃµes para a implementaÃ§Ã£o de seguranÃ§a.

#### **1. Admin Master (Top Class EscritÃ³rio Virtual)**

**Perfil**: Fundador ou gestor da Top Class (Aracaju/SE)

**Responsabilidades:**
- Monitoramento do negÃ³cio (MRR, churn, LTV)
- Auditoria de todas as comissÃµes
- AprovaÃ§Ã£o de comissÃµes em lote
- GestÃ£o de contadores (ativar/desativar/TIER)
- ConfiguraÃ§Ã£o de planos e produtos Stripe
- Monitoramento de webhooks e edge functions
- **AplicaÃ§Ã£o de penalidades TIER** (7% â†’ 3% â†’ 0%)
- **AprovaÃ§Ã£o de Porto Seguro Elite/Semi-Elite**
- **Entrega de Lead Diamante** (1/mÃªs atÃ© dia 15)

**Acesso:**
- `role: admin` no sistema
- Acesso via RPC `has_role(user_id, 'admin')`
- Acesso a dados agregados de todos os contadores
- Dashboard exclusivo `/auditoria-comissoes`, `/sistema-tier`, `/porto-seguro`

**Foco**: SeguranÃ§a, crescimento sustentÃ¡vel, saÃºde financeira da rede, compliance do programa

---

#### **2. Contador (UsuÃ¡rio Principal do Programa)**

**Perfil**: Profissional de contabilidade parceiro da Top Class

---

### **2.1 PERSONA PRINCIPAL: Carlos Eduardo Santos** ğŸ‘¤

**DemogrÃ¡fico:**
- **Idade**: 42 anos
- **Estado Civil**: Casado, 2 filhos (adolescentes)
- **FormaÃ§Ã£o**: Contador hÃ¡ 18 anos
- **NegÃ³cio**: EscritÃ³rio prÃ³prio, 180 clientes, 6 funcionÃ¡rios
- **Faturamento**: R$ 40-60K/mÃªs (margem baixa, 20-30%)
- **LocalizaÃ§Ã£o**: Aracaju/SE
- **Economia**: Tem R$15 mil guardados (mas medo paralisa investimento)

---

**PsicogrÃ¡fico (AS 7 DORES):**

**1. MEDO** (Dor dominante)
- ğŸ˜° Medo de **fracassar** e perder tudo que construiu
- ğŸ˜° Medo de ficar **obsoleto** (IA, automaÃ§Ã£o substituindo)
- ğŸ˜° Medo de **investir errado** os R$15 mil guardados
- ğŸ˜° Medo de ser **tarde demais** para mudar (42 anos)
- ğŸ˜° **Efeito**: PARALISIA DE DECISÃƒO (sabe que precisa mudar, mas nÃ£o age)

**2. DESVALORIZAÃ‡ÃƒO**
- ğŸ’” Ouve "**Ã‰ sÃ³ contabilidade mesmo**" (cliente perdido por "30% mais barato")
- ğŸ’” Tratado como **despachante**, nÃ£o consultor estratÃ©gico
- ğŸ’” 18 anos de experiÃªncia **subutilizada** (faz trabalho de auxiliar)
- ğŸ’” **Efeito**: AUTOESTIMA BAIXA, medo de aumentar preÃ§os

**3. PRESSÃƒO SOCIAL**
- ğŸ˜¢ **Sogro**: "Ainda nÃ£o conseguiu crescer?"
- ğŸ˜¢ **Cunhado** (TI, promoÃ§Ã£o, viagem Miami): "VocÃª estÃ¡ parado no tempo"
- ğŸ˜¢ FamÃ­lia olha com **PENA**, nÃ£o admiraÃ§Ã£o
- ğŸ˜¢ **Efeito**: STRESS social constante, evita reuniÃµes familiares

**4. VERGONHA** (Dor mais profunda)
- ğŸ’” **Filhos sem orgulho do pai**: "Meu pai Ã© contador" (voz sem empolgaÃ§Ã£o)
- ğŸ’” NÃ£o posta mais sobre trabalho nas redes (vergonha da realidade)
- ğŸ’” Filhos nÃ£o pedem mais nada "caro" (se acostumaram com mediocridade)
- ğŸ’” **Efeito**: DEPRESSÃƒO, isolamento social, perda de identidade

**5. SOLIDÃƒO**
- ğŸš« NÃ£o pode falar com esposa (jÃ¡ tem preocupaÃ§Ãµes)
- ğŸš« NÃ£o pode falar com funcionÃ¡rios (precisa passar seguranÃ§a)
- ğŸš« NÃ£o pode falar com outros contadores (todos fingem estar bem)
- ğŸš« **Efeito**: ISOLAMENTO EMOCIONAL, decisÃµes tomadas sozinho

**6. POTENCIAL DESPERDIÃ‡ADO**
- ğŸ’ "**Tenho tanto a oferecer...**" (conhecimento que poderia salvar empresas)
- ğŸ’ Faz trabalho operacional, mas poderia ser consultor estratÃ©gico
- ğŸ’ "Estou morrendo um pouco a cada dia"
- ğŸ’ **Efeito**: FRUSTRAÃ‡ÃƒO profunda, sensaÃ§Ã£o de vida perdida

**7. ESTAGNAÃ‡ÃƒO**
- ğŸ“‰ **Mesmo faturamento hÃ¡ 5 anos** (inflaÃ§Ã£o corrÃ³i)
- ğŸ“‰ "Parado no tempo", "Nunca conseguiu decolar"
- ğŸ“‰ Mundo evoluiu, ele ficou para trÃ¡s
- ğŸ“‰ **Efeito**: MEDO de chegar aos 60 assim, arrependimento crescente

---

**TOP 3 ANSEIOS (O que realmente quer):**

**1. FILHOS TEREM ORGULHO DO PAI** ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦ (mencionado 5+ vezes)
- "Meu pai Ã© contador **DIAMANTE** da Top Class!" (empolgaÃ§Ã£o na voz)
- Brilho no olho quando falam do pai
- Filhos mostrando escritÃ³rio premium para amigos

**2. SER RESPEITADO COMO ESPECIALISTA** ğŸ“
- NÃ£o "fazedor de guias", mas **CONSULTOR ESTRATÃ‰GICO**
- Clientes pedindo conselhos (nÃ£o sÃ³ "fazendo guias")
- HonorÃ¡rios respeitados (sem "estÃ¡ caro")

**3. FAMÃLIA VIBRAR COM CONQUISTAS** ğŸ‰
- Esposa admirando (nÃ£o tendo pena)
- Sogro orgulhoso
- Reverter olhares de pena para admiraÃ§Ã£o

---

**COMPORTAMENTO:**

**Rotina Atual:**
- ğŸ• Trabalha **12h/dia** (inclusive fins de semana)
- ğŸ’” Perde 3+ clientes/mÃªs para concorrÃªncia mais barata
- ğŸ“‰ NÃ£o aumenta preÃ§os hÃ¡ 2 anos (medo de perder mais)
- ğŸš« NÃ£o investe em marketing/capacitaÃ§Ã£o (medo de perder R$15 mil)
- ğŸ˜” "SÃ£o 23h47 e nÃ£o consigo dormir" (ansiedade crÃ´nica)

**Online:**
- NÃ£o posta mais sobre trabalho (vergonha)
- VÃª colegas "decolando" enquanto ele "estagna"
- Pesquisa soluÃ§Ãµes, mas nÃ£o decide (medo paralisa)

**DecisÃ£o de Compra:**
- âŒ **NÃ£o compra**: Promessas mirabolantes, "guru" sem prova
- âŒ **NÃ£o compra**: Investimento alto sem garantia
- âŒ **NÃ£o compra**: Complexo demais ("nÃ£o sei por onde comeÃ§ar")
- âœ… **COMPRA**: Sistema **comprovado**, comunidade de apoio, investimento gradual, mentoria ativa

---

**JORNADA EMOCIONAL ESPERADA NO APP:**

```
HOJE (Dor mÃ¡xima):
ğŸ˜° Vergonha + Medo + SolidÃ£o + EstagnaÃ§Ã£o
â†“
DECISÃƒO (EsperanÃ§a + Medo):
"E se der errado? Mas... e se der CERTO?"
â†“
ONBOARDING (Acolhimento):
"VocÃª nÃ£o estÃ¡ sozinho. Somos 80 contadores como vocÃª."
â†“
1Âº COMISSÃƒO - R$130 (VitÃ³ria):
"FUNCIONOU! Meu Deus, funcionou!"
â†“
BRONZE - 3 clientes (EsperanÃ§a):
"Estou crescendo. Isso Ã© real."
â†“
PRATA - 5 clientes (Reconhecimento):
BÃ´nus R$100 + FamÃ­lia nota: "Pai estÃ¡ mudando!"
â†“
OURO - 10 clientes (TransformaÃ§Ã£o):
"Sou consultor. NÃ£o mais 'fazedor de guias'."
Autoestima restaurada.
â†“
DIAMANTE - 15 clientes (Autoridade):
Lead/mÃªs + Status supremo
Filhos: "Meu pai Ã© DIAMANTE!" (orgulho na voz)
â†“
LEGADO (RealizaÃ§Ã£o Plena):
Mentor de Bronze/Prata, referÃªncia regional
"Fiz diferenÃ§a. Deixei marca."
```

---

**RESPONSABILIDADES TÃ‰CNICAS:**
- Indicar e ativar novos clientes via link rastreÃ¡vel `/i/:token`
- Indicar novos contadores via link `/r/:token`
- Acompanhar comissÃµes em tempo real
- Solicitar saques mensais (mÃ­nimo R$100, PIX dia 25)
- Gerenciar sua rede de indicaÃ§Ãµes (MMN)
- Manter dados bancÃ¡rios atualizados
- **Cumprir TIER 1** (4+ clientes/ano OU 2-3 + 85% retenÃ§Ã£o + 70% treinamentos)
- **Evitar penalidades** (Ano 1: 7% â†’ Ano 2: 3% â†’ Ano 3: 0%)
- **Conquistar bÃ´nus de progressÃ£o e LTV**

**ACESSO TÃ‰CNICO:**
- `role: contador` (implÃ­cito, sem role especÃ­fica)
- RLS filtra dados por `contador_id`
- Acesso apenas aos seus prÃ³prios clientes e comissÃµes
- Dashboard principal `/comissoes`, `/rede`, `/links`, `/simulador`

**FOCO EMOCIONAL**: **"Meus filhos terÃ£o orgulho de mim"**
**Foco TÃ©cnico**: Ganhar comissÃµes, crescer rede, receber pagamentos em dia, manter performance mÃ­nima

---

**NÃVEIS DE CONTADOR:**
- ğŸ¥‰ **Bronze**: 1-4 clientes ativos (15% recorrente + 3% override)
- ğŸ¥ˆ **Prata**: 5-9 clientes ativos (17,5% recorrente + 4% override) + BÃ´nus R$100 (1x)
- ğŸ¥‡ **Ouro**: 10-14 clientes ativos (20% recorrente + 5% override) + BÃ´nus R$100 (1x)
- ğŸ’ **Diamante**: 15+ clientes ativos (20% recorrente + 5% override) + BÃ´nus R$100 (1x) + **1 lead/mÃªs** (RECONHECIMENTO SUPREMO)

**âš ï¸ Sistema TIER de Penalidades:**
- **TIER 1 (Normal)**: Cumpre performance mÃ­nima â†’ 15-20% comissÃ£o
- **TIER 1 (Ano 1 Inatividade)**: NÃƒO cumpre â†’ **7% comissÃ£o** + alertas proativos
- **TIER 2 (Ano 2 Inatividade)**: Continua inativo â†’ **3% comissÃ£o** + Ãºltima chance
- **TIER 3 (Ano 3 Inatividade)**: Ainda inativo â†’ **0% comissÃ£o** + carteira redistribuÃ­da

**ğŸ›¡ï¸ Porto Seguro (ProteÃ§Ã£o Especial):**
- **Elite** (30+ clientes, 90% retenÃ§Ã£o, 8 indicaÃ§Ãµes/12m): 1 pausa de 12 meses a cada 2 anos (8% durante pausa)
- **Semi-Elite** (20-29 clientes, 85% retenÃ§Ã£o, 6 indicaÃ§Ãµes/12m): 1 pausa de 6 meses (1x na carreira, 4% durante pausa)

**ğŸ”„ Janela de ReativaÃ§Ã£o (Segunda Chance):**
- **Plano 90 dias**: +4 clientes em 90 dias â†’ Recupera 100% imediatamente
- **Plano 180 dias**: +6 clientes em 180 dias â†’ 50% (mÃªs 1-6) + 100% (mÃªs 7+)

---

#### **3. Cliente (Indireto)**

**Perfil**: Empresa que contrata serviÃ§o de contabilidade

**Responsabilidades:**
- Pagar mensalidade via Stripe
- Manter assinatura ativa
- Gerenciar dados de pagamento

**Acesso:**
- NÃ£o possui acesso ao sistema Lovable-Celite
- Acessa Stripe Customer Portal para gerenciar assinatura
- Recebe emails transacionais (Brevo)

**Foco**: Receber serviÃ§o de contabilidade de qualidade

---

### ğŸ› ï¸ Ferramentas e Custos

A proposta de valor Ã© construir um sistema de comissÃµes MLM profissional com mÃ¡xima eficiÃªncia de custos e ferramentas de ponta.

#### **Stack TecnolÃ³gica**

| Camada | Ferramenta | Custo Mensal | Justificativa |
|--------|-----------|--------------|---------------|
| **Desenvolvimento** | Cursor Pro | $20 | IA code editor com autocomplete |
| **Frontend** | Vite + React 18 | $0 | Build ultrarrÃ¡pido, HMR instantÃ¢neo |
| **UI Library** | Shadcn/UI + Tailwind | $0 | Componentes acessÃ­veis e customizÃ¡veis |
| **Backend/DB** | Supabase Pro | $25 | PostgreSQL + Auth + RLS + Edge Functions |
| **Gateway Pagamento** | Stripe | 2,9% + $0,30 | LÃ­der global, webhooks confiÃ¡veis |
| **Hospedagem** | Netlify Free | $0 | Deploy automÃ¡tico via Git |
| **Email** | Brevo Free | $0 | AtÃ© 300 emails/dia |
| **DomÃ­nio** | Registro.br | $3/ano | .com.br |
| **Monitoramento** | Sentry Free | $0 | Error tracking (opcional) |

#### **Custo Total**

| Tipo | Valor |
|------|-------|
| **Investimento Inicial** | $20 (Cursor 1Âº mÃªs) |
| **ManutenÃ§Ã£o Mensal** | $45-70 (Cursor + Supabase + variÃ¡vel Stripe) |
| **Custo por TransaÃ§Ã£o** | 2,9% + $0,30 (Stripe) |

**ObservaÃ§Ãµes:**
- Supabase Free (atÃ© 500MB DB + 50K requisiÃ§Ãµes) pode ser usado no MVP inicial
- Stripe cobra apenas sobre transaÃ§Ãµes processadas
- Netlify Free suporta atÃ© 100GB/mÃªs de banda
- Crescimento previsÃ­vel: custos escalam com receita

---

### ğŸ¨ Desenho Geral do Projeto

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LOVABLE-CELITE SYSTEM                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Frontend   â”‚â—„â”€â”€â”€â”€â–ºâ”‚   Supabase   â”‚â—„â”€â”€â”€â”€â–ºâ”‚    Stripe    â”‚ â”‚
â”‚  â”‚  React/Vite  â”‚      â”‚  PostgreSQL  â”‚      â”‚   Payments   â”‚ â”‚
â”‚  â”‚  Tailwind    â”‚      â”‚     RLS      â”‚      â”‚   Webhooks   â”‚ â”‚
â”‚  â”‚  Shadcn/UI   â”‚      â”‚     Auth     â”‚      â”‚   Payouts    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                     â”‚                      â”‚          â”‚
â”‚         â”‚                     â”‚                      â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Edge Functions (Deno/TypeScript)             â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â€¢ webhook-stripe â†’ Recebe pagamentos confirmados          â”‚ â”‚
â”‚  â”‚ â€¢ calcular-comissoes â†’ Calcula 7 tipos de comissÃ£o        â”‚ â”‚
â”‚  â”‚ â€¢ aprovar-comissoes â†’ Admin aprova em lote                â”‚ â”‚
â”‚  â”‚ â€¢ processar-pagamento â†’ CRON dia 25 paga comissÃµes        â”‚ â”‚
â”‚  â”‚ â€¢ verificar-bonus-ltv â†’ CRON mensal bÃ´nus 13 meses        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Outras ObservaÃ§Ãµes Importantes

### **DecisÃ£o Arquitetural**
- O projeto Ã© construÃ­do em **Vite/React** (nÃ£o Next.js) para mÃ¡xima simplicidade
- A seguranÃ§a Ã© garantida primariamente via **Supabase RLS**
- Edge Functions sÃ£o em **Deno/TypeScript** para performance
- Stripe Ã© o gateway **principal** (ASAAS Ã© alternativa legacy)

### **Escopo de SeguranÃ§a**
- Foco na segregaÃ§Ã£o de dados (RLS por `contador_id`)
- Controle de acesso via roles (`admin` vs contador comum)
- ValidaÃ§Ã£o de webhooks Stripe via assinatura MD5
- IdempotÃªncia em todos os inserts crÃ­ticos
- Audit logs completos de aÃ§Ãµes administrativas

### **Prazos Estipulados**
- **MVP atual**: 70% completo (backend + frontend base)
- **IntegraÃ§Ã£o Stripe**: Pendente (substituir ASAAS)
- **Testes E2E**: Pendente
- **Deploy ProduÃ§Ã£o**: Aguardando validaÃ§Ãµes

### **MÃ©tricas de Sucesso**
- âœ… Webhook processa 100% dos pagamentos sem erro
- âœ… ComissÃµes calculadas em < 2s apÃ³s pagamento
- âœ… Zero duplicaÃ§Ã£o de comissÃµes (idempotÃªncia)
- âœ… Pagamentos executados automaticamente dia 25
- âœ… BÃ´nus LTV pagos corretamente no 13Âº mÃªs
- âœ… 95%+ de satisfaÃ§Ã£o dos contadores (NPS)

---

# 2 - Insights do Mercado

## ğŸ‘‰ Porque essa etapa Ã© importante?

Esta etapa Ã© importante porque impede que vocÃª desenvolva sua soluÃ§Ã£o no escuro. Ã‰ aqui que investigamos o que jÃ¡ existe, aprendemos com projetos semelhantes, identificamos boas prÃ¡ticas, gaps do mercado e diferenciais competitivos.

Ao analisar referÃªncias, levantar benchmarks e estudar o comportamento de soluÃ§Ãµes jÃ¡ validadas, vocÃª ganha repertÃ³rio para tomar decisÃµes mais inteligentes e inovadoras.

---

## â˜‘ï¸ Checklist

<details>
<summary><strong>ğŸ”§ Ferramentas para ajudar nessa etapa</strong></summary>

Utilize ChatGPT, Claude ou plataformas similares para suporte na pesquisa de mercado.

</details>

---

### ğŸ“Š Benchmark do Mercado

Pesquisa de plataformas do mercado que ofereÃ§am soluÃ§Ãµes semelhantes ou complementares.

#### **1. Sistemas MLM/Network Marketing**

##### **a) ByDesign Technologies**
- **URL**: https://www.bydesign.com/
- **Foco**: Software MLM/Network Marketing completo
- **Funcionalidades**:
  - Ãrvore genealÃ³gica visual (binary, unilevel, matrix)
  - CÃ¡lculo automÃ¡tico de comissÃµes multi-nÃ­vel
  - E-wallet para distribuidores
  - ReplicaÃ§Ã£o de sites
  - Carrinho de compras integrado
- **Diferenciais**:
  - White-label completo
  - Suporte a mÃºltiplos planos de compensaÃ§Ã£o
  - IntegraÃ§Ã£o com gateways de pagamento
- **O que podemos aprender**:
  - âœ… VisualizaÃ§Ã£o de rede Ã© essencial
  - âœ… E-wallet simplifica pagamentos
  - âœ… TransparÃªncia gera confianÃ§a

##### **b) Epixel MLM Software**
- **URL**: https://www.epixelmlmsoftware.com/
- **Foco**: Plataforma MLM enterprise
- **Funcionalidades**:
  - 20+ planos de compensaÃ§Ã£o prÃ©-configurados
  - Mobile app nativo (iOS/Android)
  - AI-powered analytics
  - Compliance tracking (DSA, FTC)
  - Gamification (badges, leaderboards)
- **Diferenciais**:
  - Dashboard mobile-first
  - PrevisÃ£o de ganhos com IA
  - Sistema de rank advancement automÃ¡tico
- **O que podemos aprender**:
  - âœ… Gamification aumenta engajamento
  - âœ… Mobile app Ã© diferencial competitivo
  - âœ… Compliance Ã© crÃ­tico para crescimento

##### **c) Multisoft MLM**
- **URL**: https://www.multisoftcorporation.com/
- **Foco**: Software MLM customizÃ¡vel para Brasil
- **Funcionalidades**:
  - Planos: BinÃ¡rio, Unilevel, Matrix, HÃ­brido
  - IntegraÃ§Ã£o com NFe (Nota Fiscal EletrÃ´nica)
  - Gateway brasileiro (PagSeguro, MercadoPago, PagBank)
  - RelatÃ³rios gerenciais completos
- **Diferenciais**:
  - Adaptado para legislaÃ§Ã£o brasileira
  - Suporte em portuguÃªs
  - IntegraÃ§Ã£o contÃ¡bil
- **O que podemos aprender**:
  - âœ… LocalizaÃ§Ã£o BR Ã© essencial
  - âœ… IntegraÃ§Ã£o fiscal diferencia
  - âœ… Gateway local reduz custos

---

#### **2. Plataformas de GestÃ£o de ComissÃµes**

##### **a) Spiff**
- **URL**: https://www.spiff.com/
- **Foco**: AutomaÃ§Ã£o de comissÃµes para equipes de vendas
- **Funcionalidades**:
  - Regras de comissÃ£o flexÃ­veis
  - IntegraÃ§Ã£o com CRM (Salesforce, HubSpot)
  - Dashboard em tempo real para vendedores
  - AprovaÃ§Ã£o workflows
- **Diferenciais**:
  - Real-time commission tracking
  - No-code rule builder
  - Auditoria completa
- **O que podemos aprender**:
  - âœ… TransparÃªncia em tempo real Ã© esperada
  - âœ… No-code configuration reduz dependÃªncia de TI
  - âœ… IntegraÃ§Ã£o CRM Ã© valorizada

##### **b) CaptivateIQ**
- **URL**: https://www.captivateiq.com/
- **Foco**: Plataforma enterprise de comissÃµes
- **Funcionalidades**:
  - CÃ¡lculo de comissÃµes complexas
  - PrevisÃ£o de ganhos
  - IntegraÃ§Ã£o com ERPs (NetSuite, Workday)
  - Audit trail completo
- **Diferenciais**:
  - AI-powered forecasting
  - Collaborative planning
  - Enterprise-grade security
- **O que podemos aprender**:
  - âœ… Auditoria Ã© nÃ£o-negociÃ¡vel
  - âœ… PrevisÃ£o de ganhos aumenta motivaÃ§Ã£o
  - âœ… SeguranÃ§a enterprise Ã© mesa de entrada

---

#### **3. Sistemas de Contabilidade com ComissÃµes**

##### **a) ContaAzul Pro**
- **URL**: https://contaazul.com/
- **Foco**: ERP para PMEs brasileiras
- **Funcionalidades**:
  - GestÃ£o financeira completa
  - EmissÃ£o de NFe
  - Controle de comissÃµes de vendedores
  - IntegraÃ§Ã£o bancÃ¡ria (OFX)
- **Diferenciais**:
  - SoluÃ§Ã£o all-in-one
  - Suporte completo em portuguÃªs
  - Aprovado por contadores
- **Gap identificado**:
  - âŒ NÃ£o suporta MLM/rede de indicaÃ§Ãµes
  - âŒ ComissÃµes sÃ£o simples (% sobre venda)
  - âœ… **Oportunidade**: Contadores jÃ¡ conhecem a marca

##### **b) Conta Simples**
- **URL**: https://contasimples.com/
- **Foco**: Banking + gestÃ£o financeira
- **Funcionalidades**:
  - Conta digital empresarial
  - ConciliaÃ§Ã£o automÃ¡tica
  - Pagamento de comissÃµes via TED/PIX
- **Gap identificado**:
  - âŒ Sem sistema de comissÃµes integrado
  - âœ… **Oportunidade**: IntegraÃ§Ã£o futura para payouts

---

### ğŸ¯ AnÃ¡lise Competitiva - Lovable-Celite

| Aspecto | Concorrentes MLM | Plataformas ComissÃ£o | **Lovable-Celite** |
|---------|------------------|----------------------|-------------------|
| **Foco** | Marketing multinÃ­vel genÃ©rico | ComissÃµes de vendas B2B | **Contadores + Clientes contÃ¡beis** |
| **PÃºblico** | Empresas MLM diversas | Empresas com vendedores | **Contadores brasileiros** |
| **IntegraÃ§Ã£o Pagamento** | Gateways globais | CRM/ERP | **Stripe + ASAAS (BR)** |
| **CÃ¡lculo ComissÃµes** | ConfigurÃ¡vel (complexo) | Regras simples | **7 tipos prÃ©-definidos** |
| **NÃ­veis MLM** | Ilimitados | N/A | **AtÃ© 5 nÃ­veis (override)** |
| **AutomaÃ§Ã£o** | Manual/Semi-automÃ¡tica | Manual/API | **100% automÃ¡tica (webhook)** |
| **BÃ´nus Inteligente** | BÃ¡sico | N/A | **ProgressÃ£o + Volume + LTV** |
| **Compliance BR** | âŒ Internacional | âš ï¸ Parcial | âœ… **NFe + PIX + RLS** |
| **Custo Setup** | $5K-50K | $10K-100K | **$0 (SaaS)** |
| **Custo Mensal** | $200-2K | $500-5K | **$45-70** |

---

### ğŸš€ Diferenciais Competitivos do Lovable-Celite

#### **1. Nicho Ultra-EspecÃ­fico** ğŸ¯
- NÃ£o competimos com MLM genÃ©ricos (Herbalife, Amway)
- NÃ£o competimos com SaaS de comissÃµes enterprise (Spiff, CaptivateIQ)
- **DomÃ­nio**: Contadores que captam clientes contÃ¡beis via indicaÃ§Ã£o
- **BenefÃ­cio**: Conhecemos profundamente as regras de negÃ³cio

#### **2. AutomaÃ§Ã£o 100% Zero-Touch** ğŸ¤–
- Webhook Stripe â†’ ComissÃ£o calculada em < 2s
- Sem intervenÃ§Ã£o manual no cÃ¡lculo
- CRON paga automaticamente dia 25
- BÃ´nus LTV detectado e pago no 13Âº mÃªs
- **BenefÃ­cio**: Admin foca em crescimento, nÃ£o em planilhas

#### **3. TransparÃªncia Total** ğŸ“Š
- Contador vÃª comissÃµes em tempo real
- HistÃ³rico completo de pagamentos
- Rastreamento de rede (quem indicou quem)
- Audit logs de toda aÃ§Ã£o administrativa
- **BenefÃ­cio**: ConfianÃ§a = retenÃ§Ã£o de contadores

#### **4. Compliance Brasileiro** ğŸ‡§ğŸ‡·
- PIX como mÃ©todo de pagamento prioritÃ¡rio
- IntegraÃ§Ã£o com ASAAS (gateway BR)
- RLS (Row Level Security) garante LGPD
- Preparado para NFe de comissÃµes
- **BenefÃ­cio**: Evita problemas legais futuros

#### **5. Custo AcessÃ­vel** ğŸ’°
- $45-70/mÃªs vs $500-5K dos concorrentes
- Sem custo de setup ($0 vs $5K-50K)
- Stripe cobra apenas por transaÃ§Ã£o (2,9% + $0,30)
- EscalÃ¡vel: custos crescem com receita
- **BenefÃ­cio**: ViÃ¡vel para pequenos escritÃ³rios

#### **6. Stack Moderna e PerformÃ¡tica** âš¡
- Vite (build 10x mais rÃ¡pido que Webpack)
- React 18 (Concurrent Mode)
- Supabase Edge Functions (Deno, isolamento)
- Stripe (99,99% uptime)
- **BenefÃ­cio**: Sistema rÃ¡pido e confiÃ¡vel

---

### ğŸ¨ ReferÃªncias de Design

#### **1. Dashboard de ComissÃµes**

**InspiraÃ§Ã£o**: Stripe Dashboard + Notion + Linear

**Elementos-chave:**
- Cards KPI com animaÃ§Ãµes suaves (framer-motion)
- GrÃ¡ficos limpos (Recharts com gradientes)
- Tabela sortable com hover states
- Filtros em linha (nÃ£o modais)
- Cores: Azul escuro (#0C1A2A) + Dourado (#F4C430)

**ReferÃªncia Dribbble:**
- https://dribbble.com/shots/19847066-Finance-Dashboard
- https://dribbble.com/shots/20114577-Commission-Tracking

---

#### **2. Ãrvore GenealÃ³gica MLM**

**InspiraÃ§Ã£o**: GitHub Network Graph + OrgChart

**Elementos-chave:**
- VisualizaÃ§Ã£o hierÃ¡rquica vertical
- Cards de contador com foto + nÃ­vel + comissÃ£o total
- Linhas conectoras animadas
- Zoom e pan (drag to scroll)
- Tooltip com detalhes ao hover

**ReferÃªncia Dribbble:**
- https://dribbble.com/shots/18232456-Network-Tree-Visualization
- https://dribbble.com/shots/17653218-Org-Chart-UI

---

#### **3. SolicitaÃ§Ã£o de Saque**

**InspiraÃ§Ã£o**: PayPal Withdraw + Stripe Payouts

**Elementos-chave:**
- Modal full-screen (mobile-friendly)
- Preview dos dados bancÃ¡rios
- ValidaÃ§Ã£o em tempo real (PIX format)
- ConfirmaÃ§Ã£o com checkbox "Li e concordo"
- Loading state com skeleton

**ReferÃªncia Dribbble:**
- https://dribbble.com/shots/19274839-Withdrawal-Flow
- https://dribbble.com/shots/18945672-Payment-Modal

---

## ğŸ“ Outras ObservaÃ§Ãµes Importantes

### **Ponto Chave**
O Lovable-Celite nÃ£o Ã© um "MLM genÃ©rico" como Herbalife ou Amway. Ele Ã© a **camada inteligente de automaÃ§Ã£o de comissÃµes** para escritÃ³rios contÃ¡beis que crescem via indicaÃ§Ã£o.

### **Nosso Lema**
"A plataforma que transforma indicaÃ§Ãµes em receita recorrente automÃ¡tica para contadores."

### **Canais de Entrega**
- **Web App**: React/Vite acessÃ­vel em qualquer navegador
- **Emails**: Brevo para notificaÃ§Ãµes transacionais
- **Futura**: Mobile app (React Native ou PWA)

### **ConcorrÃªncia Real**
NÃ£o disputamos com Spiff ou Epixel. Disputamos com:
1. **Planilhas Excel** (90% dos contadores usam)
2. **Sistemas genÃ©ricos** (nÃ£o entendem MLM contÃ¡bil)
3. **Processos manuais** (40-60h/mÃªs desperdiÃ§adas)

### **Nosso Diferencial**
Conhecemos profundamente as **7 regras de comissÃ£o** do mercado contÃ¡bil:
- AtivaÃ§Ã£o 100% âœ…
- Recorrente 15-20% âœ…
- Override 3-5% âœ…
- BÃ´nus ProgressÃ£o âœ…
- BÃ´nus Volume âœ…
- BÃ´nus LTV (13 meses) âœ…
- BÃ´nus Contador âœ…

Nenhum concorrente oferece isso pronto.

---

**PrÃ³xima SeÃ§Ã£o**: [3 - Arquitetura TÃ©cnica](#3---arquitetura-tÃ©cnica)

---

# 3 - Arquitetura TÃ©cnica

## ğŸ‘‰ Porque essa etapa Ã© importante?

Esta etapa Ã© essencial porque transforma a ideia em um plano tÃ©cnico concreto, conectando visÃ£o estratÃ©gica com execuÃ§Ã£o prÃ¡tica. VocÃª irÃ¡ definir a stack de ferramentas, mapeia os processos e fluxos da soluÃ§Ã£o, organiza visualmente as telas com wireframes e estrutura o banco de dados necessÃ¡rio.

AlÃ©m disso, tudo Ã© documentado de forma clara, garantindo clareza para si mesmo e para qualquer pessoa que participe do projeto. Essa etapa dÃ¡ forma, lÃ³gica e coesÃ£o Ã  soluÃ§Ã£o, evitando improvisos e permitindo uma construÃ§Ã£o muito mais fluida, escalÃ¡vel e profissional.

---

## â˜‘ï¸ Checklist

<details>
<summary><strong>ğŸ”§ Ferramentas para ajudar nessa etapa</strong></summary>

- **Mapeamento de Processos**: Miro, FigJam, Whimsical
- **Modelagem de Dados**: dbdiagram.io, Supabase Studio, Claude/ChatGPT
- **Wireframes**: Figma, Excalidraw, UX Pilot
- **Diagramas**: Mermaid, Draw.io

</details>

---

## ğŸ”„ Mapeamento de Processos

Mapear os processos Ã© uma etapa obrigatÃ³ria antes de automatizar ou criar fluxos complexos.

---

### **Processo 1: Onboarding de Contador**

**Objetivo**: Garantir que cada contador tenha acesso ao sistema com rede MLM corretamente configurada.

```mermaid
graph TD
    A[Novo contador acessa /auth] --> B{Possui cÃ³digo de indicaÃ§Ã£o?}
    B -->|Sim| C[Valida token do invite]
    B -->|NÃ£o| D[Registra sem sponsor]
    C --> E[Sistema cria auth.users]
    D --> E
    E --> F[Sistema cria entrada em profiles]
    F --> G[Sistema cria entrada em contadores]
    G --> H{Tem sponsor?}
    H -->|Sim| I[Cria vÃ­nculo em rede_contadores]
    H -->|NÃ£o| J[Contador raiz da rede]
    I --> K[Email boas-vindas via Brevo]
    J --> K
    K --> L[Redireciona para /perfil]
    L --> M[Contador preenche dados bancÃ¡rios]
    M --> N[âœ… Onboarding completo]
```

**Detalhes TÃ©cnicos:**
1. Cadastro usa `supabase.auth.signUp()`
2. Trigger SQL `handle_new_user()` cria perfil automaticamente
3. `rede_contadores.sponsor_id` Ã© preenchido se houver `invite_id`
4. Email de boas-vindas Ã© disparado via trigger ou edge function
5. RLS garante que contador sÃ³ vÃª seus prÃ³prios dados

---

### **Processo 1.5: Sistema de Links RastreÃ¡veis** ğŸ”— **NOVO**

**Objetivo**: Rastrear indicaÃ§Ãµes com seguranÃ§a e atribuir corretamente ao contador.

**2 Tipos de Links:**

#### **Tipo A: IndicaÃ§Ã£o de Cliente (`/i/:token`)**

```
https://app.celite.com.br/i/abc123def456
```

**ParÃ¢metros de Fluxo:**
- `?flow=lp` â†’ Abre Mini-LP direta (preto, branco, bordÃ´) com CTA "Finalizar com SeguranÃ§a"
- `?flow=checkout` â†’ Gera cobranÃ§a Stripe e abre checkout imediato

**Token HMAC SHA-256:**
```typescript
// GeraÃ§Ã£o do token (Edge Function)
const payload = {
  contador_id: 'uuid-do-contador',
  tipo: 'cliente',
  expires_at: Date.now() + (7 * 24 * 60 * 60 * 1000) // 7 dias
};

const token = crypto
  .createHmac('sha256', SUPABASE_SECRET_KEY)
  .update(JSON.stringify(payload))
  .digest('hex');
```

**Fluxo TÃ©cnico:**
1. Cliente clica no link `/i/:token`
2. Edge Function `validar-token` verifica:
   - Token HMAC vÃ¡lido?
   - Ainda nÃ£o expirou (< 7 dias)?
   - Contador emissor ainda ativo?
3. Se vÃ¡lido â†’ Grava em `indicacoes` + seta cookie httpOnly `indicacao_token`
4. Redireciona para fluxo escolhido (`lp` ou `checkout`)

---

#### **Tipo B: Convite de Contador (`/r/:token`)**

```
https://app.celite.com.br/r/xyz789ghi012
```

**Fluxo TÃ©cnico:**
1. Contador A clica "Convidar Contador"
2. Sistema gera token com `tipo='contador'`
3. Contador B (convidado) clica no link
4. ApÃ³s cadastro â†’ Sistema cria vÃ­nculo em `rede_contadores`:
   ```sql
   INSERT INTO rede_contadores (sponsor_id, child_id, nivel_rede)
   VALUES (:contador_a_id, :contador_b_id, 1);
   ```

**Cookie de Rastreamento:**
```typescript
// Cookie httpOnly (seguro, nÃ£o acessÃ­vel via JavaScript)
res.setHeader('Set-Cookie', 
  `indicacao_token=${token}; HttpOnly; Secure; SameSite=Strict; Max-Age=604800`
);
```

---

### **Processo 2: Cadastro de Cliente via Stripe (Com Incentivos)**

**Objetivo**: Cliente contrata serviÃ§o contÃ¡bil, sistema aplica incentivos e registra automaticamente.

```mermaid
graph TD
    A[Contador compartilha link /i/:token] --> B[Cliente clica no link]
    B --> C[Sistema valida token HMAC SHA-256]
    C --> D{Token vÃ¡lido?}
    D -->|NÃ£o| E[âŒ Erro: Link expirado]
    D -->|Sim| F[Grava em indicacoes + cookie httpOnly]
    F --> G{flow=lp ou flow=checkout?}
    G -->|lp| H[Abre Mini-LP elegante]
    G -->|checkout| I[Gera cobranÃ§a Stripe direto]
    H --> I
    I --> J{Seleciona plano}
    J --> K[Pro R$100]
    J --> L[Premium R$130]
    J --> M[Top R$180]
    K --> N{Fechou em â‰¤ 7 dias?}
    L --> N
    M --> N
    N -->|Sim| O[âœ… Desconto 20% + Cashback 50% na 2Âª]
    N -->|NÃ£o| P[PreÃ§o normal]
    O --> Q[Stripe cria customer + subscription]
    P --> Q
    Q --> R[Webhook: invoice.payment_succeeded]
    R --> S[Edge Function cria cliente na tabela clientes]
    S --> T[Calcula BÃ´nus AtivaÃ§Ã£o - cashback se aplicado]
    T --> U[Atualiza contadores.clientes_ativos + 1]
    U --> V[Verifica nÃ­vel do contador Bronze/Prata/Ouro/Diamante]
    V --> W[âœ… Cliente ativado]
```

**Detalhes TÃ©cnicos:**
1. Link contÃ©m token HMAC com TTL de 7 dias
2. Cookie httpOnly rastreia indicaÃ§Ã£o atÃ© conversÃ£o
3. Webhook `invoice.payment_succeeded` dispara edge function
4. **Incentivos ao Cliente:**
   - **Desconto 20%**: VÃ¡lido se fechar em atÃ© 7 dias (validar `indicacoes.created_at`)
   - **Cashback 50%**: Creditado na 2Âª mensalidade (reduz BÃ´nus de AtivaÃ§Ã£o do contador)
5. `stripe_customer_id` e `stripe_subscription_id` sÃ£o salvos
6. Trigger `atualizar_clientes_ativos()` incrementa contador

---

### **Processo 3: Webhook Stripe â†’ CÃ¡lculo de ComissÃµes**

**Objetivo**: Ao confirmar pagamento mensalidade, calcular automaticamente todas as comissÃµes.

```mermaid
graph TD
    A[Stripe: Pagamento confirmado] --> B[Webhook invoice.payment_succeeded]
    B --> C[Edge Function: webhook-stripe]
    C --> D[Valida assinatura MD5 do webhook]
    D --> E{Assinatura vÃ¡lida?}
    E -->|NÃ£o| F[âŒ Retorna 401 Unauthorized]
    E -->|Sim| G[Registra pagamento na tabela pagamentos]
    G --> H{Primeira mensalidade?}
    H -->|Sim| I[tipo: ativacao]
    H -->|NÃ£o| J[tipo: mensalidade]
    I --> K[Invoca calcular-comissoes]
    J --> K
    K --> L[Calcula comissÃ£o direta contador]
    L --> M{Contador tem sponsor?}
    M -->|Sim| N[Calcula override do sponsor]
    M -->|NÃ£o| O[Pula override]
    N --> P[Verifica bÃ´nus progressÃ£o 5,10,15]
    O --> P
    P --> Q[Verifica bÃ´nus volume a cada 5 apÃ³s 15]
    Q --> R[Verifica bÃ´nus contador 1Âº cliente downline]
    R --> S[Salva tudo em comissoes status: calculada]
    S --> T[Cria logs em comissoes_calculo_log]
    T --> U[âœ… ComissÃµes calculadas]
```

**Detalhes TÃ©cnicos:**
1. Webhook Stripe envia payload JSON com `invoice.id`, `customer.id`, `amount_paid`
2. Edge function `webhook-stripe` valida com secret MD5
3. Verifica idempotÃªncia: `pagamentos.stripe_payment_id` UNIQUE
4. **Detecta tipo de pagamento:**
   - **Anual Ã  vista**: `subscription.billing='annual'` â†’ ComissÃ£o sobre valor integral
   - **Parcelado**: ComissÃ£o sobre cada parcela efetivamente paga
5. `calcular-comissoes` usa RPC `executar_calculo_comissoes` (transacional)
6. **7 tipos de comissÃ£o avaliados:**
   - **AtivaÃ§Ã£o Direta** (100% - cashback se aplicado)
   - **Recorrente Direta** (15-20%)
   - **Override AtivaÃ§Ã£o** (15-20% do 1Âº pagamento da rede) âš ï¸ **NOVO**
   - **Override Recorrente** (3-5% da rede)
   - **BÃ´nus ProgressÃ£o** (R$100 aos marcos)
   - **BÃ´nus Volume** (R$100 a cada 5 apÃ³s Diamante)
   - **BÃ´nus Contador** (R$50 quando downline ativa 1Âº)
   - **BÃ´nus LTV** (15-50% no 13Âº mÃªs)
7. Status inicial sempre `calculada` (requer aprovaÃ§Ã£o admin)

---

### **Processo 4: AprovaÃ§Ã£o e Pagamento de ComissÃµes**

**Objetivo**: Admin aprova comissÃµes e sistema paga automaticamente dia 25.

```mermaid
graph TD
    A[ComissÃµes status: calculada] --> B[Admin acessa /auditoria-comissoes]
    B --> C[Visualiza comissÃµes por competÃªncia]
    C --> D[Valida valores e regras]
    D --> E{Aprova?}
    E -->|NÃ£o| F[Deixa como calculada]
    E -->|Sim| G[Clica Aprovar em lote]
    G --> H[Edge Function: aprovar-comissoes]
    H --> I[Atualiza status: aprovada]
    I --> J[Aguarda dia 25 do mÃªs]
    J --> K[CRON: processar-pagamento-comissoes]
    K --> L[Busca comissÃµes aprovada da competÃªncia]
    L --> M[Agrupa por contador_id]
    M --> N{Total >= R$100?}
    N -->|NÃ£o| O[Acumula para prÃ³ximo mÃªs]
    N -->|Sim| P{Tem dados bancÃ¡rios?}
    P -->|NÃ£o| Q[Alerta contador: Complete perfil]
    P -->|Sim| R[Stripe Payout via Connect]
    R --> S[Atualiza status: paga]
    S --> T[Marca pago_em: timestamp]
    T --> U[Email notificaÃ§Ã£o via Brevo]
    U --> V[âœ… ComissÃµes pagas]
```

**Detalhes TÃ©cnicos:**
1. Admin usa RPC `has_role(user_id, 'admin')` para acesso
2. AprovaÃ§Ã£o usa edge function `aprovar-comissoes`
3. CRON configurado no Supabase:
   ```sql
   SELECT cron.schedule(
     'processar-pagamentos-dia-25',
     '0 9 25 * *',
     $$ SELECT net.http_post(...) $$
   );
   ```
4. ValidaÃ§Ã£o: `SUM(comissoes.valor WHERE status='aprovada') >= 100`
5. Stripe Connect Payouts ou PIX via integraÃ§Ã£o bancÃ¡ria

---

### **Processo 5: BÃ´nus LTV (13 Meses)**

**Objetivo**: Pagar bÃ´nus automÃ¡tico quando grupo de clientes completa 13 meses ativos.

```mermaid
graph TD
    A[CRON mensal: dia 1 Ã s 10h] --> B[Edge Function: verificar-bonus-ltv]
    B --> C[Busca clientes ativados hÃ¡ 13 meses]
    C --> D[Agrupa por contador + mÃªs_ativacao]
    D --> E{Grupo >= 5 clientes ativos?}
    E -->|NÃ£o| F[NÃ£o paga bÃ´nus]
    E -->|Sim| G[Determina percentual]
    G --> H{Tamanho do grupo}
    H -->|5-9| I[15% das mensalidades]
    H -->|10-14| J[30% das mensalidades]
    H -->|15+| K[50% das mensalidades]
    I --> L[Cria comissao tipo: bonus_ltv]
    J --> L
    K --> L
    L --> M[Cria bonus_historico]
    M --> N[status: calculada]
    N --> O[Aguarda aprovaÃ§Ã£o admin]
    O --> P[âœ… BÃ´nus LTV criado]
```

**Detalhes TÃ©cnicos:**
1. CRON executa 1Âº dia do mÃªs: `0 10 1 * *`
2. Query busca: `data_ativacao = CURRENT_DATE - INTERVAL '13 months'`
3. Agrupa: `GROUP BY contador_id, DATE_TRUNC('month', data_ativacao)`
4. Conta apenas clientes com `status = 'ativo'` no grupo
5. Percentual baseado na quantidade ativa, nÃ£o inicial

---

### **Processo 6: SolicitaÃ§Ã£o de Saque (Contador)**

**Objetivo**: Contador solicita saque de comissÃµes aprovadas.

```mermaid
graph TD
    A[Contador acessa /comissoes] --> B[VÃª total de comissÃµes aprovada]
    B --> C{Total >= R$100?}
    C -->|NÃ£o| D[BotÃ£o desabilitado]
    C -->|Sim| E[Clica Solicitar Saque]
    E --> F{Tem dados bancÃ¡rios?}
    F -->|NÃ£o| G[Modal: Complete perfil]
    F -->|Sim| H[Modal confirmaÃ§Ã£o]
    H --> I[Mostra valor + PIX/Banco]
    I --> J[Contador confirma]
    J --> K[Cria em solicitacoes_saque]
    K --> L[status: pendente]
    L --> M[Admin recebe notificaÃ§Ã£o]
    M --> N[Admin processa manualmente ou via payout]
    N --> O[Atualiza status: paga]
    O --> P[âœ… Saque concluÃ­do]
```

**Detalhes TÃ©cnicos:**
1. ValidaÃ§Ã£o no frontend: `totalAprovadas >= 100`
2. Valida perfil: `chave_pix OR (banco AND conta AND agencia)`
3. Insere em `solicitacoes_saque`:
   ```sql
   INSERT INTO solicitacoes_saque (
     contador_id,
     valor_solicitado,
     comissoes_ids,
     metodo_pagamento,
     dados_bancarios
   ) VALUES (...)
   ```
4. Admin pode aprovar em lote ou individual

---

## ğŸ—„ï¸ Modelagem de Dados

A modelagem de dados jÃ¡ estÃ¡ implementada com 17 tabelas. Aqui estÃ¡ o resumo estruturado.

---

### **1. Tabelas Principais**

| Tabela | DescriÃ§Ã£o | Campos-chave |
|--------|-----------|--------------|
| `profiles` | Dados do usuÃ¡rio (1:1 com auth.users) | id (PK/FK), nome, email, cpf_cnpj, chave_pix |
| `contadores` | Contadores da rede MLM | id (PK), user_id (FK), nivel, status, clientes_ativos |
| `clientes` | Clientes contÃ¡beis | id (PK), contador_id (FK), nome_empresa, cnpj, plano, status |
| `rede_contadores` | Ãrvore genealÃ³gica MLM | sponsor_id (FK), child_id (FK), nivel_rede |
| `pagamentos` | Mensalidades confirmadas | id (PK), cliente_id (FK), tipo, valor_bruto, valor_liquido, stripe_payment_id |
| `comissoes` | ComissÃµes calculadas/pagas | id (PK), contador_id (FK), tipo, valor, status, competencia |
| `bonus_historico` | BÃ´nus de progressÃ£o/volume/LTV | id (PK), contador_id (FK), tipo_bonus, marco_atingido, valor |
| `solicitacoes_saque` | Pedidos de saque de contador | id (PK), contador_id (FK), valor_solicitado, status, metodo_pagamento |

---

### **2. Relacionamentos CrÃ­ticos**

#### **Relacionamento do Contador**

```mermaid
erDiagram
    AUTH_USERS ||--|| PROFILES : "1:1"
    PROFILES ||--|| CONTADORES : "1:1"
    CONTADORES ||--o{ CLIENTES : "1:N - gerencia"
    CONTADORES ||--o{ COMISSOES : "1:N - recebe"
    CONTADORES ||--o{ REDE_CONTADORES : "1:N - sponsor"
    CONTADORES ||--o{ REDE_CONTADORES : "1:N - child"
    CONTADORES ||--o{ BONUS_HISTORICO : "1:N - conquista"
```

**Detalhes:**
- `auth.users.id` = `profiles.id` = `contadores.user_id`
- RLS filtra por `auth.uid() = profiles.id`
- Contador sÃ³ vÃª seus prÃ³prios clientes via `clientes.contador_id`

---

#### **Relacionamento do Cliente**

```mermaid
erDiagram
    CLIENTES ||--o{ PAGAMENTOS : "1:N - faz"
    PAGAMENTOS ||--o{ COMISSOES : "1:N - gera"
    CLIENTES }o--|| CONTADORES : "N:1 - gerenciado por"
```

**Detalhes:**
- `clientes.stripe_customer_id` vincula ao Stripe
- `pagamentos.stripe_payment_id` garante idempotÃªncia
- Cada pagamento pode gerar mÃºltiplas comissÃµes (direta + override + bÃ´nus)

---

#### **Relacionamento da Rede MLM**

```mermaid
erDiagram
    REDE_CONTADORES }o--|| CONTADORES : "N:1 - sponsor"
    REDE_CONTADORES }o--|| CONTADORES : "N:1 - child"
```

**Detalhes:**
- `sponsor_id` â†’ Quem indicou (upline)
- `child_id` â†’ Quem foi indicado (downline)
- `nivel_rede` â†’ Profundidade (1-5)
- Constraint: `CHECK (sponsor_id != child_id)`
- Unique: `UNIQUE(sponsor_id, child_id)`

---

### **3. Schema Supabase (SQL)**

```sql
-- Exemplo: Tabela comissoes
CREATE TABLE comissoes (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  contador_id UUID REFERENCES contadores(id) ON DELETE RESTRICT NOT NULL,
  cliente_id UUID REFERENCES clientes(id) ON DELETE RESTRICT,
  pagamento_id UUID REFERENCES pagamentos(id) ON DELETE CASCADE,
  tipo tipo_comissao NOT NULL, -- ENUM
  valor NUMERIC(10,2) NOT NULL CHECK (valor >= 0),
  percentual NUMERIC(5,2),
  competencia DATE NOT NULL,
  status status_comissao DEFAULT 'calculada', -- ENUM
  observacao TEXT,
  pago_em TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- Ãndices para performance
CREATE INDEX idx_comissoes_contador ON comissoes(contador_id);
CREATE INDEX idx_comissoes_status ON comissoes(status);
CREATE INDEX idx_comissoes_competencia ON comissoes(competencia);

-- RLS Policy
CREATE POLICY "Contadores view own comissoes" ON comissoes FOR SELECT
  USING (contador_id = get_contador_id(auth.uid()) OR has_role(auth.uid(), 'admin'));
```

---

### **4. ENUMs CrÃ­ticos**

```sql
-- Tipos de comissÃ£o (7 tipos)
CREATE TYPE tipo_comissao AS ENUM (
  'ativacao',         -- 100% primeira mensalidade
  'recorrente',       -- 15-20% mensalidades
  'override',         -- 3-5% de downline
  'bonus_progressao', -- R$100 aos marcos
  'bonus_volume',     -- R$100 a cada 5 apÃ³s 15
  'bonus_ltv',        -- 15-50% aos 13 meses
  'bonus_contador'    -- R$50 quando downline ativa 1Âº
);

-- Status de comissÃ£o
CREATE TYPE status_comissao AS ENUM (
  'calculada',  -- Criada automaticamente
  'aprovada',   -- Admin aprovou
  'paga',       -- Paga dia 25
  'cancelada'   -- Estornada/cancelada
);

-- NÃ­vel de contador
CREATE TYPE nivel_contador AS ENUM (
  'bronze',   -- 1-4 clientes (15%)
  'prata',    -- 5-9 clientes (17,5%)
  'ouro',     -- 10-14 clientes (20%)
  'diamante'  -- 15+ clientes (20% + bÃ´nus)
);
```

---

## ğŸ”Œ IntegraÃ§Ãµes API

### **1. Stripe** â­ Principal

**DocumentaÃ§Ã£o**: https://stripe.com/docs/api

#### **Produtos Configurados** âš ï¸ **VALORES REAIS DO NEGÃ“CIO**

```javascript
// Planos Top Class EscritÃ³rio Virtual (Aracaju/SE)
const produtos = [
  {
    name: 'Plano Pro',
    price: 10000, // R$100,00 (centavos)
    interval: 'month',
    features: [
      'EscritÃ³rio virtual completo',
      'Recebimento ilimitado de correspondÃªncias',
      'Atendimento telefÃ´nico ilimitado',
      'RecepÃ§Ã£o de clientes',
      'Desconto 20% em salas'
    ],
  },
  {
    name: 'Plano Premium',
    price: 13000, // R$130,00
    interval: 'month',
    features: [
      'Todos os benefÃ­cios do Pro',
      '2h semanais de sala executiva (atÃ© 4 pessoas)',
      'Desconto 20% em salas'
    ],
  },
  {
    name: 'Plano Top',
    price: 18000, // R$180,00
    interval: 'month',
    features: [
      'Todos os benefÃ­cios do Pro',
      '5h mensais de sala executiva (atÃ© 4 pessoas)',
      'Desconto 20% em salas'
    ],
  },
];
```

#### **Webhooks NecessÃ¡rios**

```javascript
const webhooks = [
  'invoice.payment_succeeded',      // âœ… Pagamento confirmado â†’ calcula comissÃµes
  'customer.subscription.created',  // âœ… Nova assinatura â†’ cria cliente
  'customer.subscription.updated',  // âš ï¸ MudanÃ§a de plano
  'customer.subscription.deleted',  // âš ï¸ Cancelamento
  'invoice.payment_failed',         // âš ï¸ InadimplÃªncia
];
```

**Endpoint**: `https://[supabase-url]/functions/v1/webhook-stripe`

---

### **2. Supabase**

**DocumentaÃ§Ã£o**: https://supabase.com/docs

#### **Edge Functions Implementadas**

```bash
supabase/functions/
â”œâ”€â”€ webhook-stripe/          # Recebe webhooks Stripe
â”œâ”€â”€ calcular-comissoes/      # Calcula 7 tipos de comissÃ£o
â”œâ”€â”€ aprovar-comissoes/       # Admin aprova em lote
â”œâ”€â”€ processar-pagamento-comissoes/  # CRON dia 25
â””â”€â”€ verificar-bonus-ltv/     # CRON mensal bÃ´nus 13 meses
```

#### **RPCs (Remote Procedure Calls)**

```sql
-- RPC principal para cÃ¡lculo transacional
CREATE OR REPLACE FUNCTION executar_calculo_comissoes(
  p_pagamento_id UUID,
  p_cliente_id UUID,
  p_contador_id UUID,
  p_competencia DATE,
  p_comissoes JSONB,
  p_bonus JSONB,
  p_logs JSONB
) RETURNS JSONB AS $$
  -- TransaÃ§Ã£o atÃ´mica garante consistÃªncia
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- FunÃ§Ãµes auxiliares
has_role(user_id UUID, role app_role) RETURNS BOOLEAN;
get_contador_id(user_id UUID) RETURNS UUID;
```

---

### **3. Brevo (Email Transacional)**

**DocumentaÃ§Ã£o**: https://developers.brevo.com/

**Templates NecessÃ¡rios:**
- Boas-vindas contador
- Cliente ativado com sucesso
- ComissÃ£o aprovada
- Saque processado
- Alerta inadimplÃªncia

---

## ğŸ¨ Wireframes e Fluxo de Telas

### **Tela 1: Dashboard de ComissÃµes (/comissoes)**

**Objetivo**: Contador visualiza e gerencia suas comissÃµes.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER: ComissÃµes                                    [Avatar] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  [Filtros: Data InÃ­cio | Data Fim | Status â–¼ | Limpar]          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Provisiona â”‚ â”‚ Aprovadas  â”‚ â”‚ Liberadas  â”‚ â”‚   Total    â”‚  â”‚
â”‚  â”‚ R$ 1.200   â”‚ â”‚ R$ 850     â”‚ â”‚ R$ 3.400   â”‚ â”‚ R$ 5.450   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ DisponÃ­vel para Saque: R$ 850      [Solicitar Saque]       â”‚â”‚
â”‚  â”‚ (MÃ­nimo R$ 100 | Complete dados bancÃ¡rios)                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  [Exportar CSV â†“]                                                â”‚
â”‚                                                                   â”‚
â”‚  Tabs: [Diretas (12)] [Overrides (5)] [BÃ´nus (3)]               â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Cliente          CompetÃªncia   Tipo       Valor    Status   â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ ABC ContÃ¡bil    01/11/2025    AtivaÃ§Ã£o    R$ 130  ğŸŸ¢ Paga  â”‚â”‚
â”‚  â”‚ XYZ ServiÃ§os    01/11/2025    Recorrente  R$ 22   ğŸŸ¡ Aprov â”‚â”‚
â”‚  â”‚ Sponsor JoÃ£o    01/11/2025    Override    R$ 8    ğŸ”µ Calc  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Elementos UI:**
- Cards KPI (shadcn/ui Card)
- Filtros inline (shadcn/ui Input + Select)
- Tabela responsiva (shadcn/ui Table)
- Badges de status (shadcn/ui Badge)
- Modal de saque (shadcn/ui Dialog)

---

### **Tela 2: Rede MLM (/rede)**

**Objetivo**: Visualizar Ã¡rvore genealÃ³gica de indicaÃ§Ãµes.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER: Minha Rede                                   [Avatar] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  EstatÃ­sticas:                                                    â”‚
â”‚  â€¢ Diretos: 5 contadores                                          â”‚
â”‚  â€¢ Indiretos (atÃ© 5 nÃ­veis): 12 contadores                       â”‚
â”‚  â€¢ Total de clientes da rede: 87                                 â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      [VOCÃŠ]                               â”‚  â”‚
â”‚  â”‚                   ğŸ’ Diamante                             â”‚  â”‚
â”‚  â”‚              18 clientes | R$ 4.200/mÃªs                  â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚        â”‚          â”‚           â”‚           â”‚             â”‚  â”‚
â”‚  â”‚     [Maria]    [JoÃ£o]     [Pedro]      [Ana]           â”‚  â”‚
â”‚  â”‚     ğŸ¥‡ Ouro    ğŸ¥ˆ Prata   ğŸ¥‰ Bronze    ğŸ¥‰ Bronze        â”‚  â”‚
â”‚  â”‚     12 cli     7 cli      3 cli        2 cli           â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                    â”‚  â”‚
â”‚  â”‚        [Lucas]   [Carla]                                â”‚  â”‚
â”‚  â”‚        ğŸ¥‰ Bronze ğŸ¥‰ Bronze                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  [Gerar Link de IndicaÃ§Ã£o] [Ver HistÃ³rico]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Elementos UI:**
- Cards hierÃ¡rquicos (custom component com CSS Grid)
- Linhas conectoras (SVG ou CSS borders)
- Tooltips ao hover (shadcn/ui Tooltip)
- Zoom/pan (biblioteca react-zoom-pan-pinch)

---

### **Tela 3: Auditoria Admin (/auditoria-comissoes)**

**Objetivo**: Admin visualiza e aprova comissÃµes.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HEADER: Auditoria de ComissÃµes (ADMIN)              [Avatar] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  Filtros: [CompetÃªncia: 11/2025 â–¼] [Contador: Todos â–¼]         â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Calculadas â”‚ â”‚ Aprovadas  â”‚ â”‚  Pagas     â”‚ â”‚ Canceladas â”‚  â”‚
â”‚  â”‚ R$ 8.450   â”‚ â”‚ R$ 12.300  â”‚ â”‚ R$ 45.600  â”‚ â”‚ R$ 0       â”‚  â”‚
â”‚  â”‚   (42)     â”‚ â”‚   (67)     â”‚ â”‚   (234)    â”‚ â”‚   (0)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â˜ Contador         Tipo       Valor    Status   AÃ§Ã£o       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ â˜‘ Maria Silva      AtivaÃ§Ã£o   R$ 130  ğŸ”µ Calc  [Aprovar]  â”‚â”‚
â”‚  â”‚ â˜‘ JoÃ£o Santos      Override   R$ 8    ğŸ”µ Calc  [Aprovar]  â”‚â”‚
â”‚  â”‚ â˜ Pedro Lima       Recorrente R$ 22   ğŸŸ¡ Aprov [Ver]      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â”‚  [â˜‘ Selecionar Todas] [Aprovar Selecionadas (2)]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Elementos UI:**
- Checkboxes multi-seleÃ§Ã£o (shadcn/ui Checkbox)
- BotÃµes de aÃ§Ã£o em lote (shadcn/ui Button)
- Tabela com paginaÃ§Ã£o (shadcn/ui Table + Pagination)
- Filtros avanÃ§ados (shadcn/ui Select + DatePicker)

---

### **Tela 4: Mini-LP de ConversÃ£o (/lp/:token)** ğŸ¨ **NOVO**

**Objetivo**: Converter cliente via link de indicaÃ§Ã£o com design elegante.

**Paleta de Cores:**
- Preto: `#000000`
- Branco: `#FFFFFF`
- BordÃ´: `#601D1D`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         [Logo Top Class]                         â”‚
â”‚                                                                   â”‚
â”‚                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚
â”‚                                                                   â”‚
â”‚            ğŸ¢ ESCRITÃ“RIO VIRTUAL COMPLETO                        â”‚
â”‚                                                                   â”‚
â”‚         Sua Empresa com EndereÃ§o Premium em Aracaju              â”‚
â”‚                                                                   â”‚
â”‚    âœ“ EndereÃ§o Comercial Fiscal                                   â”‚
â”‚    âœ“ Recebimento de CorrespondÃªncias                             â”‚
â”‚    âœ“ Atendimento TelefÃ´nico Profissional                         â”‚
â”‚    âœ“ Sala de ReuniÃ£o DisponÃ­vel                                  â”‚
â”‚                                                                   â”‚
â”‚                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚
â”‚                                                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚   Plano Pro - R$ 100/mÃªs     â”‚                   â”‚
â”‚              â”‚   âœ“ EscritÃ³rio virtual       â”‚                   â”‚
â”‚              â”‚   âœ“ CorrespondÃªncias         â”‚                   â”‚
â”‚              â”‚   âœ“ Atendimento telefÃ´nico   â”‚                   â”‚
â”‚              â”‚   âœ“ Desconto 20% em salas    â”‚                   â”‚
â”‚              â”‚   [Contratar Pro]            â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚ Plano Premium - R$ 130/mÃªs   â”‚ â­ MAIS POPULAR  â”‚
â”‚              â”‚   âœ“ Tudo do Pro              â”‚                   â”‚
â”‚              â”‚   âœ“ 2h semanais de sala      â”‚                   â”‚
â”‚              â”‚   [Contratar Premium]        â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚   Plano Top - R$ 180/mÃªs     â”‚                   â”‚
â”‚              â”‚   âœ“ Tudo do Pro              â”‚                   â”‚
â”‚              â”‚   âœ“ 5h mensais de sala       â”‚                   â”‚
â”‚              â”‚   [Contratar Top]            â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                   â”‚
â”‚                                                                   â”‚
â”‚              ğŸ OFERTA ESPECIAL - 7 DIAS! ğŸ                    â”‚
â”‚                                                                   â”‚
â”‚         âœ“ 20% de desconto em todas as mensalidades              â”‚
â”‚         âœ“ 50% de cashback na 2Âª mensalidade                     â”‚
â”‚                                                                   â”‚
â”‚              [ğŸ”’ Finalizar com SeguranÃ§a]                        â”‚
â”‚                                                                   â”‚
â”‚                  Pagamento 100% seguro via Stripe                â”‚
â”‚                                                                   â”‚
â”‚                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚
â”‚                                                                   â”‚
â”‚                [Indicado por: JoÃ£o Silva - Contador]            â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Elementos TÃ©cnicos:**
- Background: `bg-black` com overlay `bg-gradient-to-b from-transparent to-[#601D1D]/20`
- Texto: `text-white` com sombra `drop-shadow-lg`
- Cards de plano: `bg-white/10 backdrop-blur-md border border-white/20`
- BotÃµes: `bg-[#601D1D] hover:bg-[#601D1D]/80 text-white`
- CTA principal: `text-xl font-bold animate-pulse`
- Selo "Mais Popular": `bg-gradient-to-r from-yellow-400 to-yellow-600`
- TransiÃ§Ãµes: `framer-motion` para entrada suave dos cards

**Fluxo:**
1. Cliente clica em "Contratar [Plano]"
2. Stripe Checkout abre com plano prÃ©-selecionado
3. Cookie `indicacao_token` rastreia atÃ© conversÃ£o
4. ValidaÃ§Ã£o de 7 dias para aplicar incentivos

---

## ğŸ“ Outras ObservaÃ§Ãµes Importantes

### **DecisÃµes Arquiteturais**

1. **Edge Functions vs RLS**
   - RLS: SeguranÃ§a de leitura (SELECT)
   - Edge Functions: LÃ³gica de negÃ³cio complexa (INSERT/UPDATE)
   - Ambos trabalham juntos

2. **Stripe vs ASAAS**
   - Stripe: Gateway principal (internacional, confiÃ¡vel)
   - ASAAS: Fallback brasileiro (PIX, boleto)

3. **CRON vs Webhooks**
   - Webhooks: Tempo real (pagamentos)
   - CRON: Agendado (dia 25, bÃ´nus LTV)

4. **Client-side vs Server-side**
   - React: RenderizaÃ§Ã£o client-side (Vite)
   - ValidaÃ§Ã£o: Server-side (Edge Functions + RLS)

---

**PrÃ³xima SeÃ§Ã£o**: [4 - CriaÃ§Ã£o Interativa](#4---criaÃ§Ã£o-interativa)

---

# 4 - CriaÃ§Ã£o Interativa

## ğŸ‘‰ Porque essa etapa Ã© importante?

Este Ã© o momento de transformar o planejamento em realidade: aqui colocamos a mÃ£o na massa e comeÃ§amos a construir a soluÃ§Ã£o. Com base em toda a arquitetura definida, desenvolva as telas, fluxos, integraÃ§Ãµes, banco de dados e automaÃ§Ãµes, usando ferramentas modernas e apoio da IA para acelerar e refinar o processo. Ã‰ onde o projeto ganha vida.

---

## â˜‘ï¸ Checklist Geral

<details>
<summary><strong>ğŸ”§ Ferramentas para ajudar nessa etapa</strong></summary>

- **Desenvolvimento**: Cursor Pro + GitHub Copilot
- **Prototipagem**: Lovable (opcional para UI rÃ¡pida)
- **Versionamento**: Git + GitHub
- **Deploy**: Netlify (frontend) + Supabase (backend)
- **Testes**: Vitest + Testing Library
- **Emails**: Brevo
- **Pagamentos**: Stripe Dashboard

</details>

---

## ğŸ“¦ MÃ³dulo 1: FundaÃ§Ãµes e ProtÃ³tipo

**Objetivo**: Configurar base do projeto e estrutura inicial

### âœ… Checklist MÃ³dulo 1

- [x] **1.1** Clonar repositÃ³rio base ou criar projeto Vite/React
  ```bash
  pnpm create vite lovable-celite --template react-ts
  cd lovable-celite
  pnpm install
  ```

- [x] **1.2** Instalar dependÃªncias principais
  ```bash
  pnpm add @supabase/supabase-js @tanstack/react-query
  pnpm add react-router-dom framer-motion zod
  pnpm add @radix-ui/react-* # Shadcn/UI dependencies
  pnpm add tailwindcss postcss autoprefixer
  pnpm add lucide-react recharts date-fns
  ```

- [x] **1.3** Configurar Tailwind CSS + Design System
  - Adicionar cores do brand (#0C1A2A, #F4C430)
  - Configurar fontes (Inter para texto, Serif para tÃ­tulos)
  - Criar arquivo `globals.css` com variÃ¡veis CSS

- [x] **1.4** Configurar GitHub + CI/CD
  - Criar repositÃ³rio GitHub
  - Adicionar `.gitignore` (node_modules, .env)
  - Configurar branch protection (main)
  - Conectar com Netlify para deploy automÃ¡tico

- [x] **1.5** Refatorar estrutura de pastas
  ```
  src/
  â”œâ”€â”€ components/     # Shadcn/UI components
  â”œâ”€â”€ pages/          # Pages (Dashboard, Comissoes, etc)
  â”œâ”€â”€ hooks/          # useAuth, useQuery customizados
  â”œâ”€â”€ lib/            # UtilitÃ¡rios (commission, filters, csv)
  â”œâ”€â”€ integrations/   # Supabase client
  â””â”€â”€ types/          # TypeScript types
  ```

---

## ğŸ—„ï¸ MÃ³dulo 2: Backend e SeguranÃ§a

**Objetivo**: Configurar Supabase, schema, RLS e auth

### âœ… Checklist MÃ³dulo 2

- [ ] **2.1** Criar projeto Supabase
  - Acessar https://supabase.com/dashboard
  - Criar novo projeto: `lovable-celite-prod`
  - Copiar URL + anon key + service_role key
  - Salvar em `.env.local`

- [x] **2.2** Conectar Supabase ao projeto
  ```typescript
  // src/integrations/supabase/client.ts
  import { createClient } from '@supabase/supabase-js';
  
  const SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;
  const SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;
  
  export const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {
    auth: {
      storage: localStorage,
      persistSession: true,
      autoRefreshToken: true,
    }
  });
  ```

- [x] **2.3** Criar migrations (schema completo)
  - Migration 1: ENUMs (tipo_comissao, status_comissao, nivel_contador)
  - Migration 2: Tabelas base (profiles, contadores, clientes)
  - Migration 3: Sistema MLM (rede_contadores, indicacoes, invites)
  - Migration 4: ComissÃµes (pagamentos, comissoes, bonus_historico)
  - Migration 5: Adicionar solicitacoes_saque
  - Migration 6: Ãndices de performance
  - Migration 7: Triggers (handle_new_user, atualizar_clientes_ativos)

- [x] **2.4** Configurar RLS (Row Level Security)
  ```sql
  -- Exemplo: Policy para comissoes
  CREATE POLICY "Contadores view own comissoes" 
  ON comissoes FOR SELECT
  USING (
    contador_id = get_contador_id(auth.uid()) 
    OR has_role(auth.uid(), 'admin')
  );
  ```
  - Policy para profiles (prÃ³prio usuÃ¡rio)
  - Policy para contadores (prÃ³prio + admin)
  - Policy para clientes (contador responsÃ¡vel + admin)
  - Policy para comissoes (contador + admin)
  - Policy para pagamentos (via cliente â†’ contador)

- [x] **2.5** Criar RPCs auxiliares
  ```sql
  -- has_role: Verifica se user tem role especÃ­fica
  CREATE OR REPLACE FUNCTION has_role(
    _user_id UUID, 
    _role app_role
  ) RETURNS BOOLEAN AS $$
    SELECT EXISTS (
      SELECT 1 FROM user_roles 
      WHERE user_id = _user_id AND role = _role
    );
  $$ LANGUAGE sql STABLE SECURITY DEFINER;
  
  -- get_contador_id: Retorna contador_id de um user
  CREATE OR REPLACE FUNCTION get_contador_id(
    _user_id UUID
  ) RETURNS UUID AS $$
    SELECT id FROM contadores 
    WHERE user_id = _user_id LIMIT 1;
  $$ LANGUAGE sql STABLE SECURITY DEFINER;
  ```

- [ ] **2.6** Criar pÃ¡ginas de autenticaÃ§Ã£o
  - `/auth` - Login + Signup integrados
  - `/reset-password` - RecuperaÃ§Ã£o de senha
  - Hook `useAuth` com Supabase Auth
  - Componente `<ProtectedRoute>` para rotas privadas

---

## ğŸ’° MÃ³dulo 3: IntegraÃ§Ã£o Stripe

**Objetivo**: Configurar produtos, subscriptions e webhooks

### âœ… Checklist MÃ³dulo 3

- [ ] **3.1** Configurar conta Stripe
  - Criar conta em https://stripe.com/
  - Ativar modo teste
  - Copiar Secret Key + Publishable Key
  - Salvar em `.env`

- [ ] **3.2** Criar produtos no Stripe Dashboard
  - Produto 1: Contabilidade BÃ¡sica - R$130/mÃªs
  - Produto 2: Contabilidade Profissional - R$280/mÃªs
  - Produto 3: Contabilidade Premium - R$450/mÃªs
  - Copiar `price_id` de cada um

- [ ] **3.3** Instalar Stripe SDK
  ```bash
  pnpm add @stripe/stripe-js stripe
  ```

- [ ] **3.4** Criar Edge Function: `webhook-stripe`
  ```bash
  supabase functions new webhook-stripe
  ```
  - Validar assinatura MD5 do webhook
  - Processar evento `invoice.payment_succeeded`
  - Registrar pagamento em `pagamentos` table
  - Invocar `calcular-comissoes`
  - IdempotÃªncia via `stripe_payment_id` UNIQUE

- [ ] **3.5** Configurar webhooks no Stripe Dashboard
  - Endpoint: `https://[supabase-url]/functions/v1/webhook-stripe`
  - Eventos selecionados:
    - `invoice.payment_succeeded` âœ…
    - `customer.subscription.created` âœ…
    - `customer.subscription.deleted` âš ï¸
    - `invoice.payment_failed` âš ï¸
  - Copiar webhook secret para `.env`

- [ ] **3.6** Criar Checkout Page
  - PÃ¡gina `/checkout` com seleÃ§Ã£o de plano
  - Stripe Elements para formulÃ¡rio de pagamento
  - Success URL: `/dashboard?payment=success`
  - Cancel URL: `/checkout?canceled=true`

- [ ] **3.7** Implementar Customer Portal
  - Link para Stripe Customer Portal
  - Permitir upgrade/downgrade de plano
  - Gerenciar mÃ©todos de pagamento
  - Ver histÃ³rico de faturas

---

## ğŸ¤– MÃ³dulo 4: Sistema de ComissÃµes

**Objetivo**: Implementar cÃ¡lculo automÃ¡tico de comissÃµes

### âœ… Checklist MÃ³dulo 4

- [x] **4.1** Criar RPC transacional: `executar_calculo_comissoes`
  ```sql
  CREATE OR REPLACE FUNCTION executar_calculo_comissoes(
    p_pagamento_id UUID,
    p_cliente_id UUID,
    p_contador_id UUID,
    p_competencia DATE,
    p_comissoes JSONB,
    p_bonus JSONB,
    p_logs JSONB
  ) RETURNS JSONB AS $$
    -- INSERT INTO comissoes ...
    -- INSERT INTO bonus_historico ...
    -- INSERT INTO comissoes_calculo_log ...
    -- RETURN resultado
  $$ LANGUAGE plpgsql SECURITY DEFINER;
  ```

- [x] **4.2** Criar Edge Function: `calcular-comissoes`
  - Recebe: `pagamento_id`, `cliente_id`, `contador_id`, `valor_liquido`, `competencia`
  - Calcula:
    1. ComissÃ£o direta (ativaÃ§Ã£o 100% ou recorrente 15-20%)
    2. Override sponsor (3-5% se houver)
    3. BÃ´nus progressÃ£o (R$100 aos marcos 5, 10, 15)
    4. BÃ´nus volume (R$100 a cada 5 apÃ³s 15)
    5. BÃ´nus contador (R$50 se 1Âº cliente do downline)
  - Invoca RPC `executar_calculo_comissoes` (transacional)
  - Retorna resumo com IDs criados

- [ ] **4.3** Testes unitÃ¡rios de cÃ¡lculo
  ```typescript
  // src/lib/__tests__/commission.test.ts
  describe('calculateDirectCommission', () => {
    it('calcula 100% para ativaÃ§Ã£o', () => {
      expect(calculateDirectCommission(130, true)).toBe(130);
    });
    
    it('calcula 15% bronze recorrente', () => {
      expect(calculateDirectCommission(130, false, 'bronze')).toBe(19.5);
    });
  });
  ```

- [x] **4.4** Criar lib de utilidades: `commission.ts`
  ```typescript
  export function calculateTotalCommissions(comissoes: Comissao[]): number;
  export function calculatePaidCommissions(comissoes: Comissao[]): number;
  export function formatCurrency(value: number): string;
  export function validateCommissionData(data: unknown): boolean;
  ```

---

## ğŸ“Š MÃ³dulo 5: Frontend - Dashboard de ComissÃµes

**Objetivo**: Criar interface principal para contadores

### âœ… Checklist MÃ³dulo 5

- [x] **5.1** Criar pÃ¡gina `/comissoes`
  - Header com tÃ­tulo + avatar
  - Filtros: Data inÃ­cio, Data fim, Status (select)
  - 4 Cards KPI:
    - Provisionadas (status: calculada)
    - Aprovadas (status: aprovada)
    - Liberadas (status: paga)
    - Total (soma tudo)
  - Card "DisponÃ­vel para Saque" com botÃ£o
  - BotÃ£o "Exportar CSV"

- [x] **5.2** Implementar tabela de comissÃµes
  - Tabs: Diretas / Overrides / BÃ´nus
  - Colunas: Cliente, CompetÃªncia, Tipo, Valor, Status
  - PaginaÃ§Ã£o (50 itens por pÃ¡gina)
  - Sorting por coluna (client-side)
  - Badge de status com cores:
    - calculada: Azul ğŸ”µ
    - aprovada: Amarelo ğŸŸ¡
    - paga: Verde ğŸŸ¢
    - cancelada: Vermelho ğŸ”´

- [x] **5.3** Implementar filtros
  - Hook personalizado `useCommissionFilters`
  - Lib `filters.ts`:
    ```typescript
    export function filterByDateRange(items, startDate, endDate);
    export function filterByStatus(items, status);
    export function filterByMultipleCriteria(items, filters);
    ```

- [x] **5.4** Implementar exportaÃ§Ã£o CSV
  - Lib `csv.ts`:
    ```typescript
    export function convertToCSV(rows, headers);
    export function downloadCSV(csv, filename);
    export function generateCSVFilename(prefix);
    ```
  - Formato: `comissoes-2025-11-19.csv`

- [x] **5.5** Implementar modal de solicitaÃ§Ã£o de saque
  - ValidaÃ§Ã£o: Total >= R$100
  - ValidaÃ§Ã£o: Dados bancÃ¡rios preenchidos
  - Preview dos dados (PIX ou transferÃªncia)
  - ConfirmaÃ§Ã£o com checkbox
  - POST para `solicitacoes_saque` table
  - Toast de sucesso/erro

- [x] **5.6** Adicionar animaÃ§Ãµes (framer-motion)
  ```tsx
  <motion.div
    initial={{ opacity: 0, y: 20 }}
    animate={{ opacity: 1, y: 0 }}
    transition={{ duration: 0.5 }}
  >
    {/* ConteÃºdo */}
  </motion.div>
  ```

---

## ğŸ‘¥ MÃ³dulo 6: Frontend - Rede MLM

**Objetivo**: Visualizar Ã¡rvore genealÃ³gica

### âœ… Checklist MÃ³dulo 6

- [ ] **6.1** Criar pÃ¡gina `/rede`
  - Header com estatÃ­sticas:
    - Diretos (nivel_rede = 1)
    - Indiretos (nivel_rede > 1)
    - Total de clientes da rede

- [ ] **6.2** Implementar visualizaÃ§Ã£o hierÃ¡rquica
  - Componente `<NetworkTree>`
  - Biblioteca sugerida: `react-organizational-chart` ou custom
  - Cada nÃ³ mostra:
    - Nome do contador
    - NÃ­vel (Bronze/Prata/Ouro/Diamante)
    - Quantidade de clientes
    - ComissÃµes totais do mÃªs
  - Linhas conectoras entre sponsor e downline

- [ ] **6.3** Adicionar interatividade
  - Hover mostra tooltip com detalhes
  - Click abre modal com histÃ³rico do contador
  - Zoom in/out (opcional)

- [ ] **6.4** Criar pÃ¡gina `/links`
  - GeraÃ§Ã£o de link de indicaÃ§Ã£o Ãºnico (`/i/:token` e `/r/:token`)
  - Token HMAC SHA-256 com TTL de 7 dias
  - Copiar para clipboard
  - QR Code (biblioteca `qrcode.react`)
  - HistÃ³rico de cliques e conversÃµes
  - Seletor de fluxo: `?flow=lp` ou `?flow=checkout`

---

## ğŸ® MÃ³dulo 12: Simulador de Crescimento

**Objetivo**: Estimular engajamento e fidelizaÃ§Ã£o com projeÃ§Ãµes realistas

### âœ… Checklist MÃ³dulo 12

- [ ] **12.1** Criar pÃ¡gina `/simulador`
  - Header: "Projete Seus Ganhos Futuros"
  - DescriÃ§Ã£o: Calcule quanto vocÃª pode ganhar nos prÃ³ximos 12 meses

- [ ] **12.2** Implementar formulÃ¡rio de inputs
  - **Clientes/mÃªs**: Slider (0-10)
  - **Valor mÃ©dio**: Select (Pro R$100, Premium R$130, Top R$180)
  - **Contadores convidados**: Number (0-5)
  - **Produtividade da rede**: Slider (0-100%)
  - BotÃ£o "Simular 3 CenÃ¡rios"

- [ ] **12.3** Criar RPC `simulador_crescimento`
  ```sql
  CREATE OR REPLACE FUNCTION simulador_crescimento(
    p_user_id UUID,
    p_clientes_mes INTEGER,
    p_valor_medio NUMERIC,
    p_contadores_rede INTEGER,
    p_produtividade_rede NUMERIC
  ) RETURNS JSONB AS $$
  DECLARE
    v_resultado JSONB;
  BEGIN
    -- CenÃ¡rio Conservador: +3%/mÃªs, conversÃ£o 40%, churn 10%
    -- CenÃ¡rio Realista: +6%/mÃªs, conversÃ£o 60%, churn 7%
    -- CenÃ¡rio Otimista: +10%/mÃªs, conversÃ£o 75%, churn 5%
    
    -- FÃ³rmula: ganhos_total = (C * P * r_direta) + (R * P * r_override) + bonus
    -- C = clientes ativos
    -- P = valor mÃ©dio
    -- r_direta = 15-20% (nÃ­vel do contador)
    -- R = clientes da rede
    -- r_override = 3-5%
    
    -- Retorna: [{ mes: 1, ganho_direto: X, ganho_override: Y, bonus: Z, total: W }, ...]
    RETURN v_resultado;
  END;
  $$ LANGUAGE plpgsql SECURITY DEFINER;
  ```

- [ ] **12.4** Implementar grÃ¡fico de linha (Chart.js ou Recharts)
  - Eixo X: MÃªs (1-12)
  - Eixo Y: Ganho total (R$)
  - 3 linhas: Conservador (vermelho), Realista (azul), Otimista (verde)
  - Tooltip com detalhamento (direto + override + bÃ´nus)

- [ ] **12.5** Adicionar cards de resultado
  - **Conservador**: Total 12 meses + insights
  - **Realista**: Total 12 meses + insights
  - **Otimista**: Total 12 meses + insights
  - CTA: "Quero atingir esse resultado!" â†’ Link para `/links` (gerar convites)

- [ ] **12.6** Salvar simulaÃ§Ãµes em histÃ³rico
  - Tabela `simulacoes`:
    ```sql
    CREATE TABLE simulacoes (
      id UUID PRIMARY KEY,
      contador_id UUID REFERENCES contadores(id),
      input_params JSONB,
      resultado JSONB,
      created_at TIMESTAMPTZ DEFAULT now()
    );
    ```
  - Permitir comparar simulaÃ§Ãµes antigas com resultado real

---

## ğŸ† MÃ³dulo 13: GamificaÃ§Ã£o e Engajamento

**Objetivo**: Aumentar retenÃ§Ã£o e motivaÃ§Ã£o com sistema de XP, badges e ranking

### âœ… Checklist MÃ³dulo 13

- [ ] **13.1** Criar tabela `contador_xp`
  ```sql
  CREATE TABLE contador_xp (
    contador_id UUID PRIMARY KEY REFERENCES contadores(id),
    xp_total INTEGER DEFAULT 0,
    nivel INTEGER DEFAULT 1,
    xp_proximo_nivel INTEGER DEFAULT 100,
    updated_at TIMESTAMPTZ DEFAULT now()
  );
  ```

- [ ] **13.2** Implementar sistema de XP
  - **+10 XP**: Cliente ativado
  - **+20 XP**: Contador indicado
  - **+50 XP**: BÃ´nus conquistado (progressÃ£o, volume, LTV)
  - **+5 XP**: Login diÃ¡rio (streak bonus)
  - FÃ³rmula de nÃ­vel: `xp_proximo_nivel = 100 * (nivel ^ 1.5)`

- [ ] **13.3** Criar tabela `conquistas`
  ```sql
  CREATE TABLE conquistas (
    id UUID PRIMARY KEY,
    nome TEXT NOT NULL, -- "Primeira Venda", "10 Clientes"
    descricao TEXT,
    requisito_xp INTEGER,
    icone_url TEXT,
    tipo VARCHAR(50), -- 'bronze', 'prata', 'ouro', 'diamante'
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT now()
  );
  ```

- [ ] **13.4** Criar tabela `contador_conquistas`
  ```sql
  CREATE TABLE contador_conquistas (
    id UUID PRIMARY KEY,
    contador_id UUID REFERENCES contadores(id),
    conquista_id UUID REFERENCES conquistas(id),
    desbloqueado_em TIMESTAMPTZ DEFAULT now(),
    UNIQUE(contador_id, conquista_id)
  );
  ```

- [ ] **13.5** Criar conquistas iniciais (seed data)
  ```sql
  INSERT INTO conquistas (nome, descricao, requisito_xp, tipo) VALUES
    ('Primeiro Cliente', 'Ative seu primeiro cliente', 10, 'bronze'),
    ('Contador Parceiro', 'Indique outro contador', 20, 'bronze'),
    ('Prata Conquistado', 'Atinja o nÃ­vel Prata (5 clientes)', 50, 'prata'),
    ('Ouro Conquistado', 'Atinja o nÃ­vel Ouro (10 clientes)', 100, 'ouro'),
    ('Diamante Eterno', 'Atinja o nÃ­vel Diamante (15 clientes)', 150, 'diamante'),
    ('Mestre da Rede', 'Tenha 5 contadores na sua rede', 100, 'ouro'),
    ('RetenÃ§Ã£o Perfeita', '90% de retenÃ§Ã£o por 6 meses', 200, 'diamante');
  ```

- [ ] **13.6** Criar pÃ¡gina `/ranking`
  - **Ranking Mensal**: Soma de comissÃµes + bÃ´nus LTV do mÃªs
  - **Top 10**: Nome, Avatar, XP, ComissÃµes do MÃªs
  - **Sua PosiÃ§Ã£o**: Destaque visual
  - Filtros: "MÃªs Atual" | "Ãšltimo Trimestre" | "Ano Completo"

- [ ] **13.7** Implementar barras de progresso
  - Componente `<ProgressBar>`:
    ```tsx
    const progresso = (clientes_ativos / meta_tier) * 100;
    <div className="w-full bg-gray-200 rounded-full h-4">
      <div 
        className="bg-gradient-to-r from-blue-500 to-green-500 h-4 rounded-full"
        style={{ width: `${progresso}%` }}
      />
    </div>
    <p>{clientes_ativos} / {meta_tier} clientes</p>
    ```
  - Mostrar em Dashboard, Perfil e ComissÃµes

- [ ] **13.8** Integrar Push Notifications (Firebase)
  - Instalar Firebase SDK:
    ```bash
    pnpm add firebase
    ```
  - Configurar `firebase-config.ts`:
    ```typescript
    import { initializeApp } from 'firebase/app';
    import { getMessaging } from 'firebase/messaging';
    
    const firebaseConfig = {
      apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
      projectId: 'celite-app',
      messagingSenderId: '...',
      appId: '...',
    };
    
    const app = initializeApp(firebaseConfig);
    export const messaging = getMessaging(app);
    ```

- [ ] **13.9** Criar Edge Function `enviar-notificacao`
  ```typescript
  // POST /functions/v1/enviar-notificacao
  // Body: { user_id, title, body, data }
  
  import admin from 'firebase-admin';
  
  const serviceAccount = JSON.parse(
    Deno.env.get('FIREBASE_SERVICE_ACCOUNT') || '{}'
  );
  
  admin.initializeApp({
    credential: admin.credential.cert(serviceAccount),
  });
  
  export async function enviarNotificacao(
    fcm_token: string,
    title: string,
    body: string,
    data?: Record<string, string>
  ) {
    await admin.messaging().send({
      token: fcm_token,
      notification: { title, body },
      data,
    });
  }
  ```

- [ ] **13.10** Configurar triggers de notificaÃ§Ãµes
  - **Evento**: Pagamento confirmado â†’ "ğŸ’° VocÃª recebeu uma comissÃ£o de R$X!"
  - **Evento**: Novo nÃ­vel atingido â†’ "ğŸ‰ ParabÃ©ns! VocÃª Ã© agora {nÃ­vel}!"
  - **Evento**: Meta semanal â†’ "ğŸ“Š Faltam 2 clientes para Ouro!"
  - **Evento**: TIER warning â†’ "âš ï¸ AtenÃ§Ã£o: performance abaixo do mÃ­nimo"
  - **Evento**: Lead Diamante â†’ "ğŸ Seu Lead Diamante estÃ¡ disponÃ­vel!"

- [ ] **13.11** Criar RPC `resgatar_bonus`
  ```sql
  CREATE OR REPLACE FUNCTION resgatar_bonus(
    p_bonus_id UUID,
    p_contador_id UUID
  ) RETURNS JSONB AS $$
  BEGIN
    -- Valida se bÃ´nus existe e estÃ¡ disponÃ­vel
    -- Atualiza status: 'disponivel' â†’ 'resgatado'
    -- Cria log em audit_logs
    -- Retorna confirmaÃ§Ã£o
    RETURN jsonb_build_object('success', true, 'valor', valor_bonus);
  END;
  $$ LANGUAGE plpgsql SECURITY DEFINER;
  ```

- [ ] **13.12** Criar mÃ³dulo de eventos presenciais
  - Tabela `eventos`:
    ```sql
    CREATE TABLE eventos (
      id UUID PRIMARY KEY,
      nome TEXT NOT NULL,
      descricao TEXT,
      data_evento DATE NOT NULL,
      local TEXT,
      capacidade INTEGER,
      inscritos INTEGER DEFAULT 0,
      qr_code TEXT, -- Check-in QR code
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMPTZ DEFAULT now()
    );
    ```
  - Tabela `evento_participantes`:
    ```sql
    CREATE TABLE evento_participantes (
      id UUID PRIMARY KEY,
      evento_id UUID REFERENCES eventos(id),
      contador_id UUID REFERENCES contadores(id),
      check_in_realizado BOOLEAN DEFAULT false,
      check_in_em TIMESTAMPTZ,
      UNIQUE(evento_id, contador_id)
    );
    ```
  - PÃ¡gina `/eventos` com lista e inscriÃ§Ã£o
  - QR Code Ãºnico por participante para check-in

---

## ğŸ”” MÃ³dulo 14: Sistema de Alertas e NotificaÃ§Ãµes Push

**Objetivo**: Acompanhamento proativo e retenÃ§Ã£o de contadores

### âœ… Checklist MÃ³dulo 14

- [ ] **14.1** Criar tabela `alertas_configuracao`
  ```sql
  CREATE TABLE alertas_configuracao (
    id UUID PRIMARY KEY,
    tipo_alerta VARCHAR(50) NOT NULL, -- 'onboarding', 'tier_warning', 'meta_semanal'
    titulo_template TEXT,
    mensagem_template TEXT,
    condicao_trigger JSONB, -- { "field": "indicacoes_ano", "operator": "<", "value": 2 }
    ano_programa INTEGER, -- 1 para Ano 1, 2+ para Ano 2+
    mes_trigger INTEGER, -- MÃªs especÃ­fico (4, 6, 9 para Ano 1)
    is_active BOOLEAN DEFAULT true
  );
  ```

- [ ] **14.2** Seed de alertas Ano 1 (Onboarding Intensivo)
  ```sql
  INSERT INTO alertas_configuracao (tipo_alerta, titulo_template, mensagem_template, ano_programa, mes_trigger, condicao_trigger) VALUES
    ('onboarding_mes4', 
     'Vamos conversar? ğŸ“', 
     'OlÃ¡ {nome}! Notamos que vocÃª ainda nÃ£o atingiu 2 indicaÃ§Ãµes. Vamos marcar uma ligaÃ§Ã£o pessoal para te ajudar?',
     1, 4, 
     '{"field": "indicacoes_ano", "operator": "<", "value": 2}'),
    
    ('onboarding_mes6',
     'Consultoria 1:1 Gratuita! ğŸ“',
     '{nome}, preparamos uma consultoria personalizada para vocÃª. Agende agora!',
     1, 6,
     '{"field": "indicacoes_ano", "operator": "<", "value": 2}'),
    
    ('onboarding_mes9',
     'Oferta Especial: Meta 3 em 60! ğŸ¯',
     'Desafio especial: traga 3 clientes nos prÃ³ximos 60 dias e ganhe bÃ´nus extra!',
     1, 9,
     '{"field": "indicacoes_ano", "operator": "<", "value": 3}');
  ```

- [ ] **14.3** Seed de alertas Ano 2+ (Acompanhamento)
  ```sql
  INSERT INTO alertas_configuracao (tipo_alerta, titulo_template, mensagem_template, ano_programa, condicao_trigger) VALUES
    ('checkup_trimestral',
     'Check-in Trimestral ğŸ“Š',
     'OlÃ¡ {nome}! Como vÃ£o seus resultados? Estamos aqui para ajudar.',
     2,
     '{"field": "mes_corrente", "operator": "in", "value": [3, 6, 9, 12]}'),
    
    ('tier_warning_7pct',
     'âš ï¸ AtenÃ§Ã£o: Performance Abaixo do Esperado',
     '{nome}, vocÃª nÃ£o atingiu a performance mÃ­nima. Sua comissÃ£o foi reduzida para 7%. Vamos te ajudar a reativar!',
     2,
     '{"field": "tier_status", "operator": "=", "value": "tier_1"}');
  ```

- [ ] **14.4** Criar CRON de alertas proativos
  ```sql
  SELECT cron.schedule(
    'processar-alertas-proativos',
    '0 9 * * *', -- Todo dia Ã s 9h
    $$
    SELECT net.http_post(
      url:='https://[supabase-url]/functions/v1/processar-alertas',
      headers:='{"Content-Type": "application/json", "Authorization": "Bearer [SERVICE_KEY]"}'::jsonb,
      body:='{}'::jsonb
    ) AS request_id;
    $$
  );
  ```

- [ ] **14.5** Criar Edge Function `processar-alertas`
  ```typescript
  // Busca contadores elegÃ­veis para cada tipo de alerta
  // Valida condiÃ§Ãµes (indicacoes_ano, tier_status, etc)
  // Envia push notification via Firebase
  // Cria registro em tabela alertas_enviados
  // Cria tarefa para admin (ligaÃ§Ã£o, consultoria)
  ```

- [ ] **14.6** Criar tabela `alertas_enviados`
  ```sql
  CREATE TABLE alertas_enviados (
    id UUID PRIMARY KEY,
    contador_id UUID REFERENCES contadores(id),
    alerta_config_id UUID REFERENCES alertas_configuracao(id),
    enviado_em TIMESTAMPTZ DEFAULT now(),
    lido BOOLEAN DEFAULT false,
    lido_em TIMESTAMPTZ,
    acao_tomada VARCHAR(50), -- 'ligacao_agendada', 'consultoria_agendada', 'ignorado'
    notas TEXT
  );
  ```

- [ ] **14.7** Adicionar consentimento LGPD
  - Campo em `profiles`:
    ```sql
    ALTER TABLE profiles 
    ADD COLUMN aceite_notificacoes BOOLEAN DEFAULT false;
    ```
  - Checkbox no onboarding: "Desejo receber notificaÃ§Ãµes push"
  - SÃ³ envia para quem aceitou

---

## ğŸ›¡ï¸ MÃ³dulo 7: Frontend - Painel Admin

**Objetivo**: Interface para aprovaÃ§Ã£o de comissÃµes

### âœ… Checklist MÃ³dulo 7 (Parcial)

- [x] **7.1** Criar pÃ¡gina `/auditoria-comissoes`
  - AcessÃ­vel apenas para `has_role('admin')`
  - Cards KPI:
    - Calculadas (pendentes)
    - Aprovadas (aguardando pagamento)
    - Pagas (concluÃ­das)
    - Canceladas

- [x] **7.2** Implementar tabela com seleÃ§Ã£o mÃºltipla
  - Checkbox na primeira coluna
  - Colunas: Contador, Tipo, Valor, Status, AÃ§Ã£o
  - BotÃ£o "Aprovar Selecionadas" (lote)
  - Filtros: CompetÃªncia, Contador

- [ ] **7.3** Criar Edge Function: `aprovar-comissoes`
  ```typescript
  // POST /functions/v1/aprovar-comissoes
  // Body: { comissao_ids: UUID[], observacao?: string }
  // Response: { approved_count: number }
  ```

- [ ] **7.4** Integrar frontend com edge function
  - Mutation com React Query
  - Toast de sucesso: "X comissÃµes aprovadas"
  - Invalidar cache: `queryClient.invalidateQueries(['comissoes'])`

- [ ] **7.5** Criar pÃ¡gina `/admin/withdrawals`
  - Listar solicitaÃ§Ãµes de saque pendentes
  - Aprovar/Rejeitar individualmente
  - Processar pagamento via Stripe Connect

---

## â° MÃ³dulo 8: CRON Jobs

**Objetivo**: AutomaÃ§Ãµes agendadas

### âœ… Checklist MÃ³dulo 8 (Parcial)

- [x] **8.1** Criar Edge Function: `processar-pagamento-comissoes`
  - Busca comissÃµes `status='aprovada'` da competÃªncia
  - Agrupa por `contador_id`
  - Valida: `SUM(valor) >= 100`
  - Stripe Payout (ou PIX via integraÃ§Ã£o)
  - Atualiza `status='paga'` + `pago_em=NOW()`
  - Envia email via Brevo

- [x] **8.2** Criar Edge Function: `verificar-bonus-ltv`
  - Busca clientes com `data_ativacao = CURRENT_DATE - INTERVAL '13 months'`
  - Agrupa por `contador_id` + `mÃªs_ativacao`
  - Verifica: `COUNT(*) WHERE status='ativo' >= 5`
  - Calcula percentual: 15% (5-9), 30% (10-14), 50% (15+)
  - Cria comissÃ£o `tipo='bonus_ltv'` + `status='calculada'`

- [ ] **8.3** Configurar CRON no Supabase SQL Editor
  ```sql
  -- CRON 1: Processar pagamentos dia 25
  SELECT cron.schedule(
    'processar-pagamentos-dia-25',
    '0 9 25 * *',
    $$
    SELECT net.http_post(
      url:='https://[supabase-url]/functions/v1/processar-pagamento-comissoes',
      headers:='{"Content-Type": "application/json", "Authorization": "Bearer [SERVICE_KEY]"}'::jsonb,
      body:='{}'::jsonb
    ) AS request_id;
    $$
  );
  
  -- CRON 2: BÃ´nus LTV dia 1 do mÃªs
  SELECT cron.schedule(
    'verificar-bonus-ltv-grupo',
    '0 10 1 * *',
    $$
    SELECT net.http_post(
      url:='https://[supabase-url]/functions/v1/verificar-bonus-ltv',
      headers:='{"Content-Type": "application/json", "Authorization": "Bearer [SERVICE_KEY]"}'::jsonb,
      body:='{}'::jsonb
    ) AS request_id;
    $$
  );
  ```

- [ ] **8.4** Testar execuÃ§Ã£o manual dos CRONs
  ```bash
  # Via curl
  curl -X POST https://[supabase-url]/functions/v1/processar-pagamento-comissoes \
    -H "Authorization: Bearer [SERVICE_KEY]" \
    -H "Content-Type: application/json"
  ```

---

## ğŸ“§ MÃ³dulo 9: Emails Transacionais

**Objetivo**: ComunicaÃ§Ã£o automÃ¡tica

### âœ… Checklist MÃ³dulo 9

- [ ] **9.1** Criar conta Brevo
  - Acessar https://www.brevo.com/
  - Criar conta Free (300 emails/dia)
  - Verificar domÃ­nio (DNS)
  - Copiar API Key

- [ ] **9.2** Criar templates de email
  - Template 1: Boas-vindas contador
  - Template 2: Cliente ativado
  - Template 3: ComissÃ£o aprovada
  - Template 4: Saque processado
  - Template 5: Alerta inadimplÃªncia

- [ ] **9.3** Integrar Brevo no backend
  ```typescript
  // Edge Function helper
  import { sendTransactionalEmail } from './brevo-client.ts';
  
  await sendTransactionalEmail({
    to: 'contador@email.com',
    templateId: 1, // ID do Brevo
    params: {
      nome: 'JoÃ£o',
      valor: 'R$ 1.200,00',
    },
  });
  ```

- [ ] **9.4** Disparar emails nos eventos
  - Novo cadastro â†’ Boas-vindas
  - Cliente ativado â†’ NotificaÃ§Ã£o contador
  - ComissÃ£o aprovada â†’ NotificaÃ§Ã£o contador
  - Saque processado â†’ Comprovante
  - InadimplÃªncia â†’ Alerta

---

## ğŸ§ª MÃ³dulo 10: Testes

**Objetivo**: Garantir qualidade

### âœ… Checklist MÃ³dulo 10 (Parcial)

- [x] **10.1** Configurar Vitest
  ```bash
  pnpm add -D vitest @testing-library/react @testing-library/jest-dom jsdom
  ```

- [x] **10.2** Criar testes unitÃ¡rios
  - `src/lib/__tests__/commission.test.ts` âœ…
  - `src/lib/__tests__/filters.test.ts` âœ…
  - `src/lib/__tests__/csv.test.ts` âœ…

- [ ] **10.3** Criar testes de integraÃ§Ã£o
  - `src/__tests__/integration/webhook-flow.test.ts`
  - Simula: Webhook â†’ CÃ¡lculo â†’ AprovaÃ§Ã£o â†’ Pagamento

- [ ] **10.4** Criar testes E2E (opcional)
  - Cypress ou Playwright
  - Fluxo completo de usuÃ¡rio

---

## ğŸš€ MÃ³dulo 11: Deploy e ProduÃ§Ã£o

**Objetivo**: Colocar no ar

### âœ… Checklist MÃ³dulo 11

- [ ] **11.1** Configurar variÃ¡veis de ambiente prod
  - Netlify: `VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`
  - Supabase Secrets:
    - `STRIPE_SECRET_KEY`
    - `STRIPE_WEBHOOK_SECRET`
    - `BREVO_API_KEY`

- [ ] **11.2** Deploy frontend (Netlify)
  - Conectar repositÃ³rio GitHub
  - Build command: `pnpm build`
  - Publish directory: `dist`
  - Deploy automÃ¡tico em push para `main`

- [ ] **11.3** Deploy Edge Functions (Supabase)
  ```bash
  supabase functions deploy webhook-stripe
  supabase functions deploy calcular-comissoes
  supabase functions deploy aprovar-comissoes
  supabase functions deploy processar-pagamento-comissoes
  supabase functions deploy verificar-bonus-ltv
  ```

- [ ] **11.4** Executar migrations em produÃ§Ã£o
  ```bash
  supabase db push --db-url "postgresql://..."
  ```

- [ ] **11.5** Configurar domÃ­nio custom (opcional)
  - Comprar domÃ­nio: lovablecelite.com.br
  - Configurar DNS no Netlify
  - SSL automÃ¡tico (Let's Encrypt)

- [ ] **11.6** Ativar Stripe modo produÃ§Ã£o
  - Obter chaves de produÃ§Ã£o
  - Atualizar webhooks para URL de produÃ§Ã£o
  - Testar pagamento real

---

## ğŸ“ Outras ObservaÃ§Ãµes Importantes

### **Workflow de Desenvolvimento**

1. **Feature Branch Strategy**
   ```bash
   git checkout -b feature/stripe-integration
   # Desenvolver
   git commit -m "feat: adiciona integraÃ§Ã£o Stripe"
   git push origin feature/stripe-integration
   # Criar Pull Request
   ```

2. **Commits SemÃ¢nticos**
   - `feat:` Nova funcionalidade
   - `fix:` CorreÃ§Ã£o de bug
   - `docs:` DocumentaÃ§Ã£o
   - `refactor:` RefatoraÃ§Ã£o sem mudar comportamento
   - `test:` AdiÃ§Ã£o de testes
   - `chore:` Tarefas de manutenÃ§Ã£o

3. **Code Review**
   - Pelo menos 1 aprovaÃ§Ã£o antes de merge
   - CI passa (testes + build)
   - Deploy preview no Netlify

### **PriorizaÃ§Ã£o**

**Ordem de implementaÃ§Ã£o sugerida:**
1. MÃ³dulos 1-2 (FundaÃ§Ãµes + Backend) - **Essencial**
2. MÃ³dulo 3 (Stripe) - **CrÃ­tico para receita**
3. MÃ³dulo 4 (ComissÃµes) - **Core business**
4. MÃ³dulo 5 (Dashboard) - **Interface principal**
5. MÃ³dulo 8 (CRONs) - **AutomaÃ§Ã£o chave**
6. MÃ³dulos 6-7 (MLM + Admin) - **Importantes**
7. MÃ³dulos 9-10 (Emails + Testes) - **Nice to have**

### **Estimativa de Tempo (Atualizada)**

| MÃ³dulo | Horas | Complexidade |
|--------|-------|--------------|
| 1. FundaÃ§Ãµes | 8h | MÃ©dia |
| 2. Backend + SeguranÃ§a | 16h | Alta |
| 3. Stripe + Links RastreÃ¡veis | 16h | Muito Alta |
| 4. Sistema ComissÃµes | 20h | Muito Alta |
| 5. Dashboard ComissÃµes | 16h | MÃ©dia |
| 6. Rede MLM + Links | 14h | Alta |
| 7. Painel Admin | 8h | MÃ©dia |
| 8. CRON Jobs | 6h | MÃ©dia |
| 9. Emails | 4h | Baixa |
| 10. Testes | 8h | MÃ©dia |
| 11. Deploy | 4h | Baixa |
| **12. Simulador de Crescimento** âš ï¸ | **10h** | **MÃ©dia** |
| **13. GamificaÃ§Ã£o + Push** âš ï¸ | **20h** | **Alta** |
| **14. Alertas Proativos** âš ï¸ | **12h** | **MÃ©dia** |
| **Mini-LP de ConversÃ£o** âš ï¸ | **6h** | **MÃ©dia** |
| **Total** | **168h** | ~4-5 semanas full-time |

**âš ï¸ Novos mÃ³dulos adicionados:** 54h extras (Simulador, GamificaÃ§Ã£o, Alertas, Mini-LP)

---

**PrÃ³xima SeÃ§Ã£o**: [5 - LanÃ§amento e PDCA](#5---lanÃ§amento-e-pdca)

---

# 5 - LanÃ§amento e PDCA

## ğŸ‘‰ Porque essa etapa Ã© importante?

Porque Ã© aqui que validamos se o projeto realmente funciona e entrega valor no mundo real. VocÃª levanta as mÃ©tricas de negÃ³cio, monitora a operaÃ§Ã£o e implementa ciclos de melhoria contÃ­nua (PDCA) baseados em dados e feedback de usuÃ¡rios. Essa etapa garante que o projeto nÃ£o seja apenas lanÃ§ado, mas continue evoluindo de forma sustentÃ¡vel.

---

## â˜‘ï¸ Checklist Geral

<details>
<summary><strong>ğŸ”§ Ferramentas para ajudar nessa etapa</strong></summary>

- **Analytics**: Google Analytics, Plausible, Mixpanel
- **Monitoramento**: Sentry (erros), UptimeRobot (uptime), Supabase Logs
- **MÃ©tricas de NegÃ³cio**: Metabase, Google Sheets
- **Feedback**: Typeform, Tally, Intercom
- **DocumentaÃ§Ã£o**: Notion, Gitbook

</details>

---

## ğŸš€ Checklist PrÃ©-LanÃ§amento

### âœ… ValidaÃ§Ãµes CrÃ­ticas

- [ ] **1.1** Deploy de produÃ§Ã£o completo
  - Frontend (Netlify): https://lovablecelite.com.br âœ…
  - Edge Functions (Supabase): Todas deployadas âœ…
  - Migrations: Aplicadas em prod âœ…
  - VariÃ¡veis de ambiente: Configuradas âœ…

- [ ] **1.2** Teste E2E completo em produÃ§Ã£o
  - [ ] Cadastro de contador com cÃ³digo de indicaÃ§Ã£o
  - [ ] Login e autenticaÃ§Ã£o
  - [ ] Cadastro de cliente via Stripe Checkout
  - [ ] Webhook Stripe â†’ Pagamento confirmado
  - [ ] ComissÃµes calculadas automaticamente (7 tipos)
  - [ ] Admin aprova comissÃµes
  - [ ] Contador solicita saque
  - [ ] CRON processa pagamento dia 25 (simulado)

- [ ] **1.3** SeguranÃ§a auditada
  - [ ] RLS policies habilitadas em TODAS as tabelas
  - [ ] Webhook Stripe validando assinatura MD5
  - [ ] Secrets nÃ£o expostos no frontend
  - [ ] CORS configurado corretamente
  - [ ] Rate limiting em edge functions sensÃ­veis
  - [ ] SQL injection prevenido (prepared statements)

- [ ] **1.4** Performance otimizada
  - [ ] Lighthouse Score > 90 (Performance, Accessibility, SEO)
  - [ ] Tempo de resposta API < 500ms (p95)
  - [ ] Bundle size frontend < 500KB
  - [ ] Ãndices de banco de dados criados
  - [ ] Queries N+1 eliminadas
  - [ ] Imagens otimizadas (WebP, lazy-load)

- [ ] **1.5** Monitoramento configurado
  - [ ] Sentry capturando erros frontend
  - [ ] Supabase Logs configurados (7 dias retenÃ§Ã£o)
  - [ ] Uptime monitoring (UptimeRobot ou similar)
  - [ ] Alerts para webhooks falhados
  - [ ] Alerts para CRONs nÃ£o executados

- [ ] **1.6** DocumentaÃ§Ã£o completa
  - [ ] README.md atualizado com setup
  - [ ] DocumentaÃ§Ã£o de API (Edge Functions)
  - [ ] Guia de onboarding para contadores
  - [ ] FAQ para dÃºvidas comuns
  - [ ] Runbook para troubleshooting

- [ ] **1.7** Backup configurado
  - [ ] Supabase Backup automÃ¡tico habilitado (Pro plan)
  - [ ] Backup manual antes do lanÃ§amento
  - [ ] Plano de disaster recovery documentado
  - [ ] Testes de restore realizados

---

## ğŸ“Š MÃ©tricas de NegÃ³cio

### **Dashboard de KPIs Principais**

Utilize Google Sheets, Metabase ou crie um dashboard custom no Supabase.

#### **1. MÃ©tricas de Receita**

| MÃ©trica | FÃ³rmula | Meta MÃªs 1 | Meta MÃªs 3 | Meta MÃªs 6 |
|---------|---------|------------|------------|------------|
| **MRR (Monthly Recurring Revenue)** | `SUM(clientes.mensalidade WHERE status='ativo')` | R$ 5K | R$ 20K | R$ 50K |
| **ComissÃµes Provisionadas** | `SUM(comissoes.valor WHERE status='calculada')` | R$ 1K | R$ 4K | R$ 10K |
| **ComissÃµes Pagas** | `SUM(comissoes.valor WHERE status='paga')` | R$ 800 | R$ 3.5K | R$ 9K |
| **Margem LÃ­quida** | `MRR - ComissÃµes Pagas - Custos Operacionais` | R$ 3.2K | R$ 14.5K | R$ 37K |
| **LTV (Lifetime Value)** | `MÃ©dia de mensalidade Ã— Tempo mÃ©dio ativo (meses)` | R$ 1.5K | R$ 2K | R$ 3K |
| **CAC (Customer Acquisition Cost)** | `Custos de marketing / Novos clientes` | R$ 200 | R$ 150 | R$ 100 |

**SQL para extrair:**
```sql
-- MRR atual
SELECT SUM(
  CASE 
    WHEN plano = 'basico' THEN 130
    WHEN plano = 'profissional' THEN 280
    WHEN plano = 'premium' THEN 450
  END
) AS mrr
FROM clientes
WHERE status = 'ativo';

-- ComissÃµes pagas no mÃªs
SELECT 
  DATE_TRUNC('month', pago_em) AS competencia,
  SUM(valor) AS total_pago
FROM comissoes
WHERE status = 'paga'
GROUP BY competencia
ORDER BY competencia DESC;
```

---

#### **2. MÃ©tricas de Rede MLM**

| MÃ©trica | FÃ³rmula | Meta MÃªs 1 | Meta MÃªs 3 | Meta MÃªs 6 |
|---------|---------|------------|------------|------------|
| **Contadores Ativos** | `COUNT(contadores WHERE status='ativo')` | 10 | 30 | 80 |
| **Taxa de AtivaÃ§Ã£o** | `Contadores com >= 1 cliente / Total contadores` | 60% | 70% | 80% |
| **Profundidade MÃ©dia Rede** | `AVG(nivel_rede FROM rede_contadores)` | 2 | 3 | 4 |
| **Overrides Gerados** | `COUNT(comissoes WHERE tipo='override')` | 5 | 20 | 50 |
| **Contadores Diamante** | `COUNT(contadores WHERE nivel='diamante')` | 0 | 2 | 5 |

**SQL para extrair:**
```sql
-- Taxa de ativaÃ§Ã£o
SELECT 
  COUNT(*) FILTER (WHERE clientes_ativos >= 1) AS ativos,
  COUNT(*) AS total,
  ROUND(100.0 * COUNT(*) FILTER (WHERE clientes_ativos >= 1) / COUNT(*), 2) AS taxa_ativacao
FROM contadores;

-- DistribuiÃ§Ã£o por nÃ­vel
SELECT 
  nivel,
  COUNT(*) AS quantidade
FROM contadores
GROUP BY nivel
ORDER BY 
  CASE nivel
    WHEN 'bronze' THEN 1
    WHEN 'prata' THEN 2
    WHEN 'ouro' THEN 3
    WHEN 'diamante' THEN 4
  END;
```

---

#### **3. MÃ©tricas de Produto**

| MÃ©trica | FÃ³rmula | Meta MÃªs 1 | Meta MÃªs 3 | Meta MÃªs 6 |
|---------|---------|------------|------------|------------|
| **Clientes Ativos** | `COUNT(clientes WHERE status='ativo')` | 40 | 150 | 400 |
| **Churn Rate** | `Clientes cancelados / Total clientes (inÃ­cio mÃªs)` | 5% | 3% | 2% |
| **NPS (Net Promoter Score)** | Survey trimestral | N/A | 40 | 60 |
| **Tempo MÃ©dio AtivaÃ§Ã£o** | `AVG(data_ativacao - created_at)` | 3 dias | 2 dias | 1 dia |
| **Webhooks Success Rate** | `Webhooks 200 / Total webhooks` | 95% | 98% | 99% |

**SQL para extrair:**
```sql
-- Churn mensal
WITH mes_anterior AS (
  SELECT COUNT(*) AS total
  FROM clientes
  WHERE status = 'ativo'
    AND created_at < DATE_TRUNC('month', CURRENT_DATE)
),
cancelamentos AS (
  SELECT COUNT(*) AS total
  FROM clientes
  WHERE status = 'cancelado'
    AND updated_at >= DATE_TRUNC('month', CURRENT_DATE)
)
SELECT 
  cancelamentos.total,
  mes_anterior.total,
  ROUND(100.0 * cancelamentos.total / mes_anterior.total, 2) AS churn_rate
FROM mes_anterior, cancelamentos;
```

---

## ğŸ”„ Ciclo PDCA (Plan-Do-Check-Act)

### **O que Ã© PDCA?**

Ciclo de melhoria contÃ­nua:
1. **Plan (Planejar)**: Identificar problema e planejar soluÃ§Ã£o
2. **Do (Executar)**: Implementar a soluÃ§Ã£o
3. **Check (Verificar)**: Medir resultados
4. **Act (Agir)**: Padronizar se funcionar ou replanejar se falhar

---

### **Exemplo de PDCA: Melhorar Taxa de AtivaÃ§Ã£o de Contadores**

#### **PLAN (Planejar)**

**Problema Identificado:**
- Taxa de ativaÃ§Ã£o de contadores estÃ¡ em 50% (meta: 70%)
- 15 de 30 contadores cadastrados nÃ£o ativaram nenhum cliente

**HipÃ³teses:**
1. Falta de treinamento sobre uso da plataforma
2. Falta de materiais de marketing (landing page, imagens)
3. Processo de onboarding confuso

**Plano de AÃ§Ã£o:**
- Criar vÃ­deo tutorial de 5 minutos
- Fornecer landing page template (Figma)
- Simplificar onboarding (wizard de 3 passos)
- Enviar email de boas-vindas com checklist

**MÃ©tricas:**
- Taxa de ativaÃ§Ã£o aumenta de 50% para 70% em 30 dias
- Tempo mÃ©dio de ativaÃ§Ã£o reduz de 7 para 3 dias

---

#### **DO (Executar)**

**AÃ§Ãµes Implementadas:**
- âœ… Criado vÃ­deo tutorial no Loom (4:30min)
- âœ… Fornecido template Figma de landing page
- âœ… Refatorado `/auth` para wizard de 3 passos
- âœ… Configurado email Brevo com checklist

**Timeline:**
- Semana 1: CriaÃ§Ã£o de materiais
- Semana 2: ImplementaÃ§Ã£o tÃ©cnica
- Semana 3-4: Monitoramento

---

#### **CHECK (Verificar)**

**Resultados apÃ³s 30 dias:**
- Taxa de ativaÃ§Ã£o: 64% (â†‘14%)
- Tempo mÃ©dio de ativaÃ§Ã£o: 4 dias (â†“3 dias)
- Feedback positivo: 8/10 contadores (survey)

**AnÃ¡lise:**
- âœ… Melhoria significativa, mas nÃ£o atingiu meta de 70%
- âœ… Tempo de ativaÃ§Ã£o melhorou como esperado
- âš ï¸ Ainda hÃ¡ 36% de contadores inativos

**Insights:**
- VÃ­deo tutorial teve 80% de conclusÃ£o (bom!)
- Landing page template teve apenas 30% de uso (baixo)
- Wizard de onboarding reduziu drop-off de 40% para 15%

---

#### **ACT (Agir)**

**DecisÃ£o: Padronizar + Novo Ciclo**

1. **Padronizar** (o que funcionou):
   - VÃ­deo tutorial vira obrigatÃ³rio no onboarding
   - Wizard permanece como padrÃ£o
   - Email checklist enviado D+1 de cadastro

2. **Novo PDCA** (problema remanescente):
   - **Problema**: 36% de contadores ainda inativos
   - **Nova hipÃ³tese**: Falta suporte 1:1 nos primeiros dias
   - **Plano**: Agendar call de 15min com cada contador novo (D+2)
   - **Meta**: Taxa de ativaÃ§Ã£o 80% em 60 dias

---

### **CadÃªncia de PDCA Recomendada**

| FrequÃªncia | Foco | Exemplo |
|------------|------|---------|
| **Semanal** | Bugs crÃ­ticos e hotfixes | Webhook falhando 20% das vezes |
| **Quinzenal** | Melhorias de UX | BotÃ£o "Solicitar Saque" pouco clicado |
| **Mensal** | OtimizaÃ§Ãµes de conversÃ£o | Taxa de ativaÃ§Ã£o, churn, NPS |
| **Trimestral** | EstratÃ©gia de produto | Adicionar novo tipo de comissÃ£o? |

---

## ğŸ“ˆ Roadmap de EvoluÃ§Ã£o (6 meses)

### **MÃªs 1: EstabilizaÃ§Ã£o**
- âœ… Monitorar erros em produÃ§Ã£o 24/7
- âœ… Corrigir bugs reportados em < 24h
- âœ… Garantir 99% uptime
- âœ… Onboarding de 10 contadores piloto
- âœ… Coletar feedback qualitativo

### **MÃªs 2: OtimizaÃ§Ã£o**
- ğŸ”„ PDCA: Melhorar taxa de ativaÃ§Ã£o
- ğŸ”„ PDCA: Reduzir tempo de cÃ¡lculo de comissÃµes
- âœ… Adicionar dashboard de mÃ©tricas para admin
- âœ… Implementar NPS survey
- âœ… Documentar casos de uso reais

### **MÃªs 3: ExpansÃ£o**
- ğŸš€ Dobrar base de contadores (10 â†’ 30)
- ğŸš€ LanÃ§ar programa de afiliados (indicaÃ§Ã£o de contador)
- âœ… Adicionar integraÃ§Ã£o com ASAAS (fallback Stripe)
- âœ… Criar conteÃºdo educacional (blog/YouTube)
- âœ… Mobile app (PWA) em beta

### **MÃªs 4-6: Escala**
- ğŸš€ Atingir 80 contadores ativos
- ğŸš€ MRR de R$ 50K
- âœ… Contratar suporte part-time
- âœ… Automatizar 100% dos pagamentos
- âœ… Expandir para outros nichos (corretor de imÃ³veis?)

---

## ğŸ› ï¸ Ferramentas de Monitoramento

### **1. Sentry (Erro Tracking)**

**ConfiguraÃ§Ã£o:**
```typescript
// src/main.tsx
import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: import.meta.env.VITE_SENTRY_DSN,
  environment: import.meta.env.MODE,
  tracesSampleRate: 0.1,
  integrations: [
    new Sentry.BrowserTracing(),
    new Sentry.Replay(),
  ],
});
```

**Alerts configurados:**
- Erro 5xx em edge function â†’ Slack #tech-alerts
- Webhook Stripe falhou 3x seguidas â†’ Email + SMS
- Taxa de erro > 1% â†’ Pagerduty (on-call)

---

### **2. Supabase Logs**

**Queries Ãºteis:**
```sql
-- Webhooks falhados nas Ãºltimas 24h
SELECT *
FROM webhook_logs
WHERE status != 'success'
  AND created_at > NOW() - INTERVAL '24 hours'
ORDER BY created_at DESC;

-- ComissÃµes calculadas mas nÃ£o aprovadas (> 7 dias)
SELECT 
  c.id,
  c.contador_id,
  c.valor,
  c.created_at
FROM comissoes c
WHERE c.status = 'calculada'
  AND c.created_at < NOW() - INTERVAL '7 days';
```

---

### **3. Google Analytics / Plausible**

**Eventos rastreados:**
- `page_view` â†’ Todas as pÃ¡ginas
- `signup_completed` â†’ Contador cadastrado
- `commission_requested` â†’ Saque solicitado
- `client_activated` â†’ Novo cliente via Stripe
- `dashboard_accessed` â†’ Uso do sistema

**Funil de conversÃ£o:**
```
LP â†’ Cadastro â†’ AtivaÃ§Ã£o â†’ Cliente 1 â†’ Cliente 5 â†’ Diamante
100%    60%       70%        50%        20%        5%
```

---

## ğŸ“ Outras ObservaÃ§Ãµes Importantes

### **CritÃ©rios de Sucesso do LanÃ§amento**

**Sucesso = Responder "SIM" para todas essas perguntas:**

1. âœ… O sistema estÃ¡ estÃ¡vel hÃ¡ 7 dias sem erros crÃ­ticos?
2. âœ… 100% dos webhooks Stripe estÃ£o sendo processados corretamente?
3. âœ… ComissÃµes calculadas automaticamente em < 5s?
4. âœ… Contadores conseguem visualizar e solicitar saques sem confusÃ£o?
5. âœ… Admin consegue aprovar comissÃµes em lote?
6. âœ… CRON jobs executam no horÃ¡rio agendado?
7. âœ… Temos backup de banco de dados atualizado?
8. âœ… DocumentaÃ§Ã£o bÃ¡sica estÃ¡ disponÃ­vel?
9. âœ… Monitoramento de erros estÃ¡ ativo?
10. âœ… Pelo menos 5 contadores piloto testaram e aprovaram?

---

### **Plano de ContingÃªncia**

**CenÃ¡rio 1: Webhook Stripe para de funcionar**
- Impacto: ComissÃµes nÃ£o sÃ£o calculadas
- SoluÃ§Ã£o: Script manual de processamento de faturas via Stripe API
- SLA: Executar dentro de 4h

**CenÃ¡rio 2: CRON nÃ£o executa no dia 25**
- Impacto: Pagamentos atrasam
- SoluÃ§Ã£o: Trigger manual da edge function via curl
- SLA: Executar atÃ© 12h do dia 25

**CenÃ¡rio 3: RLS quebra apÃ³s migration**
- Impacto: Dados vazados entre contadores
- SoluÃ§Ã£o: Rollback de migration + hotfix
- SLA: Rollback imediato (< 30min)

---

### **ComunicaÃ§Ã£o com UsuÃ¡rios**

**Canais:**
- **Email**: AtualizaÃ§Ãµes mensais (Brevo)
- **In-app**: NotificaÃ§Ãµes de novas features (toast)
- **WhatsApp Group**: Suporte direto (primeiros 30 contadores)
- **Changelog**: PÃ¡gina pÃºblica com releases

**FrequÃªncia:**
- Features novas: A cada deploy (semanal)
- MÃ©tricas de negÃ³cio: Mensal (MRR, comissÃµes pagas)
- ManutenÃ§Ãµes programadas: 48h de antecedÃªncia

---

## ğŸ¯ ConclusÃ£o

O Framework Lovable-Celite estÃ¡ completo! ğŸ‰

**VocÃª agora tem:**
1. âœ… VisÃ£o estratÃ©gica clara (problema, soluÃ§Ã£o, personas, custos)
2. âœ… Insights do mercado (benchmarks, diferenciais)
3. âœ… Arquitetura tÃ©cnica robusta (processos, dados, wireframes)
4. âœ… Checklist de implementaÃ§Ã£o modular (11 mÃ³dulos, 114h)
5. âœ… Plano de lanÃ§amento e melhoria contÃ­nua (PDCA)

**PrÃ³ximos Passos Imediatos:**
1. Revisar checklist de implementaÃ§Ã£o (MÃ³dulos 1-11)
2. Priorizar tarefas pendentes (Stripe, CRONs, Testes)
3. Executar checklist prÃ©-lanÃ§amento
4. Onboarding de contadores piloto
5. Iniciar ciclo PDCA semanal

**Lembre-se:**
> "O projeto nÃ£o termina no deploy. Ele comeÃ§a ali."

Continue iterando, ouvindo usuÃ¡rios e melhorando. O sucesso vem da **consistÃªncia** e do **ciclo de aprendizado contÃ­nuo**.

---

**Boa sorte e boas vendas!** ğŸš€ğŸ’°

---

**Autor**: Claude Sonnet 4.5 (Anthropic)  
**Projeto**: Lovable-Celite MLM/MMN  
**Data**: Novembro 2025  
**Stack**: React + Vite + Supabase + Stripe + Shadcn/UI

---

# ğŸ“ APÃŠNDICE: Por Que Cada Feature TÃ©cnica Existe

## **ConexÃ£o Completa: Emocional â†’ TÃ©cnico**

Este framework Ã© Ãºnico porque **cada decisÃ£o tÃ©cnica** serve a um **objetivo emocional especÃ­fico**. Nada foi escolhido por "ser moderno" ou "best practice". Tudo existe para resolver uma DOR ou entregar um ANSEIO de Carlos.

---

### **DOR 1: MEDO (Paralisa DecisÃ£o)**

#### **Problema Emocional:**
- Carlos tem R$15 mil guardados mas NÃƒO investe
- "E se escolher errado? E se perder tudo?"
- Medo de ser tarde demais (42 anos)

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve o MEDO |
|-----------------|---------------------|
| **Onboarding progressivo** (MÃ³dulo 1) | ComeÃ§a PEQUENO (cadastro + 1Âº link), nÃ£o "tudo de uma vez" |
| **Quick wins** (1Âª comissÃ£o visÃ­vel) | Prova RÃPIDA de que funciona = Medo reduz |
| **Comunidade visÃ­vel** | "Somos 80 contadores como vocÃª" = NÃ£o estÃ¡ sozinho |
| **Simulador de crescimento** | Visualiza futuro SEM risco (teste antes) |
| **Sistema comprovado** | Cases de sucesso documentados = NÃ£o Ã© cobaia |
| **Investimento gradual** | Indicou 1 cliente? Funcionou? EntÃ£o indica mais |
| **Mentoria ativa** (Alertas Ano 1) | Suporte nos primeiros 90 dias = NÃ£o vai fracassar |

**Resultado Emocional**: MEDO â†’ ESPERANÃ‡A â†’ AÃ‡ÃƒO

---

### **DOR 2: DESVALORIZAÃ‡ÃƒO ("Ã‰ sÃ³ contabilidade mesmo")**

#### **Problema Emocional:**
- Tratado como despachante, nÃ£o consultor
- Perde clientes para "30% mais barato"
- 18 anos de experiÃªncia subutilizada

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve a DESVALORIZAÃ‡ÃƒO |
|-----------------|-------------------------------|
| **Shadcn/UI premium** | Interface BONITA = Profissionalismo = Autoestima â†‘ |
| **Dark mode elegante** | Design aspiracional = "NÃ£o sou amador" |
| **Framer Motion** (animaÃ§Ãµes) | Suavidade = Qualidade = Valor percebido â†‘ |
| **EscritÃ³rio Virtual Top Class** | EndereÃ§o PREMIUM = CartÃ£o de visitas que impressiona |
| **Badge Sistema** (GamificaÃ§Ã£o) | "Contador DIAMANTE" â‰  "contador comum" |
| **Lead Diamante** | Top Class trabalha PARA VOCÃŠ = Reconhecimento supremo |
| **Porto Seguro Elite** | Status de ELITE = ValorizaÃ§Ã£o mÃ¡xima |

**Resultado Emocional**: DESPACHANTE â†’ CONSULTOR ESTRATÃ‰GICO

---

### **DOR 3: PRESSÃƒO SOCIAL (FamÃ­lia com pena)**

#### **Problema Emocional:**
- Sogro: "Ainda nÃ£o conseguiu crescer?"
- Cunhado: "VocÃª estÃ¡ parado no tempo"
- FamÃ­lia olha com PENA

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve a PRESSÃƒO SOCIAL |
|-----------------|-------------------------------|
| **VitÃ³rias rÃ¡pidas** (1Âª comissÃ£o R$130) | Prova TANGÃVEL para mostrar = "Funcionou!" |
| **NÃ­veis visÃ­veis** (Bronzeâ†’Prataâ†’Ouroâ†’Diamante) | Progresso MENSURÃVEL = "Estou crescendo!" |
| **Conquistas compartilhÃ¡veis** | Badges no LinkedIn = Prova social externa |
| **Ranking Top 10** | Reconhecimento PÃšBLICO = "Olha sÃ³ onde estou!" |
| **Dashboard bonito** | Screenshots para famÃ­lia = "Meu negÃ³cio Ã© sÃ©rio" |
| **Eventos presenciais** | Networking com elite = Status visÃ­vel |
| **Lead Diamante** | "Top Class me dÃ¡ leads" = Prova de autoridade |

**Resultado Emocional**: PENA â†’ ADMIRAÃ‡ÃƒO

---

### **DOR 4: VERGONHA (Filhos sem orgulho do pai)**

#### **Problema Emocional:**
- "Meu pai Ã© contador" (voz sem empolgaÃ§Ã£o)
- NÃ£o hÃ¡ brilho no olho quando falam do pai
- Dor MAIS PROFUNDA de Carlos

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve a VERGONHA |
|-----------------|-------------------------|
| **Lead Diamante = STATUS SUPREMO** | "Meu pai Ã© DIAMANTE!" (EMPOLGAÃ‡ÃƒO) |
| **EscritÃ³rio Top Class** | Filhos podem mostrar para amigos = Orgulho |
| **Conquistas reais** (nÃ£o fake) | Progresso genuÃ­no = Orgulho genuÃ­no |
| **TransformaÃ§Ã£o rÃ¡pida** | FamÃ­lia nota: "Pai estÃ¡ mudando!" |
| **Dashboard pÃºblico** | Filhos veem nÃºmeros crescendo = Concreto |
| **Eventos + Fotos** | "Meu pai palestrou no CRC!" |
| **Ranking Top 10** | "Meu pai Ã© top 5 de Sergipe!" |

**Resultado Emocional**: VERGONHA â†’ ORGULHO DOS FILHOS

**OBS**: Esta Ã© a razÃ£o #1 de compra. Se o app nÃ£o entregar isso, **FRACASSOU**.

---

### **DOR 5: SOLIDÃƒO ("NÃ£o posso falar com ninguÃ©m")**

#### **Problema Emocional:**
- Isolamento emocional total
- DecisÃµes tomadas sozinho
- "Todos fingem que estÃ¡ tudo bem"

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve a SOLIDÃƒO |
|-----------------|------------------------|
| **Firebase Push Notifications** | Nunca mais sozinho = Top Class checa VOCÃŠ |
| **Alertas Proativos** (MÃªs 4, 6, 9) | LigaÃ§Ãµes pessoais = AlguÃ©m se importa |
| **Comunidade ativa** (WhatsApp/Discord) | Contadores que ENTENDEM = NÃ£o estÃ¡ sozinho |
| **Mentoria individual** | AlguÃ©m que ESCUTA = VÃ¡lvula de escape |
| **Eventos presenciais** | ConexÃµes REAIS = Amizades verdadeiras |
| **Check-ins trimestrais** | Top Class monitora SUA saÃºde emocional |
| **Suporte 24/7** | Grupo sempre ativo = Nunca sem resposta |

**Resultado Emocional**: SOLIDÃƒO â†’ COMUNIDADE

---

### **DOR 6: POTENCIAL DESPERDIÃ‡ADO ("Tenho tanto a oferecer")**

#### **Problema Emocional:**
- Faz trabalho de auxiliar
- Conhecimento enterrado
- "Estou morrendo um pouco a cada dia"

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve o DESPERDÃCIO |
|-----------------|----------------------------|
| **Posicionamento como consultor** | NÃ£o mais "fazedor de guias" |
| **Rede de clientes premium** | Que VALORIZAM expertise |
| **Palestras/eventos** | Compartilhar conhecimento = PropÃ³sito |
| **Mentoria de Bronze/Prata** | Ensinar iniciantes = Legado |
| **Lead Diamante** | Ser TÃƒO BOM que Top Class trabalha para vocÃª |
| **Porto Seguro Elite** | Reconhecimento de longevidade |
| **Ranking de autoridade** | ReferÃªncia regional = Potencial realizado |

**Resultado Emocional**: OPERADOR â†’ ESTRATEGISTA

---

### **DOR 7: ESTAGNAÃ‡ÃƒO ("Parado no tempo")**

#### **Problema Emocional:**
- Mesmo faturamento hÃ¡ 5 anos
- "Nunca conseguiu decolar"
- Medo de chegar aos 60 assim

#### **SoluÃ§Ãµes TÃ©cnicas Implementadas:**

| Feature TÃ©cnica | Como Resolve a ESTAGNAÃ‡ÃƒO |
|-----------------|---------------------------|
| **NÃ­veis crescentes** (Bronzeâ†’Diamante) | Progresso VISÃVEL e MENSURÃVEL |
| **Renda crescente** (override + bÃ´nus) | Escala AUTOMÃTICA (nÃ£o linear) |
| **Simulador de crescimento** | Visualizar futuro DIFERENTE = EsperanÃ§a |
| **Conquistas celebradas** | Cada vitÃ³ria Ã© MARCO (nÃ£o passa despercebido) |
| **GrÃ¡ficos de evoluÃ§Ã£o** | Linha ascendente = Prova de movimento |
| **ComparaÃ§Ã£o mÃªs a mÃªs** | "SaÃ­ de R$0 para R$5K override em 6 meses" |
| **BÃ´nus progressivos** | Marcos a cada 5 clientes = Sempre tem prÃ³ximo |

**Resultado Emocional**: ESTAGNAÃ‡ÃƒO â†’ MOMENTUM

---

## **ANSEIOS: Como Entregamos os Sonhos**

### **ANSEIO 1: Filhos terem orgulho do pai** ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦

| Feature | Entrega |
|---------|---------|
| Lead Diamante | "Meu pai Ã© DIAMANTE!" (status supremo) |
| EscritÃ³rio Top Class | Infraestrutura visÃ­vel de sucesso |
| Conquistas compartilhÃ¡veis | Badges para mostrar |
| TransformaÃ§Ã£o documentada | Antes x Depois emocional + financeiro |
| Ranking Top 10 | Prova externa de autoridade |

---

### **ANSEIO 2: Ser respeitado como especialista** ğŸ“

| Feature | Entrega |
|---------|---------|
| Posicionamento Top Class | AssociaÃ§Ã£o com marca premium |
| Rede de clientes educados | Entendem valor, nÃ£o sÃ³ preÃ§o |
| Palestras/eventos | Plataforma de autoridade |
| Porto Seguro Elite | CertificaÃ§Ã£o de excelÃªncia |
| Mentoria oficial | Reconhecimento como expert |

---

### **ANSEIO 3: Trabalhar 6-8h/dia (nÃ£o 12h)** â°

| Feature | Entrega |
|---------|---------|
| Renda passiva (override) | Dinheiro enquanto dorme |
| AutomaÃ§Ã£o (webhooks) | Sistema trabalha por vocÃª |
| CRON (dia 25) | Pagamentos AUTOMÃTICOS |
| Dashboard em tempo real | NÃ£o precisa calcular manualmente |
| Equipe via rede | Outros prospectan do para vocÃª |

---

### **ANSEIO 4: FamÃ­lia vibrar com conquistas** ğŸ‰

| Feature | Entrega |
|---------|---------|
| VitÃ³rias frequentes | ComissÃµes mensais (prova constante) |
| NÃ­veis crescentes | "Passei para Prata!" = CelebraÃ§Ã£o |
| Ranking pÃºblico | "Pai Ã© top 5!" = Orgulho externo |
| Eventos exclusivos | FamÃ­lia VÃŠ status (fotos, convites) |
| Push notifications | "VocÃª recebeu R$X!" = Momento de comemorar |

---

### **ANSEIO 5: Deixar legado positivo** ğŸ“œ

| Feature | Entrega |
|---------|---------|
| Porto Seguro Elite | Reconhecimento de longevidade |
| Mentoria de iniciantes | Formar prÃ³xima geraÃ§Ã£o |
| Palestras registradas | ConteÃºdo que fica |
| Cases de sucesso | HistÃ³ria documentada |
| InfluÃªncia regional | Ser lembrado como referÃªncia |

---

## **ğŸ¯ Resumo: Arquitetura Emocional**

**Outros apps**: Pensam em features primeiro
**Lovable-Celite**: Pensa em DORES primeiro, features DEPOIS

**Processo:**
1. Identificar DOR emocional (ex: Vergonha)
2. Definir resultado emocional desejado (ex: Orgulho dos filhos)
3. Escolher feature tÃ©cnica que entrega isso (ex: Lead Diamante)
4. Implementar com EXCELÃŠNCIA tÃ©cnica
5. Validar se entregou transformaÃ§Ã£o emocional

**Por isso cada linha de cÃ³digo existe:**
- Webhook < 2s â†’ Reduz medo (prova que funciona RÃPIDO)
- Dashboard bonito â†’ Combate vergonha (profissionalismo)
- Push proativo â†’ Elimina solidÃ£o (nunca estÃ¡ sozinho)
- GamificaÃ§Ã£o â†’ Celebra vitÃ³rias (combate estagnaÃ§Ã£o)
- Simulador â†’ Visualiza futuro (combate medo)
- Lead Diamante â†’ STATUS (orgulho dos filhos)

---

**Este Ã© o Framework Lovable-Celite:**

**Onde cada decisÃ£o tÃ©cnica serve a um propÃ³sito humano.**

**Onde tecnologia Ã© o MEIO, transformaÃ§Ã£o Ã© o FIM.**

**Onde 50% tÃ©cnico + 50% emocional = 100% mudanÃ§a de vida.**

---

**ğŸ’ "Meus filhos terÃ£o orgulho de mim."**

**Esta Ã© a ÃšNICA mÃ©trica que realmente importa.**

---

**FIM DO FRAMEWORK**

---

**Autor**: Claude Sonnet 4.5 (Anthropic)  
**Projeto**: Lovable-Celite MLM/MMN  
**Data**: Novembro 2025  
**Stack**: React + Vite + Supabase + Stripe + Shadcn/UI  
**Filosofia**: Tecnologia com PropÃ³sito Humano


